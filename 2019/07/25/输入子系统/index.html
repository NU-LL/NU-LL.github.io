<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <title>è¾“å…¥å­ç³»ç»Ÿ | æ— åå°å’</title>
  <meta name="keywords" content=" æŒ‰é”®é©±åŠ¨ , è¾“å…¥å­ç³»ç»Ÿ ">
  <meta name="description" content="è¾“å…¥å­ç³»ç»Ÿ | æ— åå°å’">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="å…³äº">
<meta property="og:type" content="website">
<meta property="og:title" content="about">
<meta property="og:url" content="http://NU-LL.github.io/about/index.html">
<meta property="og:site_name" content="æ— åå°å’">
<meta property="og:description" content="å…³äº">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-07-21T14:30:10.192Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="about">
<meta name="twitter:description" content="å…³äº">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0"></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js"></script>

<script src="/js/iconfont.js?v=1.1.0"></script>

</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value>
  <input class="theme_blog_path" value>
  <input id="theme_shortcut" value="true">
</div>


<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>NU-LL</span>
</div>

<div class="icon">
    
        
    
        
        <a title="github" href="https://github.com/NU-LL" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
        <a title="csdn" href="https://blog.csdn.net/CSDN_JZ_" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-csdn"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
        <a title="email" href="mailto:1125934312@qq.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=1125934312&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
        
    
        
        <a title="neteasemusic" href="https://music.163.com/#/user/home?id=323374922" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-neteasemusic"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active" data-rel="All">All<small>(44)</small></div></li>
    
        
            
            <li><div data-rel="Linux">Linux<small>(25)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="ç¼–ç¨‹è¯­è¨€">ç¼–ç¨‹è¯­è¨€<small>(6)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="MCU">MCU<small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="äººå·¥æ™ºèƒ½">äººå·¥æ™ºèƒ½<small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="å·¥å…·">å·¥å…·<small>(4)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="ç®—æ³•">ç®—æ³•<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="æ„Ÿæ‚Ÿä¸æ€»ç»“">æ„Ÿæ‚Ÿä¸æ€»ç»“<small>(2)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">About</a><a style="width: 50%"  class="friends">Friends</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="44">
<input type="hidden" id="yelog_site_word_count" value="288.7k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://github.com/NU-LL">NU-LL</a></li>
            
            <li><a target="_blank" href="https://github.com/southernEast">SouthEast</a></li>
            
            <li><a target="_blank" href="https://github.com/tan1998lei">tan1998lei</a></li>
            
            <li><a target="_blank" href="https://github.com/jiejieTop">jiejieTop</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>BootLoader</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Ctex</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>DM9000C</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>dual bank</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ESP32</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ESP8266</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>git</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>GO</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Goè¯­è¨€å…¥é—¨ç»å…¸</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>IAP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>IICé©±åŠ¨</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Kconfigè¯­æ³•</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Kubernetes</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Latex</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>LiCheePi Zero</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Linuxå†…æ ¸</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>LinuxæœåŠ¡</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Markdown</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>markdownlint</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Mininet</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NanoPi Neo Core</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>network namespace</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pollæœºåˆ¶</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>python</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pythonå®æˆ˜</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SVM</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>TensorFlow2</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>u-boot</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>wait_queue_head_t</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>wait_queue_t</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Xmanager</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>äºŒç»´æ•°ç»„</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å­—ç¬¦é©±åŠ¨</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å­˜å‚¨å™¨</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å»–é›ªå³°pythonæ•™ç¨‹</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å¼‚æ­¥é€šçŸ¥æœºåˆ¶</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å¿«é€Ÿæ’åº</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æŒ‡é’ˆ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æŒ‰é”®é©±åŠ¨</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ•°æ®åˆ†æ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ–‡ä»¶æè¿°ç¬¦</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ ¹æ–‡ä»¶ç³»ç»Ÿ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ·±åº¦å­¦ä¹ </a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>çˆ¬è™«</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç­‰å¾…é˜Ÿåˆ—</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç½‘å¡ç§»æ¤</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç½‘å¡é©±åŠ¨æ¡†æ¶</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è™šæ‹Ÿç½‘å¡</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è®¾å¤‡æ ‘</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è¾“å…¥å­ç³»ç»Ÿ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è¿œç¨‹é“¾æ¥</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>é©±åŠ¨API</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        <a  class="All äººå·¥æ™ºèƒ½ "
           href="/2020/06/05/SVM/"
           data-tag="SVM"
           data-author="" >
            <span class="post-title" title="SVMï¼ˆçº¿æ€§æ¨¡å‹ï¼‰æ•°å­¦æ¨å¯¼">SVMï¼ˆçº¿æ€§æ¨¡å‹ï¼‰æ•°å­¦æ¨å¯¼</span>
            <span class="post-date" title="2020-06-05 21:12:53">2020/06/05</span>
        </a>
        
        <a  class="All MCU "
           href="/2020/05/16/ESP32/"
           data-tag="ESP32"
           data-author="" >
            <span class="post-title" title="ESP8266">ESP8266</span>
            <span class="post-date" title="2020-05-16 10:30:54">2020/05/16</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2020/05/09/Cå’ŒGOçš„è¯­æ³•å¯¹æ¯”/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="Cå’ŒGOçš„è¯­æ³•å¯¹æ¯”">Cå’ŒGOçš„è¯­æ³•å¯¹æ¯”</span>
            <span class="post-date" title="2020-05-09 19:55:39">2020/05/09</span>
        </a>
        
        <a  class="All äººå·¥æ™ºèƒ½ "
           href="/2020/05/03/TensorFlow2/"
           data-tag="TensorFlow2"
           data-author="" >
            <span class="post-title" title="TensorFlow2å…¥é—¨ä¸å®è·µ">TensorFlow2å…¥é—¨ä¸å®è·µ</span>
            <span class="post-date" title="2020-05-03 00:52:53">2020/05/03</span>
        </a>
        
        <a  class="All MCU "
           href="/2020/04/28/ESP8266/"
           data-tag="ESP8266"
           data-author="" >
            <span class="post-title" title="ESP8266">ESP8266</span>
            <span class="post-date" title="2020-04-28 14:27:54">2020/04/28</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/04/06/Linuxé©±åŠ¨å¸¸ç”¨APIæ•´ç†/"
           data-tag="é©±åŠ¨API"
           data-author="" >
            <span class="post-title" title="Linuxé©±åŠ¨å¸¸ç”¨APIæ•´ç†">Linuxé©±åŠ¨å¸¸ç”¨APIæ•´ç†</span>
            <span class="post-date" title="2020-04-06 22:48:09">2020/04/06</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/03/28/Linuxä¸Šå¸¸è§æœåŠ¡æ­å»º/"
           data-tag="LinuxæœåŠ¡"
           data-author="" >
            <span class="post-title" title="Linuxä¸Šå¸¸è§æœåŠ¡æ­å»º">Linuxä¸Šå¸¸è§æœåŠ¡æ­å»º</span>
            <span class="post-date" title="2020-03-28 01:27:58">2020/03/28</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/03/15/kubernetes/"
           data-tag="Kubernetes"
           data-author="" >
            <span class="post-title" title="Kubernetes">Kubernetes</span>
            <span class="post-date" title="2020-03-15 13:48:53">2020/03/15</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2020/03/10/Pythonæ•°æ®åˆ†æä¸å±•ç¤º/"
           data-tag="æ•°æ®åˆ†æ"
           data-author="" >
            <span class="post-title" title="Pythonæ•°æ®åˆ†æä¸å±•ç¤º">Pythonæ•°æ®åˆ†æä¸å±•ç¤º</span>
            <span class="post-date" title="2020-03-10 15:10:50">2020/03/10</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2020/02/18/pythonçˆ¬è™«/"
           data-tag="python,çˆ¬è™«"
           data-author="" >
            <span class="post-title" title="pythonçˆ¬è™«">pythonçˆ¬è™«</span>
            <span class="post-date" title="2020-02-18 23:40:18">2020/02/18</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/02/13/Mininet/"
           data-tag="Mininet"
           data-author="" >
            <span class="post-title" title="Mininet">Mininet</span>
            <span class="post-date" title="2020-02-13 18:37:12">2020/02/13</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/02/10/linux ç½‘ç»œè™šæ‹ŸåŒ–ï¼š network namespace ç®€ä»‹/"
           data-tag="network namespace"
           data-author="" >
            <span class="post-title" title="linux ç½‘ç»œè™šæ‹ŸåŒ–ï¼š network namespace ç®€ä»‹">linux ç½‘ç»œè™šæ‹ŸåŒ–ï¼š network namespace ç®€ä»‹</span>
            <span class="post-date" title="2020-02-10 14:24:09">2020/02/10</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2020/01/29/pythonå®æˆ˜/"
           data-tag="pythonå®æˆ˜"
           data-author="" >
            <span class="post-title" title="pythonå®æˆ˜">pythonå®æˆ˜</span>
            <span class="post-date" title="2020-01-29 21:36:32">2020/01/29</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/01/16/Docker/"
           data-tag="Docker"
           data-author="" >
            <span class="post-title" title="Docker">Docker</span>
            <span class="post-date" title="2020-01-16 20:14:51">2020/01/16</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2020/01/10/python/"
           data-tag="å»–é›ªå³°pythonæ•™ç¨‹"
           data-author="" >
            <span class="post-title" title="Python">Python</span>
            <span class="post-date" title="2020-01-10 20:18:52">2020/01/10</span>
        </a>
        
        <a  class="All äººå·¥æ™ºèƒ½ "
           href="/2020/01/03/æ·±åº¦å­¦ä¹ ä¸TensorFlow2/"
           data-tag="TensorFlow2,æ·±åº¦å­¦ä¹ "
           data-author="" >
            <span class="post-title" title="æ·±åº¦å­¦ä¹ ä¸TensorFlow2">æ·±åº¦å­¦ä¹ ä¸TensorFlow2</span>
            <span class="post-date" title="2020-01-03 21:04:26">2020/01/03</span>
        </a>
        
        <a  class="All MCU "
           href="/2019/11/12/åŸºäºSTM32L476çš„IAPå‡çº§/"
           data-tag="IAP,BootLoader,dual bank"
           data-author="" >
            <span class="post-title" title="åŸºäºSTM32L476çš„IAPå‡çº§">åŸºäºSTM32L476çš„IAPå‡çº§</span>
            <span class="post-date" title="2019-11-12 22:47:40">2019/11/12</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/11/08/Xmanagerè¿œç¨‹Ubuntuç³»ç»Ÿå›¾åƒåŒ–ç•Œé¢/"
           data-tag="Xmanager,è¿œç¨‹é“¾æ¥"
           data-author="" >
            <span class="post-title" title="Xmanagerè¿œç¨‹Ubuntuç³»ç»Ÿå›¾åƒåŒ–ç•Œé¢">Xmanagerè¿œç¨‹Ubuntuç³»ç»Ÿå›¾åƒåŒ–ç•Œé¢</span>
            <span class="post-date" title="2019-11-08 22:58:53">2019/11/08</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2019/10/23/Goè¯­è¨€/"
           data-tag="Goè¯­è¨€å…¥é—¨ç»å…¸"
           data-author="" >
            <span class="post-title" title="Goè¯­è¨€">Goè¯­è¨€</span>
            <span class="post-date" title="2019-10-23 21:07:25">2019/10/23</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/10/18/LiCheePi_Zeroåº•å±‚å¼€å‘/"
           data-tag="LiCheePi Zero"
           data-author="" >
            <span class="post-title" title="LiCheePi_Zeroåº•å±‚å¼€å‘">LiCheePi_Zeroåº•å±‚å¼€å‘</span>
            <span class="post-date" title="2019-10-18 12:25:42">2019/10/18</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/10/18/NanoPi_Neo_Coreåº•å±‚å¼€å‘/"
           data-tag="NanoPi Neo Core"
           data-author="" >
            <span class="post-title" title="NanoPi_Neo_Coreåº•å±‚å¼€å‘">NanoPi_Neo_Coreåº•å±‚å¼€å‘</span>
            <span class="post-date" title="2019-10-18 12:25:42">2019/10/18</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/10/13/è®¾å¤‡æ ‘/"
           data-tag="è®¾å¤‡æ ‘"
           data-author="" >
            <span class="post-title" title="è®¾å¤‡æ ‘">è®¾å¤‡æ ‘</span>
            <span class="post-date" title="2019-10-13 15:53:24">2019/10/13</span>
        </a>
        
        <a  class="All å·¥å…· "
           href="/2019/09/17/markdownlintè§„åˆ™è¯¦ç»†ä»‹ç»/"
           data-tag="markdownlint"
           data-author="" >
            <span class="post-title" title="VSCæ’ä»¶ä¹‹markdownlintè§„åˆ™è¯¦ç»†ä»‹ç»">VSCæ’ä»¶ä¹‹markdownlintè§„åˆ™è¯¦ç»†ä»‹ç»</span>
            <span class="post-date" title="2019-09-17 15:00:13">2019/09/17</span>
        </a>
        
        <a  class="All å·¥å…· "
           href="/2019/09/17/git/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="git">git</span>
            <span class="post-date" title="2019-09-17 09:59:56">2019/09/17</span>
        </a>
        
        <a  class="All å·¥å…· "
           href="/2019/08/19/Latexæ’ç‰ˆå…¨è§£/"
           data-tag="Latex,Ctex"
           data-author="" >
            <span class="post-title" title="Latexæ’ç‰ˆå…¨è§£">Latexæ’ç‰ˆå…¨è§£</span>
            <span class="post-date" title="2019-08-19 16:02:27">2019/08/19</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/15/Kconfigæ–‡ä»¶è¯­æ³•åˆ†æ/"
           data-tag="Kconfigè¯­æ³•"
           data-author="" >
            <span class="post-title" title="Kconfigæ–‡ä»¶è¯­æ³•åˆ†æ">Kconfigæ–‡ä»¶è¯­æ³•åˆ†æ</span>
            <span class="post-date" title="2019-08-15 19:38:40">2019/08/15</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/14/æ„é€ æ ¹æ–‡ä»¶ç³»ç»Ÿ/"
           data-tag="æ ¹æ–‡ä»¶ç³»ç»Ÿ"
           data-author="" >
            <span class="post-title" title="æ„é€ æ ¹æ–‡ä»¶ç³»ç»Ÿ">æ„é€ æ ¹æ–‡ä»¶ç³»ç»Ÿ</span>
            <span class="post-date" title="2019-08-14 20:18:45">2019/08/14</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/13/Linuxå†…æ ¸å¯åŠ¨æµç¨‹/"
           data-tag="Linuxå†…æ ¸"
           data-author="" >
            <span class="post-title" title="Linuxå†…æ ¸å¯åŠ¨æµç¨‹">Linuxå†…æ ¸å¯åŠ¨æµç¨‹</span>
            <span class="post-date" title="2019-08-13 16:13:46">2019/08/13</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/12/u-bootåˆ†æä¸ä½¿ç”¨/"
           data-tag="u-boot"
           data-author="" >
            <span class="post-title" title="u-bootåˆ†æä¸ä½¿ç”¨">u-bootåˆ†æä¸ä½¿ç”¨</span>
            <span class="post-date" title="2019-08-12 19:16:50">2019/08/12</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/12/u-bootåˆ†æä¸ä½¿ç”¨/u-bootåˆ†æä¸ä½¿ç”¨ - è€ç‰ˆæœ¬å¤‡ä»½/"
           data-tag="u-boot"
           data-author="" >
            <span class="post-title" title="u-bootåˆ†æä¸ä½¿ç”¨">u-bootåˆ†æä¸ä½¿ç”¨</span>
            <span class="post-date" title="2019-08-12 19:16:50">2019/08/12</span>
        </a>
        
        <a  class="All æ„Ÿæ‚Ÿä¸æ€»ç»“ "
           href="/2019/08/11/å„ç§å­˜å‚¨å™¨çš„åŒºåˆ«/"
           data-tag="å­˜å‚¨å™¨"
           data-author="" >
            <span class="post-title" title="å„ç§å­˜å‚¨å™¨çš„åŒºåˆ«">å„ç§å­˜å‚¨å™¨çš„åŒºåˆ«</span>
            <span class="post-date" title="2019-08-11 10:57:19">2019/08/11</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/07/RTCé©±åŠ¨åˆ†æ/"
           data-tag="å­—ç¬¦é©±åŠ¨"
           data-author="" >
            <span class="post-title" title="RTCé©±åŠ¨åˆ†æ">RTCé©±åŠ¨åˆ†æ</span>
            <span class="post-date" title="2019-08-07 13:37:33">2019/08/07</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/07/å­—ç¬¦é©±åŠ¨è®¾å¤‡çš„å¦ä¸€ç§å†™æ³•/"
           data-tag="å­—ç¬¦é©±åŠ¨"
           data-author="" >
            <span class="post-title" title="å­—ç¬¦é©±åŠ¨è®¾å¤‡çš„å¦ä¸€ç§å†™æ³•">å­—ç¬¦é©±åŠ¨è®¾å¤‡çš„å¦ä¸€ç§å†™æ³•</span>
            <span class="post-date" title="2019-08-07 12:20:30">2019/08/07</span>
        </a>
        
        <a  class="All æ„Ÿæ‚Ÿä¸æ€»ç»“ "
           href="/2019/08/06/äºŒç»´æ•°ç»„ä¸æŒ‡é’ˆçš„ä¸€äº›é—®é¢˜/"
           data-tag="äºŒç»´æ•°ç»„,æŒ‡é’ˆ"
           data-author="" >
            <span class="post-title" title="äºŒç»´æ•°ç»„ä¸æŒ‡é’ˆçš„ä¸€äº›é—®é¢˜">äºŒç»´æ•°ç»„ä¸æŒ‡é’ˆçš„ä¸€äº›é—®é¢˜</span>
            <span class="post-date" title="2019-08-06 13:11:26">2019/08/06</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/05/IICé©±åŠ¨/"
           data-tag="IICé©±åŠ¨"
           data-author="" >
            <span class="post-title" title="IICé©±åŠ¨">IICé©±åŠ¨</span>
            <span class="post-date" title="2019-08-05 14:39:10">2019/08/05</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/04/DM9000Cç½‘å¡ç§»æ¤/"
           data-tag="DM9000C,ç½‘å¡ç§»æ¤"
           data-author="" >
            <span class="post-title" title="DM9000Cç½‘å¡ç§»æ¤">DM9000Cç½‘å¡ç§»æ¤</span>
            <span class="post-date" title="2019-08-04 23:07:22">2019/08/04</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/04/ç½‘å¡é©±åŠ¨ç¨‹åº/"
           data-tag="ç½‘å¡é©±åŠ¨æ¡†æ¶,è™šæ‹Ÿç½‘å¡"
           data-author="" >
            <span class="post-title" title="ç½‘å¡é©±åŠ¨ç¨‹åº">ç½‘å¡é©±åŠ¨ç¨‹åº</span>
            <span class="post-date" title="2019-08-04 21:24:07">2019/08/04</span>
        </a>
        
        <a  class="All ç®—æ³• "
           href="/2019/07/29/å¿«é€Ÿæ’åº/"
           data-tag="å¿«é€Ÿæ’åº"
           data-author="" >
            <span class="post-title" title="å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº</span>
            <span class="post-date" title="2019-07-29 22:27:34">2019/07/29</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/07/25/è¾“å…¥å­ç³»ç»Ÿ/"
           data-tag="æŒ‰é”®é©±åŠ¨,è¾“å…¥å­ç³»ç»Ÿ"
           data-author="" >
            <span class="post-title" title="è¾“å…¥å­ç³»ç»Ÿ">è¾“å…¥å­ç³»ç»Ÿ</span>
            <span class="post-date" title="2019-07-25 00:05:15">2019/07/25</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/07/22/æŒ‰é”®é©±åŠ¨ï¼šå¼‚æ­¥é€šçŸ¥æœºåˆ¶/"
           data-tag="æŒ‰é”®é©±åŠ¨,å¼‚æ­¥é€šçŸ¥æœºåˆ¶"
           data-author="" >
            <span class="post-title" title="æŒ‰é”®é©±åŠ¨ï¼šå¼‚æ­¥é€šçŸ¥æœºåˆ¶">æŒ‰é”®é©±åŠ¨ï¼šå¼‚æ­¥é€šçŸ¥æœºåˆ¶</span>
            <span class="post-date" title="2019-07-22 19:04:24">2019/07/22</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/07/21/æŒ‰é”®é©±åŠ¨â€”â€”pollæœºåˆ¶/"
           data-tag="æŒ‰é”®é©±åŠ¨,pollæœºåˆ¶"
           data-author="" >
            <span class="post-title" title="æŒ‰é”®é©±åŠ¨â€”â€”pollæœºåˆ¶">æŒ‰é”®é©±åŠ¨â€”â€”pollæœºåˆ¶</span>
            <span class="post-date" title="2019-07-21 20:30:38">2019/07/21</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/07/21/linuxç­‰å¾…é˜Ÿåˆ—wait_queue_head_tå’Œwait_queue_t/"
           data-tag="ç­‰å¾…é˜Ÿåˆ—,wait_queue_head_t,wait_queue_t"
           data-author="" >
            <span class="post-title" title="linuxç­‰å¾…é˜Ÿåˆ—wait_queue_head_tå’Œwait_queue_t">linuxç­‰å¾…é˜Ÿåˆ—wait_queue_head_tå’Œwait_queue_t</span>
            <span class="post-date" title="2019-07-21 18:18:54">2019/07/21</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/07/21/Linuxç¼–ç¨‹--æ–‡ä»¶æè¿°ç¬¦fd/"
           data-tag="æ–‡ä»¶æè¿°ç¬¦"
           data-author="" >
            <span class="post-title" title="Linuxç¼–ç¨‹--æ–‡ä»¶æè¿°ç¬¦fd">Linuxç¼–ç¨‹--æ–‡ä»¶æè¿°ç¬¦fd</span>
            <span class="post-date" title="2019-07-21 10:13:47">2019/07/21</span>
        </a>
        
        <a  class="All å·¥å…· "
           href="/2019/07/12/Markdown è¯­æ³•æ•´ç†/"
           data-tag="Markdown"
           data-author="" >
            <span class="post-title" title="Markdown è¯­æ³•æ•´ç†">Markdown è¯­æ³•æ•´ç†</span>
            <span class="post-date" title="2019-07-12 13:57:24">2019/07/12</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-è¾“å…¥å­ç³»ç»Ÿ" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">è¾“å…¥å­ç³»ç»Ÿ</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="Linux">Linux</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color5">æŒ‰é”®é©±åŠ¨</a>
            
            <a class="color1">è¾“å…¥å­ç³»ç»Ÿ</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2019-09-18 13:51:06'>2019-07-25 00:05</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:5.9k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#è¾“å…¥å­ç³»ç»Ÿ"><span class="toc-text">è¾“å…¥å­ç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸€ã€ç³»ç»Ÿåˆ†æ"><span class="toc-text">ä¸€ã€ç³»ç»Ÿåˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-è¾“å…¥å­ç³»ç»Ÿç®€ä»‹"><span class="toc-text">1.è¾“å…¥å­ç³»ç»Ÿç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-è¾“å…¥å­ç³»ç»Ÿåˆå§‹åŒ–åˆ†æ"><span class="toc-text">2.è¾“å…¥å­ç³»ç»Ÿåˆå§‹åŒ–åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-input-open-fileå‡½æ•°åˆ†æ"><span class="toc-text">3.input_open_fileå‡½æ•°åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-input-table-æ•°ç»„çš„èµ‹å€¼"><span class="toc-text">4.input_table[]æ•°ç»„çš„èµ‹å€¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-input-register-handlerçš„è°ƒç”¨"><span class="toc-text">5.input_register_handlerçš„è°ƒç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-input-handlerç»“æ„ä½“åˆ†æ"><span class="toc-text">6.input_handlerç»“æ„ä½“åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-input-devå’Œinput-handleråŠå…¶ç›¸å…³å…³ç³»"><span class="toc-text">7.input_devå’Œinput_handleråŠå…¶ç›¸å…³å…³ç³»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1input-register-device-å‡½æ•°åˆ†æ"><span class="toc-text">7.1input_register_device()å‡½æ•°åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-input-register-handler-å‡½æ•°åˆ†æ"><span class="toc-text">7.2.input_register_handler()å‡½æ•°åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-input-attach-handler-å‡½æ•°åˆ†æ"><span class="toc-text">7.3.input_attach_handler()å‡½æ•°åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-è¿æ¥çš„å»ºç«‹"><span class="toc-text">8.è¿æ¥çš„å»ºç«‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-evdev-connect-å‡½æ•°åˆ†æ"><span class="toc-text">8.1.evdev_connect()å‡½æ•°åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-input-register-handle-å‡½æ•°åˆ†æ"><span class="toc-text">8.2.input_register_handle()å‡½æ•°åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-æŒ‰é”®è¯»å–åˆ†æ"><span class="toc-text">9.æŒ‰é”®è¯»å–åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-readå‡½æ•°çš„å”¤é†’"><span class="toc-text">10.readå‡½æ•°çš„å”¤é†’</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-evdev-event-çš„è°ƒç”¨"><span class="toc-text">11.evdev_event()çš„è°ƒç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-æ€»ç»“åˆ†æ"><span class="toc-text">12.æ€»ç»“åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#äºŒã€ç¨‹åºåˆ†æ"><span class="toc-text">äºŒã€ç¨‹åºåˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-å‡ ä¸ªå¸¸ç”¨ç»“æ„ä½“å’Œå‡½æ•°"><span class="toc-text">1.å‡ ä¸ªå¸¸ç”¨ç»“æ„ä½“å’Œå‡½æ•°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ä»£ç åˆ†æ"><span class="toc-text">2.ä»£ç åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-æµ‹è¯•è¿è¡Œ"><span class="toc-text">3.æµ‹è¯•è¿è¡Œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1æµ‹è¯•è¿è¡Œæœ‰ä¸¤ç§-ä¸€ç§æ˜¯ç›´æ¥æ‰“å¼€-dev-tyy1-ç¬¬äºŒç§æ˜¯ä½¿ç”¨execå‘½ä»¤"><span class="toc-text">3.1æµ‹è¯•è¿è¡Œæœ‰ä¸¤ç§,ä¸€ç§æ˜¯ç›´æ¥æ‰“å¼€/dev/tyy1,ç¬¬äºŒç§æ˜¯ä½¿ç”¨execå‘½ä»¤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-è°ƒè¯•"><span class="toc-text">3.2 è°ƒè¯•</span></a></li></ol></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-6 i,
    .toc-level-6 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="è¾“å…¥å­ç³»ç»Ÿ"><a href="#è¾“å…¥å­ç³»ç»Ÿ" class="headerlink" title="è¾“å…¥å­ç³»ç»Ÿ"></a>è¾“å…¥å­ç³»ç»Ÿ</h1><h2 id="ä¸€ã€ç³»ç»Ÿåˆ†æ"><a href="#ä¸€ã€ç³»ç»Ÿåˆ†æ" class="headerlink" title="ä¸€ã€ç³»ç»Ÿåˆ†æ"></a>ä¸€ã€ç³»ç»Ÿåˆ†æ</h2><h3 id="1-è¾“å…¥å­ç³»ç»Ÿç®€ä»‹"><a href="#1-è¾“å…¥å­ç³»ç»Ÿç®€ä»‹" class="headerlink" title="1.è¾“å…¥å­ç³»ç»Ÿç®€ä»‹"></a>1.è¾“å…¥å­ç³»ç»Ÿç®€ä»‹</h3><p>åŒæ ·çš„è¾“å…¥å­ç³»ç»Ÿä¹Ÿéœ€è¦è¾“å…¥é©±åŠ¨çš„æ¡†æ¶,å¥½æ¥è¾¨è®¤åº”ç”¨ç¨‹åºè¦æ‰“å¼€çš„æ˜¯å“ªä¸ªè¾“å…¥é©±åŠ¨</p>
<p>æ¯”å¦‚: é¼ æ ‡ã€é”®ç›˜ã€æ¸¸æˆæ‰‹æŸ„ç­‰ç­‰è¿™äº›éƒ½å±äºè¾“å…¥è®¾å¤‡ï¼›è¿™äº›è¾“å…¥è®¾å¤‡çš„é©±åŠ¨éƒ½æ˜¯é€šè¿‡è¾“å…¥å­ç³»ç»Ÿæ¥å®ç°çš„ï¼ˆå½“ç„¶ï¼Œè¿™äº›è®¾å¤‡ä¹Ÿä¾èµ–äºusbå­ç³»ç»Ÿï¼‰</p>
<p>è¿™äº›è¾“å…¥è®¾å¤‡éƒ½å„æœ‰ä¸åŒï¼Œé‚£ä¹ˆè¾“å…¥å­ç³»ç»Ÿä¹Ÿå°±åªèƒ½å®ç°ä»–ä»¬çš„å…±æ€§ï¼Œå·®å¼‚æ€§åˆ™ç”±è®¾å¤‡é©±åŠ¨æ¥å®ç°ã€‚å·®å¼‚æ€§åˆä½“ç°åœ¨å“ªé‡Œï¼Ÿ</p>
<p>æœ€ç›´è§‚çš„å°±è¡¨ç°åœ¨è¿™äº›è®¾å¤‡åŠŸèƒ½ä¸Šçš„ä¸åŒäº†ã€‚å¯¹äºæˆ‘ä»¬å†™é©±åŠ¨çš„äººæ¥è¯´åœ¨è®¾å¤‡é©±åŠ¨ä¸­å°±åªè¦ä½¿ç”¨è¾“å…¥å­ç³»ç»Ÿæä¾›çš„å·¥å…·ï¼ˆä¹Ÿå°±æ˜¯å‡½æ•°ï¼‰æ¥å®Œæˆè¿™äº›â€œå·®å¼‚â€å°±è¡Œäº†ï¼Œå…¶ä»–çš„åˆ™æ˜¯è¾“å…¥å­ç³»ç»Ÿçš„å·¥ä½œã€‚è¿™ä¸ªæ€æƒ³ä¸ä»…å­˜åœ¨äºè¾“å…¥å­ç³»ç»Ÿï¼Œå…¶ä»–å­ç³»ç»Ÿä¹Ÿæ˜¯ä¸€æ ·(æ¯”å¦‚:usbå­ç³»ç»Ÿã€videoå­ç³»ç»Ÿç­‰)</p>
<p>æ‰€ä»¥æˆ‘ä»¬å…ˆæ¥åˆ†æä¸‹è¾“å…¥å­ç³»ç»Ÿ<strong>input.c</strong>çš„ä»£ç ,ç„¶åæ€ä¹ˆæ¥ä½¿ç”¨è¾“å…¥å­ç³»ç»Ÿ(åœ¨å†…æ ¸ä¸­ä»¥inputæ¥å½¢å®¹è¾“å…¥å­ç³»ç»Ÿ)</p>
<h3 id="2-è¾“å…¥å­ç³»ç»Ÿåˆå§‹åŒ–åˆ†æ"><a href="#2-è¾“å…¥å­ç³»ç»Ÿåˆå§‹åŒ–åˆ†æ" class="headerlink" title="2.è¾“å…¥å­ç³»ç»Ÿåˆå§‹åŒ–åˆ†æ"></a>2.è¾“å…¥å­ç³»ç»Ÿåˆå§‹åŒ–åˆ†æ</h3><p>æ‰“å¼€input.c,ä½äºå†…æ ¸deivers/inputï¼Œæœ‰ä»¥ä¸‹è¿™ä¹ˆä¸¤æ®µ:</p>
<pre><code class="c">subsys_initcall(input_init);   //ä¿®é¥°å…¥å£å‡½æ•°
module_exit(input_exit);     //ä¿®é¥°å‡ºå£å‡½æ•°</code></pre>
<p>æ˜¾ç„¶è¾“å…¥å­ç³»ç»Ÿæ˜¯ä½œä¸ºä¸€ä¸ªæ¨¡å—å­˜åœ¨,æˆ‘ä»¬å…ˆæ¥åˆ†æä¸‹input_int()å…¥å£å‡½æ•°</p>
<pre><code class="c">static int __init input_init(void)
{
       int err;
       err = class_register(&amp;input_class);   //(1)åœ¨/sys/class é‡Œåˆ›å»ºä¸€ä¸ª inputç±»
       if (err) {
              printk(KERN_ERR &quot;input: unable to register input_dev class\n&quot;);
              return err;
       }

       err = input_proc_init();    //åœ¨/procä¸‹é¢å»ºç«‹ç›¸å…³çš„æ–‡ä»¶
       if (err)
              goto fail1;

       err = register_chrdev(INPUT_MAJOR, &quot;input&quot;, &amp;input_fops); //(2)æ³¨å†Œé©±åŠ¨
       if (err) {
              printk(KERN_ERR &quot;input: unable to register char major %d&quot;, INPUT_MAJOR);
              goto fail2;
       }

       return 0;

 fail2:
    input_proc_exit();

 fail1:
    class_unregister(&amp;input_class);

       return err;
}</code></pre>
<ul>
<li><p>(1)è¿™é‡Œçš„input_classå˜é‡å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="c">  struct class input_class={
      .name        = &quot;input&quot;,
      .release    = input_dev_release,
      .uevent        = input_dev_uevent,
  }</code></pre>
<p>  å½“å¯åŠ¨ä¸€ä¸ªinputå­ç³»ç»Ÿçš„é©±åŠ¨åï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤çœ‹åˆ°åˆ›å»ºäº†ä¸ªâ€inputâ€ç±» :</p>
<pre><code class="bash">  # ls /sys/class/
  graphics     misc
  hwmon         mmc_host
  i2c-adapter mtd
  input         net
  mem         ppdev
  #</code></pre>
<p>  ä¸ºä»€ä¹ˆè¿™é‡Œä»£ç åªåˆ›å»ºç±»ï¼Œæ²¡æœ‰ä½¿ç”¨class_device_create()å‡½æ•°åœ¨ç±»ä¸‹é¢åˆ›å»ºé©±åŠ¨è®¾å¤‡ï¼Ÿ</p>
<p>  åœ¨ä¸‹é¢ç¬¬8å°ç»“ä¼šè¯¦ç»†è®²åˆ°,è¿™é‡Œç®€å•æè¿°:å½“æ³¨å†Œinputå­ç³»ç»Ÿçš„é©±åŠ¨åï¼Œæ‰ä¼šæœ‰é©±åŠ¨è®¾å¤‡ï¼Œæ­¤æ—¶è¿™é‡Œçš„ä»£ç æ˜¯æ²¡æœ‰é©±åŠ¨çš„</p>
</li>
<li><p>(2)è¿™é‡Œé€šè¿‡register_chrdevåˆ›å»ºé©±åŠ¨è®¾å¤‡,å…¶ä¸­å®INPUT_MAJOR =13,æ‰€ä»¥åˆ›å»ºäº†ä¸€ä¸ªä¸»è®¾å¤‡ä¸º13çš„â€inputâ€è®¾å¤‡ã€‚</p>
<p>   ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„æ“ä½œç»“æ„ä½“input_fops,å¦‚ä¸‹:</p>
<pre><code class="c">  static const struct file_operations input_fops={
      .owner    =THIS_MODULE,
      .open    =input_open_file,
  };</code></pre>
<p>  åªæœ‰ä¸€ä¸ª.openå‡½æ•°,æ¯”å¦‚å½“æˆ‘ä»¬æŒ‚è½½ä¸€ä¸ªæ–°çš„inputé©±åŠ¨,åˆ™å†…æ ¸ä¾¿ä¼šè°ƒç”¨è¯¥.openå‡½æ•°ï¼Œå…¶ä»–ä¸€äº›å·¥ä½œè‚¯å®šæ˜¯åœ¨è¿™ä¸ªå‡½æ•°ä¸­å¤„ç†çš„,æ¥ä¸‹æ¥åˆ†æè¯¥.openå‡½æ•°</p>
</li>
</ul>
<h3 id="3-input-open-fileå‡½æ•°åˆ†æ"><a href="#3-input-open-fileå‡½æ•°åˆ†æ" class="headerlink" title="3.input_open_fileå‡½æ•°åˆ†æ"></a>3.input_open_fileå‡½æ•°åˆ†æ</h3><p>ç„¶åè¿›å…¥input_open_fileå‡½æ•°(drivers/input/input.c)ï¼š</p>
<pre><code class="c">static int input_open_file(struct inode *inode, struct file *file)
 {
    struct input_handler *handler = input_table[iminor(inode) &gt;&gt; 5]; // (1)
    const struct file_operations *old_fops, *new_fops = NULL;
    int err;

    if (!handler || !(new_fops = fops_get(handler-&gt;fops)))  //(2)
        return -ENODEV;

    if (!new_fops-&gt;open) {
        fops_put(new_fops);
        return -ENODEV;
    }

    old_fops = file-&gt;f_op;
    file-&gt;f_op = new_fops;     //(3)

    err = new_fops-&gt;open(inode, file);   //(4)
    if (err) {
        fops_put(file-&gt;f_op);
        file-&gt;f_op = fops_get(old_fops);
    }

    fops_put(old_fops);

    return err;
}</code></pre>
<ul>
<li>ï¼ˆ1ï¼‰è¿™é‡Œiminor (inode)å‡½æ•°è°ƒç”¨äº†MINOR(inode-&gt;i_rdev);è¯»å–æ‰“å¼€æ–‡ä»¶ï¼ˆinputè®¾å¤‡ï¼‰çš„å­è®¾å¤‡å·,ç„¶åå°†å­è®¾å¤‡é™¤ä»¥32,æ‰¾åˆ°<strong>æ–°æŒ‚è½½çš„inputé©±åŠ¨</strong>çš„æ•°ç»„å·,ç„¶åæ”¾åœ¨input_handler *ç±»å‹çš„handlerä¸­</li>
<li>ï¼ˆ2ï¼‰è‹¥handleræœ‰å€¼,è¯´æ˜æŒ‚è½½æœ‰è¿™ä¸ªé©±åŠ¨,åˆ©ç”¨fops_get()å°†handlerç»“æ„ä½“é‡Œçš„æˆå‘˜file_operations *fopså–å‡ºèµ‹åˆ°æ–°çš„file_operations *new_fopsé‡Œé¢ï¼Œå³æ­¤æ—¶new_fopsæŒ‡å‘äº†<strong>æ–°æŒ‚è½½çš„inputé©±åŠ¨</strong>çš„æ“ä½œå‡½æ•°</li>
<li>ï¼ˆ3ï¼‰å†å°†æ–°çš„file_operations <em>new_fopsèµ‹åˆ°file-&gt;file_operations  <em>f_opé‡Œ, æ­¤æ—¶inputå­ç³»ç»Ÿçš„file_operationså°±ç­‰äº</em></em>æ–°æŒ‚è½½çš„inputé©±åŠ¨<strong>çš„file_operationsç»“æ„ä½“,å®ç°ä¸€ä¸ª</strong>å·å¤©æ¢æ—¥çš„æ•ˆæœ.**</li>
<li>ï¼ˆ4ï¼‰ç„¶åè°ƒç”¨<strong>æ–°æŒ‚è½½çš„inputé©±åŠ¨</strong>çš„*new_fopsé‡Œé¢çš„æˆå‘˜.openå‡½æ•°</li>
</ul>
<h3 id="4-input-table-æ•°ç»„çš„èµ‹å€¼"><a href="#4-input-table-æ•°ç»„çš„èµ‹å€¼" class="headerlink" title="4.input_table[]æ•°ç»„çš„èµ‹å€¼"></a>4.input_table[]æ•°ç»„çš„èµ‹å€¼</h3><p>ä¸Šé¢ä»£ç çš„input_table[]æ•°ç»„åœ¨åˆå§‹æ—¶æ˜¯æ²¡æœ‰å€¼çš„,æ‰€ä»¥éœ€è¦æ‰¾åˆ°ä»–åœ¨é‚£é‡Œè¢«èµ‹å€¼</p>
<p>åœ¨input.cå‡½æ•°(drivers/input/input.c)ä¸­æœç´¢input_table,æ‰¾åˆ°å®ƒåœ¨input_register_handler()å‡½æ•°ä¸­è¢«èµ‹å€¼,ä»£ç å¦‚ä¸‹:</p>
<pre><code class="c">int input_register_handler(struct input_handler *handler)
{
    ... ...
        input_table[handler-&gt;minor &gt;&gt; 5] = handler;   //input_table[]è¢«èµ‹å€¼
    ... ...
        list_add_tail(&amp;handler-&gt;node, &amp;input_handler_list); //å°†è¿™ä¸ªinput_handleræ”¾åˆ°input_handler_listé“¾è¡¨ä¸­  
    ... ...
}</code></pre>
<p>è¿™é‡Œå°±æ˜¯å°†input_handler *ç±»å‹çš„å˜é‡handleræ³¨å†Œåˆ°input_table[]ä¸­ï¼Œç„¶åå°†handleræ’å…¥input_handler_listé“¾è¡¨ä¸­,åé¢ç¬¬7.1ä¼šè®²è¿™ä¸ªé“¾è¡¨</p>
<h3 id="5-input-register-handlerçš„è°ƒç”¨"><a href="#5-input-register-handlerçš„è°ƒç”¨" class="headerlink" title="5.input_register_handlerçš„è°ƒç”¨"></a>5.input_register_handlerçš„è°ƒç”¨</h3><p>ç»§ç»­æ¥æœç´¢input_register_handler,çœ‹çœ‹è¿™ä¸ªå‡½æ•°è¢«è°æ¥è°ƒç”¨</p>
<p>é€šè¿‡æœç´¢å¯ä»¥æŸ¥åˆ°,æœ‰evdev.c(äº‹ä»¶è®¾å¤‡)ï¼Œtsdev.c(è§¦æ‘¸å±è®¾å¤‡)ï¼Œjoydev.c(joystickæ“ä½œæ†è®¾å¤‡)ï¼Œkeyboard.c(é”®ç›˜è®¾å¤‡)ï¼Œmousedev.c(é¼ æ ‡è®¾å¤‡) ç­‰å„ç§è®¾å¤‡è°ƒç”¨äº†è¯¥å‡½æ•°</p>
<p>å¤§è‡´å¯ä»¥æ¨æ–­ï¼Œä»¥ä¸Šå„ç§è®¾å¤‡é€šè¿‡input_register_handlerå‡½æ•°å‘input.cæ³¨å†Œ</p>
<p>è¿™é‡Œä»¥evdev.c(äº‹ä»¶è®¾å¤‡)ä¸¾ä¾‹ï¼Œé€šè¿‡å¦‚ä¸‹å‡½æ•°å‘input.cæ³¨å†Œ</p>
<pre><code class="c">static int __init evdev_init(void)
{
    return input_register_handler(&amp;evdev_handler)
}</code></pre>
<h3 id="6-input-handlerç»“æ„ä½“åˆ†æ"><a href="#6-input-handlerç»“æ„ä½“åˆ†æ" class="headerlink" title="6.input_handlerç»“æ„ä½“åˆ†æ"></a>6.input_handlerç»“æ„ä½“åˆ†æ</h3><p>æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªevdev_handlerå˜é‡æ˜¯ä»€ä¹ˆç»“æ„ä½“</p>
<pre><code class="c">static struct input_handler evdev_handler = {
       .event         = evdev_event,
       .connect     = evdev_connect,  //(4)
       .disconnect     = evdev_disconnect,
       .fops         = &amp;evdev_fops,    //(1)
       .minor         = EVDEV_MINOR_BASE, //(2)
       .name         = &quot;evdev&quot;,
       .id_table     = evdev_ids, //(3)
};</code></pre>
<ul>
<li><p>ï¼ˆ1ï¼‰<strong>.fops:</strong>æ–‡ä»¶æ“ä½œç»“æ„ä½“,å…¶ä¸­evdev_fopsä¸ºfile_operationsç»“æ„ä½“ï¼Œå°±æ˜¯è‡ªå·±çš„å†™çš„æ“ä½œå‡½æ•°,ç„¶åèµ‹åˆ°.fopsä¸­</p>
</li>
<li><p>ï¼ˆ2ï¼‰<strong>.minor:</strong>ç”¨æ¥å­˜æ”¾æ¬¡è®¾å¤‡å·ï¼Œå…¶ä¸­EVDEV_MINOR_BASE=64, è¿™é‡Œè°ƒç”¨input_register_handler(&amp;evdev_handler)å,ç”±äºEVDEV_MINOR_BASE/32=2,æ‰€ä»¥æœ€ç»ˆä¼šå°†evdev_handlerå­˜åˆ°input_table[2]ä¸­</p>
<p>  å‡è®¾å½“openæ‰“å¼€è¿™ä¸ªinputè®¾å¤‡æ—¶ï¼Œå°±ä¼šè¿›å…¥ input_open_file()å‡½æ•°,æ‰§è¡Œevdev_handler-&gt; evdev_fops -&gt; .openå‡½æ•°,å¦‚ä¸‹æ‰€ç¤ºä¸ºevdev_fopsç»“æ„ä½“çš„å†…å®¹</p>
<pre><code class="c">  static const struct flle_operations evdev_fops={
      .owner            =THIS MODULE,
      .read            =evdev_read,
      .write            =evdev_write,
      .poll            =evdeV_poll,
      .open            =evdev_open,
      .release        =evdev_release,
      .unlocked_ioctl    =evdev_ioctl,
  #ifdef CONFIG_COMPAT
      .compat_ioctl    =evdev_ioctl_compat,
  #endif
      .fasync            =evdev_fasync,
      .flush            =evdev_flush
  };</code></pre>
<p>  æ•…æœ€ç»ˆä¼šè°ƒç”¨åˆ°evdev_openå‡½æ•°</p>
</li>
<li><p>ï¼ˆ3ï¼‰<strong>.id_table :</strong> è¡¨ç¤ºèƒ½æ”¯æŒå“ªäº›è¾“å…¥è®¾å¤‡ï¼Œæ¯”å¦‚æŸä¸ªé©±åŠ¨è®¾å¤‡çš„input_dev-&gt;çš„idå’ŒæŸä¸ªinput_handlerçš„id_tableç›¸åŒ¹é…ï¼Œå°±ä¼šè°ƒç”¨.connectè¿æ¥å‡½æ•°,å¦‚ä¸‹å›¾</p>
</li>
<li><p>ï¼ˆ4ï¼‰<strong>.connect:</strong> è¿æ¥å‡½æ•°ï¼Œå°†è®¾å¤‡input_devå’ŒæŸä¸ªinput_handlerå»ºç«‹è¿æ¥,å¦‚ä¸‹å›¾</p>
<p>  <img src="//NU-LL.github.io/2019/07/25/è¾“å…¥å­ç³»ç»Ÿ/1182576-20170918125805775-128197571.png" alt="img"></p>
</li>
</ul>
<h3 id="7-input-devå’Œinput-handleråŠå…¶ç›¸å…³å…³ç³»"><a href="#7-input-devå’Œinput-handleråŠå…¶ç›¸å…³å…³ç³»" class="headerlink" title="7.input_devå’Œinput_handleråŠå…¶ç›¸å…³å…³ç³»"></a>7.input_devå’Œinput_handleråŠå…¶ç›¸å…³å…³ç³»</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸Šå›¾çš„input_register_device()å‡½æ•°,è°è´Ÿè´£è°ƒç”¨ä»–</p>
<p>æœç´¢input_register_device,å‘ç°å†…æ ¸è‡ªå·±å°±å·²ç»æ³¨å†Œäº†å¾ˆå¤šé©±åŠ¨è®¾å¤‡</p>
<h4 id="7-1input-register-device-å‡½æ•°åˆ†æ"><a href="#7-1input-register-device-å‡½æ•°åˆ†æ" class="headerlink" title="7.1input_register_device()å‡½æ•°åˆ†æ"></a>7.1input_register_device()å‡½æ•°åˆ†æ</h4><p>è¿›å…¥input_register_device()å‡½æ•°,ä»£ç å¦‚ä¸‹:</p>
<pre><code class="c">int input_register_device(struct input_dev *dev)   //*dev:è¦æ³¨å†Œçš„é©±åŠ¨è®¾å¤‡
{
    ... ...
        list_add_tail(&amp;dev-&gt;node, &amp;input_dev_list);   //(1)å°†é©±åŠ¨è®¾å¤‡æ”¾å…¥input_dev_listé“¾è¡¨ä¸­
    ... ...
        list_for_each_entry(handler, &amp;input_handler_list, node)  //(2)
            input_attach_handler(dev, handler); //(3)
    ... ...
}</code></pre>
<ul>
<li>ï¼ˆ1ï¼‰å°†è¦æ³¨å†Œçš„input_devç±»å‹çš„é©±åŠ¨è®¾å¤‡æ”¾åœ¨input_dev_listé“¾è¡¨ä¸­</li>
<li>ï¼ˆ2ï¼‰å…¶ä¸­input_handler_liståœ¨å‰é¢ç¬¬4ç‚¹è®²è¿‡ï¼ˆä¸‹é¢ä¼šå†è®²ï¼‰,å°±æ˜¯å­˜æ”¾æ¯ä¸ªinput_handleç»“æ„ä½“çš„é“¾è¡¨,ç„¶ålist_for_each_entry()å‡½æ•°ä¼šå°†æ¯ä¸ªinput_handleä»é“¾è¡¨ä¸­å–å‡ºï¼Œæ”¾åˆ°handlerä¸­ï¼Œå¹¶è°ƒç”¨ä¸€æ¬¡input_attach_handler</li>
<li>ï¼ˆ3ï¼‰æ ¹æ®è¦æ³¨å†Œçš„é©±åŠ¨è®¾å¤‡å’Œæ¯ä¸ªinput_handleç±»å‹çš„handlerçš„id_tableè¿›è¡Œåˆ¤æ–­ï¼Œèƒ½å¦æ”¯æŒè¿™ä¸ªinput_devç±»å‹çš„é©±åŠ¨è®¾å¤‡ï¼Œè‹¥ä¸¤è€…æ”¯æŒä¾¿è¿›è¡Œè¿æ¥ã€‚</li>
</ul>
<h4 id="7-2-input-register-handler-å‡½æ•°åˆ†æ"><a href="#7-2-input-register-handler-å‡½æ•°åˆ†æ" class="headerlink" title="7.2.input_register_handler()å‡½æ•°åˆ†æ"></a>7.2.input_register_handler()å‡½æ•°åˆ†æ</h4><p>ç„¶åæˆ‘ä»¬åœ¨å›è¿‡å¤´æ¥çœ‹æ³¨å†Œinput_handlerçš„input_register_handler()å‡½æ•°ï¼Œæœ‰ï¼š</p>
<pre><code class="c">int input_register_handler(struct input_handler *handler)
{
    ... ...
        input_table[handler-&gt;minor &gt;&gt; 5] = handler;   //(1)input_table[]è¢«èµ‹å€¼
    ... ...
        list_add_tail(&amp;handler-&gt;node, &amp;input_handler_list); //(2)å°†è¿™ä¸ªinput_handleræ”¾åˆ°input_handler_listé“¾è¡¨ä¸­
        list_for_each_entry(dev,&amp;input_dev_list,node)//(3)
            input_attach_handler(dev,handler);//(4)
    ... ...
}</code></pre>
<ul>
<li>ï¼ˆ1ï¼‰å°†input_handler *ç±»å‹çš„å˜é‡handleræ”¾å…¥æ•°ç»„input_table[]ä¸­</li>
<li>ï¼ˆ2ï¼‰å°†input_handler *ç±»å‹çš„å˜é‡handleræ’å…¥input_handler_listé“¾è¡¨ä¸­</li>
<li>ï¼ˆ3ï¼‰list_for_each_entry()å‡½æ•°ä¼šå°†æ¯ä¸ªinput_devä»é“¾è¡¨input_dev_listä¸­å–å‡ºï¼Œæ”¾åˆ°devä¸­ï¼Œå¹¶è°ƒç”¨ä¸€æ¬¡input_attach_handler</li>
<li>ï¼ˆ4ï¼‰æ ¹æ®è¦æ³¨å†Œçš„input_handlerç±»å‹çš„handlerçš„id_tableå’Œæ¯ä¸ªinput_devç±»å‹çš„devè¿›è¡Œåˆ¤æ–­ï¼Œèƒ½å¦æ”¯æŒè¿™ä¸ªinput_devç±»å‹çš„é©±åŠ¨è®¾å¤‡ï¼Œè‹¥ä¸¤è€…æ”¯æŒä¾¿è¿›è¡Œè¿æ¥ã€‚</li>
</ul>
<p>æ‰€ä»¥,ä¸ç®¡æ–°æ·»åŠ input_devè¿˜æ˜¯input_handler,éƒ½ä¼šè¿›å…¥<strong>input_attach_handler()</strong>åˆ¤æ–­ä¸¤è€…idæ˜¯å¦åŒ¹é…, è‹¥ä¸¤è€…åŒ¹é…ä¾¿è¿›è¡Œè¿æ¥ã€‚</p>
<h4 id="7-3-input-attach-handler-å‡½æ•°åˆ†æ"><a href="#7-3-input-attach-handler-å‡½æ•°åˆ†æ" class="headerlink" title="7.3.input_attach_handler()å‡½æ•°åˆ†æ"></a>7.3.input_attach_handler()å‡½æ•°åˆ†æ</h4><p>æˆ‘ä»¬æ¥çœ‹çœ‹input_attach_handler()å¦‚ä½•å®ç°åŒ¹é…ä¸¤è€…idçš„</p>
<pre><code class="c">static int input_attach_handler(struct input_dev *dev, struct input_handler *handler)
{
    ... ...
        id = input_match_device(handler-&gt;id_table, dev);  //æ ¹æ®handlerçš„id_tableå’Œdevè¿›è¡ŒåŒ¹é…

    if (!id)                                     //è‹¥ä¸åŒ¹é…,returné€€å‡º
        return -ENODEV;

    error = handler-&gt;connect(handler, dev, id);  //è‹¥åŒ¹é…,è°ƒç”¨handlerçš„connectå‡½æ•°å»ºç«‹è¿æ¥
    ... ...
}</code></pre>
<p>è‹¥ä¸¤è€…åŒ¹é…æˆåŠŸï¼Œå°±ä¼šè‡ªåŠ¨è¿›å…¥input_handlerç±»å‹å˜é‡handlerçš„connectå‡½æ•°å»ºç«‹è¿æ¥</p>
<h3 id="8-è¿æ¥çš„å»ºç«‹"><a href="#8-è¿æ¥çš„å»ºç«‹" class="headerlink" title="8.è¿æ¥çš„å»ºç«‹"></a>8.è¿æ¥çš„å»ºç«‹</h3><p>æˆ‘ä»¬è¿˜æ˜¯ä»¥evdev.c(äº‹ä»¶é©±åŠ¨) çš„evdev_handler-&gt;connectå‡½æ•°æ¥åˆ†ææ˜¯æ€æ ·å»ºç«‹è¿æ¥çš„ã€‚</p>
<p>é¦–å…ˆæ ¹æ®evdev.cä¸­çš„input_handlerç±»å‹å˜é‡evdev_handleråˆ†æï¼Œæœ‰ï¼š</p>
<pre><code class="c">static struct input_handler evdev_handler={
    .event=evdev_event,
    .connect=evdev_connect,
    .disConnect=evdev_disconnect,
    .fops=&amp; evdev_fops,
    .minor=EVDEV_MINOR_BASE,
    .name=&quot;evdev&quot;,
    .id_table=evdev_ids,
};</code></pre>
<h4 id="8-1-evdev-connect-å‡½æ•°åˆ†æ"><a href="#8-1-evdev-connect-å‡½æ•°åˆ†æ" class="headerlink" title="8.1.evdev_connect()å‡½æ•°åˆ†æ"></a>8.1.evdev_connect()å‡½æ•°åˆ†æ</h4><p>evdev_handlerçš„.connectå‡½æ•°æ˜¯evdev_connect(),ä»£ç å¦‚ä¸‹:</p>
<pre><code class="c">static int evdev_connect(struct input_handler *handler, struct input_dev *dev, const struct input_device_id *id)
{
    ... ...
    for (minor = 0; minor &lt; EVDEV_MINORS &amp;&amp; evdev_table[minor]; minor++); //æŸ¥æ‰¾é©±åŠ¨è®¾å¤‡çš„å­è®¾å¤‡å·
    if (minor == EVDEV_MINORS) {  // EVDEV_MINORS=32,æ‰€ä»¥è¯¥äº‹ä»¶ä¸‹çš„é©±åŠ¨è®¾å¤‡æœ€å¤šå­˜32ä¸ª,
        printk(KERN_ERR &quot;evdev: no more free evdev devices\n&quot;);
        return -ENFILE;                //æ²¡æ‰¾åˆ°é©±åŠ¨è®¾å¤‡
    }
    ... ...
    evdev = kzalloc(sizeof(struct evdev), GFP_KERNEL);   //struct evdevç»“æ„ä½“ä¸­åŒ…å«input_handleï¼Œè¿™é‡Œä¸»è¦æ˜¯åˆ†é…ä¸€ä¸ªinput_handleå…¨å±€ç»“æ„ä½“(æ²¡æœ‰r)
    ... ...
    evdev-&gt;exist = 1;
    evdev-&gt;minor = minor;
    evdev-&gt;handle.dev = dev;              //æŒ‡å‘input_devé©±åŠ¨è®¾å¤‡
    evdev-&gt;handle.name = evdev-&gt;name;
    evdev-&gt;handle.handler = handler;    //æŒ‡å‘input_handleré©±åŠ¨å¤„ç†ç»“æ„ä½“
    evdev-&gt;handle.private = evdev;
    sprintf(evdev-&gt;name, &quot;event%d&quot;, minor);    //(1)ä¿å­˜é©±åŠ¨è®¾å¤‡åå­—, event%d
    ... ...
    devt = MKDEV(INPUT_MAJOR, EVDEV_MINOR_BASE + minor),  //(2) å°†ä¸»è®¾å¤‡å·å’Œæ¬¡è®¾å¤‡å·è½¬æ¢æˆdev_tç±»å‹
    cdev = class_device_create(&amp;input_class, &amp;dev-&gt;cdev, devt,dev-&gt;cdev.dev, evdev-&gt;name); // (3)åœ¨inputç±»ä¸‹åˆ›å»ºé©±åŠ¨è®¾å¤‡

    ... ...
    error = input_register_handle(&amp;evdev-&gt;handle); //(4)æ³¨å†Œè¿™ä¸ªinput_handleç»“æ„ä½“
    ... ...
}</code></pre>
<ul>
<li><p>ï¼ˆ1ï¼‰ä¿å­˜é©±åŠ¨è®¾å¤‡åå­—,åä¸ºevent%d, æ¯”å¦‚ä¸‹é¢(é”®ç›˜é©±åŠ¨)event1: å› ä¸ºæ²¡æœ‰è®¾ç½®å­è®¾å¤‡å·ï¼Œé»˜è®¤ä»å°åˆ°å¤§æ’åˆ—,å…¶ä¸­event0æ˜¯è¡¨ç¤ºè¿™ä¸ªinputå­ç³»ç»Ÿ,æ‰€ä»¥è¿™ä¸ªé”®ç›˜é©±åŠ¨åå­—å°±æ˜¯event1</p>
</li>
<li><p>ï¼ˆ2ï¼‰æ˜¯åœ¨ä¿å­˜é©±åŠ¨è®¾å¤‡çš„ä¸»æ¬¡è®¾å¤‡å·,å…¶ä¸­ä¸»è®¾å¤‡å·INPUT_MAJOR=13,å› ä¸ºEVDEV_MINOR_BASE=64,æ‰€ä»¥æ­¤è®¾å¤‡å·=64+é©±åŠ¨ç¨‹åºæœ¬äº‹å­è®¾å¤‡å·, æ¯”å¦‚ä¸‹å›¾(é”®ç›˜é©±åŠ¨)event1:  ä¸»æ¬¡è®¾å¤‡å·å°±æ˜¯13,65</p>
</li>
<li><p>ï¼ˆ3ï¼‰åœ¨ä¹‹å‰åœ¨ç¬¬2ç‚¹ä¸­å°±åˆ†æäº†input_classç±»ç»“æ„ï¼Œæ‰€ä»¥è¯¥å¤„ä¼šåœ¨/sys/class/inputç±»ä¸‹åˆ›å»ºé©±åŠ¨è®¾å¤‡event%dï¼Œæ¯”å¦‚ä¸‹å›¾(é”®ç›˜é©±åŠ¨)event1:</p>
<pre><code class="shell">  # ls -l /dev/event*
  crw-rw----    1 0      0       13, 64 Jan  1 00:00 /dev/event0(inputå­ç³»ç»Ÿè‡ªå¸¦çš„é©±åŠ¨è®¾å¤‡)
  crw-rw----    1 0      0       13, 65 Jan  1 01:02 /dev/event1(åæ¥å®‰è£…çš„é”®ç›˜é©±åŠ¨è®¾å¤‡)
  # ls /sys/class/input/
  event0 event1 input0 input1 mice mouse0 ts0
           |
           V
  é”®ç›˜ä¸input_handleråœ¨è¿æ¥å‡½æ•°é‡Œåˆ›å»ºçš„é©±åŠ¨è®¾å¤‡</code></pre>
</li>
<li><p>ï¼ˆ4ï¼‰æœ€ç»ˆä¼šè¿›å…¥input_register_handle()å‡½æ•°æ¥æ³¨å†Œ,ä»£ç åœ¨ä¸‹é¢</p>
</li>
</ul>
<h4 id="8-2-input-register-handle-å‡½æ•°åˆ†æ"><a href="#8-2-input-register-handle-å‡½æ•°åˆ†æ" class="headerlink" title="8.2.input_register_handle()å‡½æ•°åˆ†æ"></a>8.2.input_register_handle()å‡½æ•°åˆ†æ</h4><pre><code class="c">//error = input_register_handle(&amp;evdev-&gt;handle);
int input_register_handle(struct input_handle *handle)
{
    struct input_handler *handler = handle-&gt;handler; //æ­¤å¤„çš„handler==evdev-&gt;handle.handlerï¼Œå³evdev_connectå‡½æ•°ä¼ ä¸‹æ¥çš„input_handleré©±åŠ¨å¤„ç†ç»“æ„ä½“

    list_add_tail(&amp;handle-&gt;d_node, &amp;handle-&gt;dev-&gt;h_list); //(1)
    list_add_tail(&amp;handle-&gt;h_node, &amp;handler-&gt;h_list);    // (2)

    if (handler-&gt;start)
        handler-&gt;start(handle);
    return 0;
}</code></pre>
<ul>
<li><p>ï¼ˆ1ï¼‰æ­¤å¤„å› ä¸ºå³è¾¹å‚æ•°ä¸­handle-&gt;devæŒ‡å‘input_devé©±åŠ¨è®¾å¤‡ï¼Œæ‰€ä»¥å°±æ˜¯å°†å·¦è¾¹å‚æ•°handle-&gt;d_nodeæ”¾å…¥åˆ°input_devé©±åŠ¨è®¾å¤‡çš„h_listé“¾è¡¨ä¸­ï¼Œå³input_devé©±åŠ¨è®¾å¤‡çš„h_listå°±æŒ‡å‘input_handleï¼ˆæ²¡æœ‰rï¼‰ç»“æ„ä½“handleä¸­çš„d_nodeæˆå‘˜</p>
</li>
<li><p>ï¼ˆ2ï¼‰åŒæ ·, input_handleré©±åŠ¨å¤„ç†ç»“æ„ä½“çš„h_listä¹ŸæŒ‡å‘äº†handle-&gt;h_node</p>
<p>  æœ€ç»ˆå¦‚ä¸‹å›¾æ‰€ç¤º:</p>
</li>
</ul>
<p><img src="//NU-LL.github.io/2019/07/25/è¾“å…¥å­ç³»ç»Ÿ/1182576-20170918125909525-684596795.png" alt="img"></p>
<p>ä¸¤è€…çš„.h_listéƒ½æŒ‡å‘äº†åŒä¸€ä¸ªhandleç»“æ„ä½“ï¼Œç„¶åé€šè¿‡.h_list æ¥æ‰¾åˆ°handleçš„æˆå‘˜.devå’Œhandler,ä¾¿èƒ½æ‰¾åˆ°å¯¹æ–¹,ä¾¿å»ºç«‹äº†è¿æ¥</p>
<h3 id="9-æŒ‰é”®è¯»å–åˆ†æ"><a href="#9-æŒ‰é”®è¯»å–åˆ†æ" class="headerlink" title="9.æŒ‰é”®è¯»å–åˆ†æ"></a>9.æŒ‰é”®è¯»å–åˆ†æ</h3><p>å‡è®¾å½“readæ‰“å¼€è¿™ä¸ªinputè®¾å¤‡æ—¶ï¼Œå°±ä¼šæ‰§è¡Œevdev_handlerç»“æ„ä½“ä¸­evdev_fopsæˆå‘˜ä¸­çš„.readå‡½æ•°,å¦‚ä¸‹æ‰€ç¤ºä¸ºevdev_fopsç»“æ„ä½“çš„å†…å®¹</p>
<pre><code class="c">static const struct flle_operations evdev_fops={
    .owner            =THIS MODULE,
    .read            =evdev_read,
    .write            =evdev_write,
    .poll            =evdeV poll,
    .open            =evdev_open,
    .release        =evdev_release,
    .unlocked_ioctl    =evdev_ioctl,
#ifdef CONFIG_COMPAT
    .compat_ioctl    =evdev_ioctl_compat,
#endif
    .fasync            =evdev_fasync,
    .flush            =evdev_flush
};</code></pre>
<p>æ•…æœ€ç»ˆä¼šè°ƒç”¨åˆ°evdev_readå‡½æ•°ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹:</p>
<pre><code class="c">static ssize_t evdev_read(struct file *file, char __user *      buffer, size_t count, loff_t *ppos)
{
    ... ...
    /*åˆ¤æ–­åº”ç”¨å±‚è¦è¯»å–çš„æ•°æ®æ˜¯å¦æ­£ç¡®*/
    if (count &lt; evdev_event_size())
        return -EINVAL;

    /*æ— æ•°æ®å¹¶ä¸”æ˜¯éé˜»å¡æ–¹å¼æ‰“å¼€ï¼Œåˆ™ç«‹åˆ»è¿”å›*/
    if (client-&gt;head == client-&gt;tail &amp;&amp; evdev-&gt;exist &amp;&amp; (file-&gt;f_flags &amp; O_NONBLOCK))
        return -EAGAIN;

    /*å¦åˆ™è¿›å…¥ä¼‘çœ   */
    retval = wait_event_interruptible(evdev-&gt;wait,client-&gt;head != client-&gt;tail || !evdev-&gt;exist);
    ... ...           //ä¸Šä¼ æ•°æ®
}</code></pre>
<h3 id="10-readå‡½æ•°çš„å”¤é†’"><a href="#10-readå‡½æ•°çš„å”¤é†’" class="headerlink" title="10.readå‡½æ•°çš„å”¤é†’"></a>10.readå‡½æ•°çš„å”¤é†’</h3><p>è‹¥readå‡½æ•°è¿›å…¥äº†ä¼‘çœ çŠ¶æ€ï¼Œåˆæ˜¯è°æ¥å”¤é†’ï¼Ÿ</p>
<p>æˆ‘ä»¬æœç´¢è¿™ä¸ªevdev-&gt;waitè¿™ä¸ªç­‰å¾…é˜Ÿåˆ—å˜é‡,æ‰¾åˆ°åœ¨evdev_eventå‡½æ•°ä¸­å”¤é†’:</p>
<pre><code class="c">static void evdev_event(struct input_handle *handle, unsigned int type, unsigned int code, int value)
{
    ... ...
    wake_up_interruptible(&amp;evdev-&gt;wait);   //æœ‰äº‹ä»¶è§¦å‘ï¼Œä¾¿å”¤é†’ç­‰å¾…ä¸­æ–­
}</code></pre>
<p>å…¶ä¸­evdev_event()æ˜¯evdev.c(äº‹ä»¶é©±åŠ¨) çš„input_handlerç»“æ„ä½“ä¸­çš„æˆå‘˜event,å¦‚ä¸‹æ‰€ç¤º:</p>
<pre><code class="c">static struct input_handler evdev_handler={
.event        =evdev_event,
.connect    =evdev_connect,
.disconnect    =evdev_disconnect,
.fops        =&amp; evdev_fops,
.minor        =EVDEV_MINOR_BASE,
.name        =&quot;evdev&quot;,
.id_table    =evdev_ids,
};</code></pre>
<p>å½“æœ‰äº‹ä»¶å‘ç”Ÿäº†,æ¯”å¦‚å¯¹äºæŒ‰é”®é©±åŠ¨,å½“æœ‰æŒ‰é”®æŒ‰ä¸‹æ—¶,å°±ä¼šè¿›å…¥.eventå‡½æ•°ä¸­å¤„ç†äº‹ä»¶</p>
<h3 id="11-evdev-event-çš„è°ƒç”¨"><a href="#11-evdev-event-çš„è°ƒç”¨" class="headerlink" title="11.evdev_event()çš„è°ƒç”¨"></a>11.evdev_event()çš„è°ƒç”¨</h3><p>åˆ†æä¸‹,æ˜¯è°è°ƒç”¨evdev_event()è¿™ä¸ª.eventäº‹ä»¶é©±åŠ¨å‡½æ•°</p>
<p>åº”è¯¥å°±æ˜¯ä¹‹å‰åˆ†æçš„input_devé‚£å±‚è°ƒç”¨çš„</p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹å†…æ ¸ gpio_keys_isr()å‡½æ•°ä»£ç ä¾‹å­å°±çŸ¥é“äº† (driver/input/keyboard/gpio_key.c)</p>
<pre><code class="c">static irqreturn_t gpio_keys_isr(int irq, void *dev_id)
{
    /*è·å–æŒ‰é”®å€¼,èµ‹åˆ°stateé‡Œ*/
    ... ...
    /*ä¸ŠæŠ¥äº‹ä»¶*/
    input_event(input, type, button-&gt;code, !!state);  
    input_sync(input);//åŒæ­¥ä¿¡å·é€šçŸ¥,è¡¨ç¤ºäº‹ä»¶å‘é€å®Œæ¯•
}</code></pre>
<p>æ˜¾ç„¶å°±æ˜¯é€šè¿‡input_event()æ¥è°ƒç”¨.eventäº‹ä»¶å‡½æ•°,æˆ‘ä»¬æ¥çœ‹çœ‹:</p>
<pre><code class="c">void input_event(struct input_dev *dev, unsigned int type, unsigned int code, int value)
{
    struct input_handle *handle;
    ... ...

    /* é€šè¿‡input_dev-&gt;h_listé“¾è¡¨æ‰¾åˆ°input_handleé©±åŠ¨å¤„ç†ç»“æ„ä½“*/
    list_for_each_entry(handle, &amp;dev-&gt;h_list, d_node)//è¿™é‡Œå°±æ˜¯ä»dev-&gt;h_listå–å‡ºæ¯ä¸€é¡¹ï¼ˆè¿™é‡Œçš„æ¯ä¸€é¡¹å°±æ˜¯input_handleï¼ˆæ²¡æœ‰rï¼‰ç±»å‹çš„ï¼‰å¹¶æ‰§è¡Œå…¶å¯¹åº”çš„openå‡½æ•°
        if (handle-&gt;open)  //å¦‚æœinput_handleä¹‹å‰openè¿‡,é‚£ä¹ˆè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„é©±åŠ¨å¤„ç†ç»“æ„ä½“
            handle-&gt;handler-&gt;event(handle, type, code, value); //è°ƒç”¨evdev_event()çš„.eventäº‹ä»¶å‡½æ•°
}</code></pre>
<p>è‹¥ä¹‹å‰é©±åŠ¨input_devå’Œå¤„ç†input_handlerå·²ç»é€šè¿‡input_handler çš„.connectå‡½æ•°å»ºç«‹èµ·äº†è¿æ¥,é‚£ä¹ˆå°±è°ƒç”¨evdev_event()çš„.eventäº‹ä»¶å‡½æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:</p>
<p><img src="//NU-LL.github.io/2019/07/25/è¾“å…¥å­ç³»ç»Ÿ/1182576-20170918125942290-1009610213.png" alt="img"></p>
<h3 id="12-æ€»ç»“åˆ†æ"><a href="#12-æ€»ç»“åˆ†æ" class="headerlink" title="12.æ€»ç»“åˆ†æ"></a>12.æ€»ç»“åˆ†æ</h3><p>1.æ³¨å†Œè¾“å…¥å­ç³»ç»Ÿ,è¿›å…¥put_init():</p>
<p>1)åˆ›å»ºä¸»è®¾å¤‡å·ä¸º13çš„â€inputâ€å­—ç¬¦è®¾å¤‡</p>
<pre><code class="c">err = register_chrdev(INPUT_MAJOR, &quot;input&quot;, &amp;input_fops);</code></pre>
<p>2.openæ‰“å¼€é©±åŠ¨,è¿›å…¥input_open_file():</p>
<p>1)æ›´æ–°è®¾å¤‡çš„file_oprations</p>
<pre><code class="c">file-&gt;f_op=fops_get(handler-&gt;fops);</code></pre>
<p> 2)æ‰§è¡Œfile_oprations-&gt;openå‡½æ•°</p>
<pre><code class="c">err = new_fops-&gt;open(inode, file);</code></pre>
<p>3.æ³¨å†Œinput_handler,è¿›å…¥input_register_handler():</p>
<p>1)æ·»åŠ åˆ°input_table[]å¤„ç†æ•°ç»„ä¸­</p>
<pre><code class="c">input_table[handler-&gt;minor &gt;&gt; 5] = handler;</code></pre>
<p>2ï¼‰æ·»åŠ åˆ°input_handler_listé“¾è¡¨ä¸­</p>
<pre><code class="c">list_add_tail(&amp;handler-&gt;node, &amp;input_handler_list);</code></pre>
<p>3)åˆ¤æ–­input_devçš„id,æ˜¯å¦æœ‰æ”¯æŒè¿™ä¸ªé©±åŠ¨çš„è®¾å¤‡</p>
<pre><code class="c"> list_for_each_entry(dev, &amp;input_dev_list, node)   //éå†æŸ¥æ‰¾input_dev_listé“¾è¡¨é‡Œæ‰€æœ‰input_dev

 input_attach_handler(dev, handler);             //åˆ¤æ–­ä¸¤è€…id,è‹¥ä¸¤è€…æ”¯æŒä¾¿è¿›è¡Œè¿æ¥ã€‚</code></pre>
<p>4.æ³¨å†Œinput_devï¼Œè¿›å…¥input_register_device():</p>
<p>1)æ”¾åœ¨input_dev_listé“¾è¡¨ä¸­</p>
<pre><code class="c">list_add_tail(&amp;dev-&gt;node, &amp;input_dev_list);</code></pre>
<p>2)åˆ¤æ–­input_handlerçš„idï¼Œæ˜¯å¦æœ‰æ”¯æŒè¿™ä¸ªè®¾å¤‡çš„é©±åŠ¨</p>
<pre><code class="c">list_for_each_entry(handler, &amp;input_handler_list, node)  //éå†æŸ¥æ‰¾input_handler_listé“¾è¡¨é‡Œæ‰€æœ‰input_handler
input_attach_handler(dev, handler);                      //åˆ¤æ–­ä¸¤è€…id,è‹¥ä¸¤è€…æ”¯æŒä¾¿è¿›è¡Œè¿æ¥ã€‚</code></pre>
<p>5.åˆ¤æ–­input_handlerå’Œinput_devçš„id,è¿›å…¥input_attach_handler():</p>
<p>1ï¼‰åŒ¹é…ä¸¤è€…id,</p>
<pre><code class="c">input_match_device(handler-&gt;id_table, dev);        //åŒ¹é…input_handlerå’Œdevçš„id,ä¸æˆåŠŸé€€å‡ºå‡½æ•°</code></pre>
<p>2)åŒ¹é…æˆåŠŸè°ƒç”¨input_handler -&gt;connect</p>
<pre><code class="c">handler-&gt;connect(handler, dev, id);              //å»ºç«‹è¿æ¥</code></pre>
<p>6.å»ºç«‹input_handlerå’Œinput_devçš„è¿æ¥ï¼Œè¿›å…¥input_handler-&gt;connect():</p>
<p>1)åˆ›å»ºå…¨å±€ç»“æ„ä½“,é€šè¿‡input_handleç»“æ„ä½“è¿æ¥åŒæ–¹</p>
<pre><code class="c">evdev = kzalloc(sizeof(struct evdev), GFP_KERNEL);    //åˆ›å»ºä¸¤è€…è¿æ¥çš„input_handleå…¨å±€ç»“æ„ä½“
list_add_tail(&amp;handle-&gt;d_node, &amp;handle-&gt;dev-&gt;h_list); //è¿æ¥input_dev-&gt;h_list
list_add_tail(&amp;handle-&gt;h_node, &amp;handler-&gt;h_list);    // è¿æ¥input_handle-&gt;h_list</code></pre>
<p>7.æœ‰äº‹ä»¶å‘ç”Ÿæ—¶,æ¯”å¦‚æŒ‰é”®ä¸­æ–­,åœ¨ä¸­æ–­å‡½æ•°ä¸­éœ€è¦è¿›å…¥input_event()ä¸ŠæŠ¥äº‹ä»¶:</p>
<p>1)æ‰¾åˆ°é©±åŠ¨å¤„ç†ç»“æ„ä½“ï¼Œç„¶åæ‰§è¡Œinput_handler-&gt;event()</p>
<pre><code class="c">    list_for_each_entry(handle, &amp;dev-&gt;h_list, d_node)     // é€šè¿‡input_dev -&gt;h_listé“¾è¡¨æ‰¾åˆ°input_handleé©±åŠ¨å¤„ç†ç»“æ„ä½“
    if (handle-&gt;open)  //å¦‚æœinput_handleä¹‹å‰open è¿‡,é‚£ä¹ˆè¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„é©±åŠ¨å¤„ç†ç»“æ„ä½“(æœ‰å¯èƒ½ä¸€ä¸ªé©±åŠ¨è®¾å¤‡åœ¨ä¸åŒæƒ…å†µä¸‹æœ‰ä¸åŒçš„é©±åŠ¨å¤„ç†æ–¹å¼)
        handle-&gt;handler-&gt;event(handle, type, code, value); //è°ƒç”¨evdev_event()çš„.eventäº‹ä»¶å‡½æ•°</code></pre>
<h2 id="äºŒã€ç¨‹åºåˆ†æ"><a href="#äºŒã€ç¨‹åºåˆ†æ" class="headerlink" title="äºŒã€ç¨‹åºåˆ†æ"></a>äºŒã€ç¨‹åºåˆ†æ</h2><p><strong>ç›®æ ‡:</strong>å®ç°é”®ç›˜é©±åŠ¨,è®©å¼€å‘æ¿çš„4ä¸ªæŒ‰é”®ä»£è¡¨é”®ç›˜ä¸­çš„Lã€Sã€ç©ºæ ¼é”®ã€å›è½¦é”®</p>
<h3 id="1-å‡ ä¸ªå¸¸ç”¨ç»“æ„ä½“å’Œå‡½æ•°"><a href="#1-å‡ ä¸ªå¸¸ç”¨ç»“æ„ä½“å’Œå‡½æ•°" class="headerlink" title="1.å‡ ä¸ªå¸¸ç”¨ç»“æ„ä½“å’Œå‡½æ•°"></a>1.å‡ ä¸ªå¸¸ç”¨ç»“æ„ä½“å’Œå‡½æ•°</h3><ul>
<li><p><strong>1)input_devé©±åŠ¨è®¾å¤‡ç»“æ„ä½“ä¸­å¸¸ç”¨æˆå‘˜å¦‚ä¸‹:</strong></p>
<pre><code class="c">  struct input_dev {

      void *private;
      const char *name;  //è®¾å¤‡åå­—
      const char *phys;  //æ–‡ä»¶è·¯å¾„,æ¯”å¦‚ input/buttons
      const char *uniq;
      struct input_id id;

</code></pre>
</li>
</ul>
<pre><code>    unsigned long evbit[NBITS(EV_MAX)];  //è¡¨ç¤ºæ”¯æŒå“ªç±»äº‹ä»¶,å¸¸ç”¨æœ‰ä»¥ä¸‹å‡ ç§äº‹ä»¶(å¯ä»¥å¤šé€‰)
    //EV_SYN      åŒæ­¥äº‹ä»¶ï¼Œå½“ä½¿ç”¨input_event()å‡½æ•°å,å°±è¦ä½¿ç”¨è¿™ä¸ªä¸ŠæŠ¥ä¸ªåŒæ­¥äº‹ä»¶
    //EV_KEY       é”®ç›˜äº‹ä»¶
    //EV_REL       (relative)ç›¸å¯¹åæ ‡äº‹ä»¶ï¼Œæ¯”å¦‚é¼ æ ‡
    //EV_ABS       (absolute)ç»å¯¹åæ ‡äº‹ä»¶ï¼Œæ¯”å¦‚æ‘‡æ†ã€è§¦æ‘¸å±æ„Ÿåº”
    //EV_MSC      å…¶ä»–äº‹ä»¶,åŠŸèƒ½
    //EV_LED       LEDç¯äº‹ä»¶
    //EV_SND      (sound)å£°éŸ³äº‹ä»¶

    //EV_REP       é‡å¤é”®ç›˜æŒ‰é”®äº‹ä»¶
    //(å†…éƒ¨ä¼šå®šä¹‰ä¸€ä¸ªå®šæ—¶å™¨,è‹¥æœ‰é”®ç›˜æŒ‰é”®äº‹ä»¶ä¸€ç›´æŒ‰ä¸‹/æ¾å¼€,å°±é‡å¤å®šæ—¶,æ—¶é—´ä¸€åˆ°å°±ä¸ŠæŠ¥äº‹ä»¶)

    //EV_FF         å—åŠ›äº‹ä»¶
    //EV_PWR      ç”µæºäº‹ä»¶
    //EV_FF_STATUS  å—åŠ›çŠ¶æ€äº‹ä»¶

    unsigned long keybit[NBITS(KEY_MAX)];   //å­˜æ”¾æ”¯æŒçš„é”®ç›˜æŒ‰é”®å€¼
    //é”®ç›˜å˜é‡å®šä¹‰åœ¨:include/linux/input.h, æ¯”å¦‚: KEY_L(æŒ‰é”®L)
    unsigned long relbit[NBITS(REL_MAX)];    //å­˜æ”¾æ”¯æŒçš„ç›¸å¯¹åæ ‡å€¼
    unsigned long absbit[NBITS(ABS_MAX)];   //å­˜æ”¾æ”¯æŒçš„ç»å¯¹åæ ‡å€¼
    unsigned long mscbit[NBITS(MSC_MAX)];   //å­˜æ”¾æ”¯æŒçš„å…¶å®ƒäº‹ä»¶,ä¹Ÿå°±æ˜¯åŠŸèƒ½
    unsigned long ledbit[NBITS(LED_MAX)];    //å­˜æ”¾æ”¯æŒçš„å„ç§çŠ¶æ€LED
    unsigned long sndbit[NBITS(SND_MAX)];    //å­˜æ”¾æ”¯æŒçš„å„ç§å£°éŸ³
    unsigned long ffbit[NBITS(FF_MAX)];       //å­˜æ”¾æ”¯æŒçš„å—åŠ›è®¾å¤‡
    unsigned long swbit[NBITS(SW_MAX)];     //å­˜æ”¾æ”¯æŒçš„å¼€å…³åŠŸèƒ½

    ... ...
}
```</code></pre><ul>
<li><p><strong>2)å‡½æ•°å¦‚ä¸‹:</strong></p>
<pre><code class="c">  struct input_dev *input_allocate_device(void);  //å‘å†…æ ¸ä¸­ç”³è¯·ä¸€ä¸ªinput_devè®¾å¤‡,ç„¶åè¿”å›è¿™ä¸ªè®¾å¤‡</code></pre>
<pre><code class="c">  input_unregister_device(struct input_dev *dev);   //å¸è½½/sys/class/inputç›®å½•ä¸‹çš„input_devè¿™ä¸ªç±»è®¾å¤‡, ä¸€èˆ¬åœ¨é©±åŠ¨å‡ºå£å‡½æ•°å†™</code></pre>
<pre><code class="c">  input_free_device(struct input_dev *dev);   //é‡Šæ”¾input_devè¿™ä¸ªç»“æ„ä½“, ä¸€èˆ¬åœ¨é©±åŠ¨å‡ºå£å‡½æ•°å†™</code></pre>
<pre><code class="c">  set_bit(nr,p);                  //è®¾ç½®æŸä¸ªç»“æ„ä½“æˆå‘˜pé‡Œé¢çš„æŸä½ç­‰äºnr,æ”¯æŒè¿™ä¸ªåŠŸèƒ½
  /* æ¯”å¦‚:
  set_bit(EV_KEY,buttons_dev-&gt;evbit);   //è®¾ç½®input_devç»“æ„ä½“buttons_dev-&gt;evbitæ”¯æŒEV_KEY
  set_bit(KEY_S,buttons_dev-&gt;keybit);  //è®¾ç½®input_devç»“æ„ä½“buttons_dev-&gt;keybitæ”¯æŒæŒ‰é”®â€Sâ€
  */</code></pre>
<pre><code class="c">  void input_event(struct input_dev *dev, unsigned int type, unsigned int code, int value);  //ä¸ŠæŠ¥äº‹ä»¶
   // input_dev *dev :è¦ä¸ŠæŠ¥å“ªä¸ªinput_devé©±åŠ¨è®¾å¤‡çš„äº‹ä»¶
   // type : è¦ä¸ŠæŠ¥å“ªç±»äº‹ä»¶, æ¯”å¦‚æŒ‰é”®äº‹ä»¶,åˆ™å¡«å…¥: EV_KEY
   // code: å¯¹åº”çš„äº‹ä»¶é‡Œæ”¯æŒçš„å“ªä¸ªå˜é‡ï¼Œæ¯”å¦‚æŒ‰ä¸‹æŒ‰é”®Låˆ™å¡«å…¥: KEY_L
   //value:å¯¹åº”çš„å˜é‡é‡Œçš„æ•°å€¼,æ¯”å¦‚æ¾å¼€æŒ‰é”®åˆ™å¡«å…¥1,æ¾å¼€æŒ‰é”®åˆ™å¡«å…¥0</code></pre>
<pre><code class="c">  void input_sync(struct input_dev *dev); //åŒæ­¥äº‹ä»¶é€šçŸ¥</code></pre>
<p>  è¿™é‡Œinput_event()å‡½æ•°åªæ˜¯ä¸ªäº‹ä»¶å‡½æ•°,éœ€è¦input_sync()åŒæ­¥äº‹ä»¶å‡½æ•°æ¥é€šçŸ¥ç³»ç»Ÿ,ç„¶åç³»ç»Ÿæ‰ä¼šçŸ¥é“</p>
<p>  å…¶ä¸­ï¼Œinput_sync()ä»£ç å¦‚ä¸‹:</p>
<pre><code class="c">  static inline void input_sync(struct input_dev *dev)
  {
      input_event(dev, EV_SYN, SYN_REPORT, 0); //å°±æ˜¯ä¸ŠæŠ¥åŒæ­¥äº‹ä»¶,å‘Šè¯‰å†…æ ¸:input_event()äº‹ä»¶æ‰§è¡Œå®Œæ¯•
  }</code></pre>
</li>
</ul>
<h3 id="2-ä»£ç åˆ†æ"><a href="#2-ä»£ç åˆ†æ" class="headerlink" title="2.ä»£ç åˆ†æ"></a>2.ä»£ç åˆ†æ</h3><p>1)å‘å†…æ ¸ç”³è¯·input_devç»“æ„ä½“</p>
<p>2)è®¾ç½®input_devçš„æˆå‘˜</p>
<p>3)æ³¨å†Œinput_dev é©±åŠ¨è®¾å¤‡</p>
<p>4)åˆå§‹åŒ–å®šæ—¶å™¨å’Œä¸­æ–­</p>
<p>5)å†™ä¸­æ–­æœåŠ¡å‡½æ•°</p>
<p>6)å†™å®šæ—¶å™¨è¶…æ—¶å‡½æ•°</p>
<p>7)åœ¨å‡ºå£å‡½æ•°ä¸­ é‡Šæ”¾ä¸­æ–­å‡½æ•°,åˆ é™¤å®šæ—¶å™¨,å¸è½½é‡Šæ”¾é©±åŠ¨</p>
<pre><code class="c">#include &lt;linux/module.h&gt;
#include &lt;linux/version.h&gt;
#include &lt;linux/init.h&gt;
#include &lt;linux/fs.h&gt;
#include &lt;linux/interrupt.h&gt;
#include &lt;linux/irq.h&gt;
#include &lt;linux/sched.h&gt;
#include &lt;linux/pm.h&gt;
#include &lt;linux/sysctl.h&gt;
#include &lt;linux/proc_fs.h&gt;
#include &lt;linux/delay.h&gt;
#include &lt;linux/platform_device.h&gt;
#include &lt;linux/input.h&gt;
#include &lt;linux/irq.h&gt;
#include &lt;linux/gpio_keys.h&gt;
#include &lt;asm/gpio.h&gt;


struct input_dev *buttons_dev;            //  å®šä¹‰ä¸€ä¸ªinput_devç»“æ„ä½“  
static struct ping_desc *buttons_id;          //ä¿å­˜dev_id,åœ¨å®šæ—¶å™¨ä¸­ç”¨
static struct timer_list buttons_timer;    //å®šæ—¶å™¨ç»“æ„ä½“  

struct  ping_desc{

    unsigned  char  *name;          //ä¸­æ–­è®¾å¤‡åç§°
    int            pin_irq;          //æŒ‰é”®çš„å¤–éƒ¨ä¸­æ–­æ ‡å¿—ä½
    unsigned  int    pin;                //å¼•è„š
    unsigned int  irq_ctl;           //è§¦å‘ä¸­æ–­çŠ¶æ€:   IRQ_TYPE_EDGE_BOTH
    unsigned  int    button;         //dev_id,å¯¹åº”é”®ç›˜çš„ L ,  S,  ç©ºæ ¼,  enter
};

// KEY1 -&gt; L
// KEY2 -&gt; S
// KEY3 -&gt; ç©ºæ ¼
// KEY4 -&gt; enter
static  struct ping_desc   buttons_desc[5]=
{
    {&quot;s1&quot;, IRQ_EINT0,   S3C2410_GPF0,  IRQ_TYPE_EDGE_BOTH,KEY_L},
    {&quot;s2&quot;, IRQ_EINT2,   S3C2410_GPF2,  IRQ_TYPE_EDGE_BOTH,KEY_S},
    {&quot;s3&quot;, IRQ_EINT11, S3C2410_GPG3 , IRQ_TYPE_EDGE_BOTH,KEY_SPACE},
    {&quot;s4&quot;, IRQ_EINT19, S3C2410_GPG11,IRQ_TYPE_EDGE_BOTH,KEY_ENTER},
};



/*5. å†™ä¸­æ–­æœåŠ¡å‡½æ•°*/
static irqreturn_t  buttons_irq (int irq, void *dev_id)       //ä¸­æ–­æœåŠ¡å‡½æ•°
{
    buttons_id=(struct ping_desc *)dev_id;             //ä¿å­˜å½“å‰çš„dev_id
    mod_timer(&amp;buttons_timer, jiffies+HZ/100 );   //æ›´æ–°å®šæ—¶å™¨å€¼ 10ms
    return 0;
}



/*6.å†™å®šæ—¶å™¨è¶…æ—¶å‡½æ•°*/
void buttons_timer_function(unsigned long i)
{
    int val;
    val=s3c2410_gpio_getpin(buttons_id-&gt;pin);             //è·å–æ˜¯ä»€ä¹ˆç”µå¹³
    if(val)         //é«˜ç”µå¹³,æ¾å¼€
    {
        /*ä¸ŠæŠ¥äº‹ä»¶*/
        input_event(buttons_dev,EV_KEY,buttons_id-&gt;button, 0);  //ä¸ŠæŠ¥EV_KEYç±»å‹,buttonæŒ‰é”®,0(æ²¡æŒ‰ä¸‹)
        input_sync(buttons_dev);         // ä¸Šä¼ åŒæ­¥äº‹ä»¶,å‘Šè¯‰ç³»ç»Ÿæœ‰äº‹ä»¶å‡ºç°
    }

    else      //ä½ç”µå¹³ï¼ŒæŒ‰ä¸‹
    {
        /*ä¸ŠæŠ¥äº‹ä»¶*/
        input_event(buttons_dev, EV_KEY, buttons_id-&gt;button, 1);  //ä¸ŠæŠ¥EV_KEYç±»å‹,buttonæŒ‰é”®,1(æŒ‰ä¸‹)
        input_sync(buttons_dev);       // ä¸Šä¼ åŒæ­¥äº‹ä»¶,å‘Šè¯‰ç³»ç»Ÿæœ‰äº‹ä»¶å‡ºç°
    }
}


static int buttons_init(void)   //å…¥å£å‡½æ•°
{
    int i;
    buttons_dev=input_allocate_device();  //1.å‘å†…æ ¸ ç”³è¯·input_devç»“æ„ä½“
    /*2.è®¾ç½®input_dev ,  */
    set_bit(EV_KEY,buttons_dev-&gt;evbit);       //æ”¯æŒé”®ç›˜äº‹ä»¶
    set_bit(EV_REP,buttons_dev-&gt;evbit);       //æ”¯æŒé”®ç›˜é‡å¤æŒ‰é”®äº‹ä»¶ï¼Œè¯¥äº‹ä»¶åœ¨input_eventä¸ŠæŠ¥EV_KEYäº‹ä»¶æ—¶ä¼šè‡ªåŠ¨ä¿®æ”¹å®šæ—¶å™¨æ¥è¿›è¡Œå¤„ç†

    set_bit(KEY_L,buttons_dev-&gt;keybit);                  //æ”¯æŒæŒ‰é”® L
    set_bit(KEY_S,buttons_dev-&gt;keybit);                //æ”¯æŒæŒ‰é”® S
    set_bit(KEY_SPACE,buttons_dev-&gt;keybit);      //æ”¯æŒæŒ‰é”® ç©ºæ ¼
    set_bit(KEY_ENTER,buttons_dev-&gt;keybit);     //æ”¯æŒæŒ‰é”® enter

    /*3.æ³¨å†Œinput_dev */
    input_register_device(buttons_dev);


    /*4. åˆå§‹åŒ–ç¡¬ä»¶:åˆå§‹åŒ–å®šæ—¶å™¨å’Œä¸­æ–­*/
    // KEY1 -&gt; L
    // KEY2 -&gt; S
    // KEY3 -&gt; ç©ºæ ¼
    // KEY4 -&gt; enter
    init_timer(&amp;buttons_timer);
    buttons_timer.function=buttons_timer_function;
    add_timer(&amp;buttons_timer);

    for(i=0;i&lt;4;i++)
        request_irq(buttons_desc[i].pin_irq, buttons_irq, buttons_desc[i].irq_ctl, buttons_desc[i].name, &amp;buttons_desc[i]);

    return 0;
}


static int buttons_exit(void)  //å‡ºå£å‡½æ•°
{
    /*7.é‡Šæ”¾ä¸­æ–­å‡½æ•°,åˆ é™¤å®šæ—¶å™¨,å¸è½½é‡Šæ”¾é©±åŠ¨*/
    int i;
    for(i=0;i&lt;4;i++)
        free_irq(buttons_desc[i].pin_irq,&amp;buttons_desc[i]);    //é‡Šæ”¾ä¸­æ–­å‡½æ•°

    del_timer(&amp;buttons_timer);   //åˆ é™¤å®šæ—¶å™¨

    input_unregister_device(buttons_dev);     //å¸è½½ç±»ä¸‹çš„é©±åŠ¨è®¾å¤‡
    input_free_device(buttons_dev);                //é‡Šæ”¾é©±åŠ¨ç»“æ„ä½“
    return 0;
}

module_init(buttons_init);
module_exit(buttons_exit);
MODULE_LICENSE(&quot;GPL v2&quot;);</code></pre>
<h3 id="3-æµ‹è¯•è¿è¡Œ"><a href="#3-æµ‹è¯•è¿è¡Œ" class="headerlink" title="3.æµ‹è¯•è¿è¡Œ"></a>3.æµ‹è¯•è¿è¡Œ</h3><p>æŒ‚è½½é”®ç›˜é©±åŠ¨å, å¦‚ä¸‹æ‰€ç¤º,å¯ä»¥é€šè¿‡  ls -l /dev/event*   å‘½ä»¤æŸ¥çœ‹å·²æŒ‚è½½çš„è®¾å¤‡èŠ‚ç‚¹:</p>
<pre><code class="shell"># ls -l /dev/event*
crw-rw----    1 0      0       13, 64 Jan  1 00:00 /dev/event0(è‡ªå¸¦çš„è§¦æ‘¸å±é©±åŠ¨è®¾å¤‡)
crw-rw----    1 0      0       13, 65 Jan  1 01:02 /dev/event1(åæ¥å®‰è£…çš„é”®ç›˜é©±åŠ¨è®¾å¤‡)</code></pre>
<p>åœ¨<strong>ä¸Šä¸€èŠ‚è¾“å…¥å­ç³»ç»Ÿé‡Œåˆ†æ</strong>åˆ°:è¾“å…¥å­ç³»ç»Ÿçš„ä¸»è®¾å¤‡å·ä¸º13,å…¶ä¸­eventé©±åŠ¨æœ¬èº«çš„æ­¤è®¾å¤‡å·æ˜¯ä»64å¼€å§‹çš„,å¦‚ä¸Šæ‰€ç¤º,å†…æ ¸å¯åŠ¨æ—¶,ä¼šåŠ è½½è‡ªå¸¦è§¦æ‘¸å±é©±åŠ¨,æ‰€ä»¥æˆ‘ä»¬çš„é”®ç›˜é©±åŠ¨çš„æ¬¡è®¾å¤‡å·=64+1</p>
<h4 id="3-1æµ‹è¯•è¿è¡Œæœ‰ä¸¤ç§-ä¸€ç§æ˜¯ç›´æ¥æ‰“å¼€-dev-tyy1-ç¬¬äºŒç§æ˜¯ä½¿ç”¨execå‘½ä»¤"><a href="#3-1æµ‹è¯•è¿è¡Œæœ‰ä¸¤ç§-ä¸€ç§æ˜¯ç›´æ¥æ‰“å¼€-dev-tyy1-ç¬¬äºŒç§æ˜¯ä½¿ç”¨execå‘½ä»¤" class="headerlink" title="3.1æµ‹è¯•è¿è¡Œæœ‰ä¸¤ç§,ä¸€ç§æ˜¯ç›´æ¥æ‰“å¼€/dev/tyy1,ç¬¬äºŒç§æ˜¯ä½¿ç”¨execå‘½ä»¤"></a>3.1æµ‹è¯•è¿è¡Œæœ‰ä¸¤ç§,ä¸€ç§æ˜¯ç›´æ¥æ‰“å¼€/dev/tyy1,ç¬¬äºŒç§æ˜¯ä½¿ç”¨execå‘½ä»¤</h4><p>æ–¹æ³•1:</p>
<pre><code class="shell">cat /dev/tty1     //tty1:LCDç»ˆç«¯,å°±ä¼šé€šè¿‡tty_io.cæ¥è®¿é—®é”®ç›˜é©±åŠ¨,ç„¶åæ‰“å°åœ¨tty1ç»ˆç«¯ä¸Š</code></pre>
<p>æ–¹æ³•2:</p>
<pre><code class="shell">exec 0&lt;/dev/tty1    //åˆ©ç”¨&gt;å°†/dev/tty1ä½œä¸ºè¾“å…¥ä¼ ç»™è¯¥shellè¿›ç¨‹çš„0å·æ–‡ä»¶ï¼ˆè¯¥shellçš„è¾“å…¥è®¾å¤‡ï¼‰,æ­¤æ—¶çš„é”®ç›˜é©±åŠ¨å°±ä¼šç›´æ¥æ‰“å°åœ¨shellä¸Š</code></pre>
<h4 id="3-2-è°ƒè¯•"><a href="#3-2-è°ƒè¯•" class="headerlink" title="3.2 è°ƒè¯•"></a>3.2 è°ƒè¯•</h4><p><strong>è‹¥æµ‹è¯•ä¸æˆåŠŸ,æ¿å­åˆåœ¨QTä¸‹è¿›è¡Œçš„:</strong></p>
<p>1)å¯ä»¥ä½¿ç”¨viå‘½ä»¤,åœ¨è®°äº‹æœ¬ä¸­æŒ‰æŒ‰é”®è¯•</p>
<p>2)æˆ–è€…åˆ é™¤/etc/init.d/rcS é‡Œé¢æœ‰å…³QTè‡ªå¯åŠ¨çš„å‘½ä»¤,ç„¶åé‡å¯</p>
<p><strong>è‹¥æ¿å­æ²¡åœ¨QTä¸‹è¿›è¡Œ,ä¹Ÿæ— æ³•æµ‹è¯•æˆåŠŸ:</strong></p>
<p>1)å¯ä»¥ä½¿ç”¨hexdumpå‘½ä»¤æ¥è°ƒè¯•ä»£ç </p>
<pre><code class="sh">hexdump /dev/event1
           ç§’        å¾®ç§’     ç±»  code    value
0000000 0bb2 0000 0e48 000c 0001 0026 0001 0000
0000010 0bb2 0000 0e54 000c 0000 0000 0000 0000
0000020 0bb2 0000 5815 000e 0001 0026 0000 0000
0000030 0bb2 0000 581f 000e 0000 0000 0000 0000</code></pre>

      
       <hr><span style="font-style: italic;color: gray;"> æ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚é‚®ä»¶ï¼š1125934312@qq.com </span>
    </div>
</article>



<div class="article_copyright">
    <p><span class="copy-title">Title:</span>è¾“å…¥å­ç³»ç»Ÿ</p>
    <p><span class="copy-title">Count:</span><span class="post-count">5.9k</span></p>
    <p><span class="copy-title">Author:</span><a  title="NU-LL">NU-LL</a></p>
    <p><span class="copy-title">Created At:</span>2019-07-25, 00:05:15</p>
    <p><span class="copy-title">Updated At:</span>2019-09-18, 13:51:06</p>
    <span class="copy-title">Url:</span><a class="post-url" href="/2019/07/25/è¾“å…¥å­ç³»ç»Ÿ/" title="è¾“å…¥å­ç³»ç»Ÿ">http://NU-LL.github.io/2019/07/25/è¾“å…¥å­ç³»ç»Ÿ/</a>
    <p>
        <span class="copy-title">Copyright:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">&#39;Attribution-non-commercial-shared in the same way 4.0&#39;</a> Reprint please keep the original link and author.
    </p>
</div>





    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2016-2020 NU-LL
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: #fafafa;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
