<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <title>NanoPi_Neo_Coreåº•å±‚å¼€å‘ | æ— åå°å’</title>
  <meta name="keywords" content=" NanoPi Neo Core ">
  <meta name="description" content="NanoPi_Neo_Coreåº•å±‚å¼€å‘ | æ— åå°å’">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="å…³äº">
<meta property="og:type" content="website">
<meta property="og:title" content="about">
<meta property="og:url" content="http://NU-LL.github.io/about/index.html">
<meta property="og:site_name" content="æ— åå°å’">
<meta property="og:description" content="å…³äº">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-07-21T14:30:10.192Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="about">
<meta name="twitter:description" content="å…³äº">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0"></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js"></script>

<script src="/js/iconfont.js?v=1.1.0"></script>

</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value>
  <input class="theme_blog_path" value>
  <input id="theme_shortcut" value="true">
</div>


<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>NU-LL</span>
</div>

<div class="icon">
    
        
    
        
        <a title="github" href="https://github.com/NU-LL" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
        <a title="csdn" href="https://blog.csdn.net/CSDN_JZ_" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-csdn"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
        <a title="email" href="mailto:1125934312@qq.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=1125934312&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
        
    
        
        <a title="neteasemusic" href="https://music.163.com/#/user/home?id=323374922" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-neteasemusic"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active" data-rel="All">All<small>(44)</small></div></li>
    
        
            
            <li><div data-rel="Linux">Linux<small>(25)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="ç¼–ç¨‹è¯­è¨€">ç¼–ç¨‹è¯­è¨€<small>(6)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="MCU">MCU<small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="äººå·¥æ™ºèƒ½">äººå·¥æ™ºèƒ½<small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="å·¥å…·">å·¥å…·<small>(4)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="ç®—æ³•">ç®—æ³•<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="æ„Ÿæ‚Ÿä¸æ€»ç»“">æ„Ÿæ‚Ÿä¸æ€»ç»“<small>(2)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">About</a><a style="width: 50%"  class="friends">Friends</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="44">
<input type="hidden" id="yelog_site_word_count" value="288.7k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://github.com/NU-LL">NU-LL</a></li>
            
            <li><a target="_blank" href="https://github.com/southernEast">SouthEast</a></li>
            
            <li><a target="_blank" href="https://github.com/tan1998lei">tan1998lei</a></li>
            
            <li><a target="_blank" href="https://github.com/jiejieTop">jiejieTop</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="æœç´¢ å¿«æ·é”® i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="åˆ‡æ¢åˆ°å¤§çº²è§†å›¾ å¿«æ·é”® w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="è¿”å›"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="å¤§å°å†™æ•æ„Ÿ"></i>
            <i class="iconfont icon-tag" data-title="æ ‡ç­¾"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">å¤§çº²</div>
            <i class="iconfont icon-list" data-title="åˆ‡æ¢åˆ°æ–‡ç« åˆ—è¡¨"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>BootLoader</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Ctex</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>DM9000C</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>dual bank</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ESP32</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ESP8266</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>git</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>GO</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Goè¯­è¨€å…¥é—¨ç»å…¸</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>IAP</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>IICé©±åŠ¨</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Kconfigè¯­æ³•</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Kubernetes</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Latex</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>LiCheePi Zero</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Linuxå†…æ ¸</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>LinuxæœåŠ¡</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Markdown</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>markdownlint</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Mininet</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NanoPi Neo Core</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>network namespace</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pollæœºåˆ¶</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>python</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pythonå®æˆ˜</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SVM</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>TensorFlow2</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>u-boot</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>wait_queue_head_t</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>wait_queue_t</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Xmanager</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>äºŒç»´æ•°ç»„</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å­—ç¬¦é©±åŠ¨</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å­˜å‚¨å™¨</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å»–é›ªå³°pythonæ•™ç¨‹</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å¼‚æ­¥é€šçŸ¥æœºåˆ¶</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>å¿«é€Ÿæ’åº</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æŒ‡é’ˆ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æŒ‰é”®é©±åŠ¨</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ•°æ®åˆ†æ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ–‡ä»¶æè¿°ç¬¦</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ ¹æ–‡ä»¶ç³»ç»Ÿ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>æ·±åº¦å­¦ä¹ </a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>çˆ¬è™«</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç­‰å¾…é˜Ÿåˆ—</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç½‘å¡ç§»æ¤</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ç½‘å¡é©±åŠ¨æ¡†æ¶</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è™šæ‹Ÿç½‘å¡</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è®¾å¤‡æ ‘</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è¾“å…¥å­ç³»ç»Ÿ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>è¿œç¨‹é“¾æ¥</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>é©±åŠ¨API</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        <a  class="All äººå·¥æ™ºèƒ½ "
           href="/2020/06/05/SVM/"
           data-tag="SVM"
           data-author="" >
            <span class="post-title" title="SVMï¼ˆçº¿æ€§æ¨¡å‹ï¼‰æ•°å­¦æ¨å¯¼">SVMï¼ˆçº¿æ€§æ¨¡å‹ï¼‰æ•°å­¦æ¨å¯¼</span>
            <span class="post-date" title="2020-06-05 21:12:53">2020/06/05</span>
        </a>
        
        <a  class="All MCU "
           href="/2020/05/16/ESP32/"
           data-tag="ESP32"
           data-author="" >
            <span class="post-title" title="ESP8266">ESP8266</span>
            <span class="post-date" title="2020-05-16 10:30:54">2020/05/16</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2020/05/09/Cå’ŒGOçš„è¯­æ³•å¯¹æ¯”/"
           data-tag="GO"
           data-author="" >
            <span class="post-title" title="Cå’ŒGOçš„è¯­æ³•å¯¹æ¯”">Cå’ŒGOçš„è¯­æ³•å¯¹æ¯”</span>
            <span class="post-date" title="2020-05-09 19:55:39">2020/05/09</span>
        </a>
        
        <a  class="All äººå·¥æ™ºèƒ½ "
           href="/2020/05/03/TensorFlow2/"
           data-tag="TensorFlow2"
           data-author="" >
            <span class="post-title" title="TensorFlow2å…¥é—¨ä¸å®è·µ">TensorFlow2å…¥é—¨ä¸å®è·µ</span>
            <span class="post-date" title="2020-05-03 00:52:53">2020/05/03</span>
        </a>
        
        <a  class="All MCU "
           href="/2020/04/28/ESP8266/"
           data-tag="ESP8266"
           data-author="" >
            <span class="post-title" title="ESP8266">ESP8266</span>
            <span class="post-date" title="2020-04-28 14:27:54">2020/04/28</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/04/06/Linuxé©±åŠ¨å¸¸ç”¨APIæ•´ç†/"
           data-tag="é©±åŠ¨API"
           data-author="" >
            <span class="post-title" title="Linuxé©±åŠ¨å¸¸ç”¨APIæ•´ç†">Linuxé©±åŠ¨å¸¸ç”¨APIæ•´ç†</span>
            <span class="post-date" title="2020-04-06 22:48:09">2020/04/06</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/03/28/Linuxä¸Šå¸¸è§æœåŠ¡æ­å»º/"
           data-tag="LinuxæœåŠ¡"
           data-author="" >
            <span class="post-title" title="Linuxä¸Šå¸¸è§æœåŠ¡æ­å»º">Linuxä¸Šå¸¸è§æœåŠ¡æ­å»º</span>
            <span class="post-date" title="2020-03-28 01:27:58">2020/03/28</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/03/15/kubernetes/"
           data-tag="Kubernetes"
           data-author="" >
            <span class="post-title" title="Kubernetes">Kubernetes</span>
            <span class="post-date" title="2020-03-15 13:48:53">2020/03/15</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2020/03/10/Pythonæ•°æ®åˆ†æä¸å±•ç¤º/"
           data-tag="æ•°æ®åˆ†æ"
           data-author="" >
            <span class="post-title" title="Pythonæ•°æ®åˆ†æä¸å±•ç¤º">Pythonæ•°æ®åˆ†æä¸å±•ç¤º</span>
            <span class="post-date" title="2020-03-10 15:10:50">2020/03/10</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2020/02/18/pythonçˆ¬è™«/"
           data-tag="python,çˆ¬è™«"
           data-author="" >
            <span class="post-title" title="pythonçˆ¬è™«">pythonçˆ¬è™«</span>
            <span class="post-date" title="2020-02-18 23:40:18">2020/02/18</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/02/13/Mininet/"
           data-tag="Mininet"
           data-author="" >
            <span class="post-title" title="Mininet">Mininet</span>
            <span class="post-date" title="2020-02-13 18:37:12">2020/02/13</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/02/10/linux ç½‘ç»œè™šæ‹ŸåŒ–ï¼š network namespace ç®€ä»‹/"
           data-tag="network namespace"
           data-author="" >
            <span class="post-title" title="linux ç½‘ç»œè™šæ‹ŸåŒ–ï¼š network namespace ç®€ä»‹">linux ç½‘ç»œè™šæ‹ŸåŒ–ï¼š network namespace ç®€ä»‹</span>
            <span class="post-date" title="2020-02-10 14:24:09">2020/02/10</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2020/01/29/pythonå®æˆ˜/"
           data-tag="pythonå®æˆ˜"
           data-author="" >
            <span class="post-title" title="pythonå®æˆ˜">pythonå®æˆ˜</span>
            <span class="post-date" title="2020-01-29 21:36:32">2020/01/29</span>
        </a>
        
        <a  class="All Linux "
           href="/2020/01/16/Docker/"
           data-tag="Docker"
           data-author="" >
            <span class="post-title" title="Docker">Docker</span>
            <span class="post-date" title="2020-01-16 20:14:51">2020/01/16</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2020/01/10/python/"
           data-tag="å»–é›ªå³°pythonæ•™ç¨‹"
           data-author="" >
            <span class="post-title" title="Python">Python</span>
            <span class="post-date" title="2020-01-10 20:18:52">2020/01/10</span>
        </a>
        
        <a  class="All äººå·¥æ™ºèƒ½ "
           href="/2020/01/03/æ·±åº¦å­¦ä¹ ä¸TensorFlow2/"
           data-tag="TensorFlow2,æ·±åº¦å­¦ä¹ "
           data-author="" >
            <span class="post-title" title="æ·±åº¦å­¦ä¹ ä¸TensorFlow2">æ·±åº¦å­¦ä¹ ä¸TensorFlow2</span>
            <span class="post-date" title="2020-01-03 21:04:26">2020/01/03</span>
        </a>
        
        <a  class="All MCU "
           href="/2019/11/12/åŸºäºSTM32L476çš„IAPå‡çº§/"
           data-tag="IAP,BootLoader,dual bank"
           data-author="" >
            <span class="post-title" title="åŸºäºSTM32L476çš„IAPå‡çº§">åŸºäºSTM32L476çš„IAPå‡çº§</span>
            <span class="post-date" title="2019-11-12 22:47:40">2019/11/12</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/11/08/Xmanagerè¿œç¨‹Ubuntuç³»ç»Ÿå›¾åƒåŒ–ç•Œé¢/"
           data-tag="Xmanager,è¿œç¨‹é“¾æ¥"
           data-author="" >
            <span class="post-title" title="Xmanagerè¿œç¨‹Ubuntuç³»ç»Ÿå›¾åƒåŒ–ç•Œé¢">Xmanagerè¿œç¨‹Ubuntuç³»ç»Ÿå›¾åƒåŒ–ç•Œé¢</span>
            <span class="post-date" title="2019-11-08 22:58:53">2019/11/08</span>
        </a>
        
        <a  class="All ç¼–ç¨‹è¯­è¨€ "
           href="/2019/10/23/Goè¯­è¨€/"
           data-tag="Goè¯­è¨€å…¥é—¨ç»å…¸"
           data-author="" >
            <span class="post-title" title="Goè¯­è¨€">Goè¯­è¨€</span>
            <span class="post-date" title="2019-10-23 21:07:25">2019/10/23</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/10/18/LiCheePi_Zeroåº•å±‚å¼€å‘/"
           data-tag="LiCheePi Zero"
           data-author="" >
            <span class="post-title" title="LiCheePi_Zeroåº•å±‚å¼€å‘">LiCheePi_Zeroåº•å±‚å¼€å‘</span>
            <span class="post-date" title="2019-10-18 12:25:42">2019/10/18</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/10/18/NanoPi_Neo_Coreåº•å±‚å¼€å‘/"
           data-tag="NanoPi Neo Core"
           data-author="" >
            <span class="post-title" title="NanoPi_Neo_Coreåº•å±‚å¼€å‘">NanoPi_Neo_Coreåº•å±‚å¼€å‘</span>
            <span class="post-date" title="2019-10-18 12:25:42">2019/10/18</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/10/13/è®¾å¤‡æ ‘/"
           data-tag="è®¾å¤‡æ ‘"
           data-author="" >
            <span class="post-title" title="è®¾å¤‡æ ‘">è®¾å¤‡æ ‘</span>
            <span class="post-date" title="2019-10-13 15:53:24">2019/10/13</span>
        </a>
        
        <a  class="All å·¥å…· "
           href="/2019/09/17/markdownlintè§„åˆ™è¯¦ç»†ä»‹ç»/"
           data-tag="markdownlint"
           data-author="" >
            <span class="post-title" title="VSCæ’ä»¶ä¹‹markdownlintè§„åˆ™è¯¦ç»†ä»‹ç»">VSCæ’ä»¶ä¹‹markdownlintè§„åˆ™è¯¦ç»†ä»‹ç»</span>
            <span class="post-date" title="2019-09-17 15:00:13">2019/09/17</span>
        </a>
        
        <a  class="All å·¥å…· "
           href="/2019/09/17/git/"
           data-tag="git"
           data-author="" >
            <span class="post-title" title="git">git</span>
            <span class="post-date" title="2019-09-17 09:59:56">2019/09/17</span>
        </a>
        
        <a  class="All å·¥å…· "
           href="/2019/08/19/Latexæ’ç‰ˆå…¨è§£/"
           data-tag="Latex,Ctex"
           data-author="" >
            <span class="post-title" title="Latexæ’ç‰ˆå…¨è§£">Latexæ’ç‰ˆå…¨è§£</span>
            <span class="post-date" title="2019-08-19 16:02:27">2019/08/19</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/15/Kconfigæ–‡ä»¶è¯­æ³•åˆ†æ/"
           data-tag="Kconfigè¯­æ³•"
           data-author="" >
            <span class="post-title" title="Kconfigæ–‡ä»¶è¯­æ³•åˆ†æ">Kconfigæ–‡ä»¶è¯­æ³•åˆ†æ</span>
            <span class="post-date" title="2019-08-15 19:38:40">2019/08/15</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/14/æ„é€ æ ¹æ–‡ä»¶ç³»ç»Ÿ/"
           data-tag="æ ¹æ–‡ä»¶ç³»ç»Ÿ"
           data-author="" >
            <span class="post-title" title="æ„é€ æ ¹æ–‡ä»¶ç³»ç»Ÿ">æ„é€ æ ¹æ–‡ä»¶ç³»ç»Ÿ</span>
            <span class="post-date" title="2019-08-14 20:18:45">2019/08/14</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/13/Linuxå†…æ ¸å¯åŠ¨æµç¨‹/"
           data-tag="Linuxå†…æ ¸"
           data-author="" >
            <span class="post-title" title="Linuxå†…æ ¸å¯åŠ¨æµç¨‹">Linuxå†…æ ¸å¯åŠ¨æµç¨‹</span>
            <span class="post-date" title="2019-08-13 16:13:46">2019/08/13</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/12/u-bootåˆ†æä¸ä½¿ç”¨/"
           data-tag="u-boot"
           data-author="" >
            <span class="post-title" title="u-bootåˆ†æä¸ä½¿ç”¨">u-bootåˆ†æä¸ä½¿ç”¨</span>
            <span class="post-date" title="2019-08-12 19:16:50">2019/08/12</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/12/u-bootåˆ†æä¸ä½¿ç”¨/u-bootåˆ†æä¸ä½¿ç”¨ - è€ç‰ˆæœ¬å¤‡ä»½/"
           data-tag="u-boot"
           data-author="" >
            <span class="post-title" title="u-bootåˆ†æä¸ä½¿ç”¨">u-bootåˆ†æä¸ä½¿ç”¨</span>
            <span class="post-date" title="2019-08-12 19:16:50">2019/08/12</span>
        </a>
        
        <a  class="All æ„Ÿæ‚Ÿä¸æ€»ç»“ "
           href="/2019/08/11/å„ç§å­˜å‚¨å™¨çš„åŒºåˆ«/"
           data-tag="å­˜å‚¨å™¨"
           data-author="" >
            <span class="post-title" title="å„ç§å­˜å‚¨å™¨çš„åŒºåˆ«">å„ç§å­˜å‚¨å™¨çš„åŒºåˆ«</span>
            <span class="post-date" title="2019-08-11 10:57:19">2019/08/11</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/07/RTCé©±åŠ¨åˆ†æ/"
           data-tag="å­—ç¬¦é©±åŠ¨"
           data-author="" >
            <span class="post-title" title="RTCé©±åŠ¨åˆ†æ">RTCé©±åŠ¨åˆ†æ</span>
            <span class="post-date" title="2019-08-07 13:37:33">2019/08/07</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/07/å­—ç¬¦é©±åŠ¨è®¾å¤‡çš„å¦ä¸€ç§å†™æ³•/"
           data-tag="å­—ç¬¦é©±åŠ¨"
           data-author="" >
            <span class="post-title" title="å­—ç¬¦é©±åŠ¨è®¾å¤‡çš„å¦ä¸€ç§å†™æ³•">å­—ç¬¦é©±åŠ¨è®¾å¤‡çš„å¦ä¸€ç§å†™æ³•</span>
            <span class="post-date" title="2019-08-07 12:20:30">2019/08/07</span>
        </a>
        
        <a  class="All æ„Ÿæ‚Ÿä¸æ€»ç»“ "
           href="/2019/08/06/äºŒç»´æ•°ç»„ä¸æŒ‡é’ˆçš„ä¸€äº›é—®é¢˜/"
           data-tag="äºŒç»´æ•°ç»„,æŒ‡é’ˆ"
           data-author="" >
            <span class="post-title" title="äºŒç»´æ•°ç»„ä¸æŒ‡é’ˆçš„ä¸€äº›é—®é¢˜">äºŒç»´æ•°ç»„ä¸æŒ‡é’ˆçš„ä¸€äº›é—®é¢˜</span>
            <span class="post-date" title="2019-08-06 13:11:26">2019/08/06</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/05/IICé©±åŠ¨/"
           data-tag="IICé©±åŠ¨"
           data-author="" >
            <span class="post-title" title="IICé©±åŠ¨">IICé©±åŠ¨</span>
            <span class="post-date" title="2019-08-05 14:39:10">2019/08/05</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/04/DM9000Cç½‘å¡ç§»æ¤/"
           data-tag="DM9000C,ç½‘å¡ç§»æ¤"
           data-author="" >
            <span class="post-title" title="DM9000Cç½‘å¡ç§»æ¤">DM9000Cç½‘å¡ç§»æ¤</span>
            <span class="post-date" title="2019-08-04 23:07:22">2019/08/04</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/08/04/ç½‘å¡é©±åŠ¨ç¨‹åº/"
           data-tag="ç½‘å¡é©±åŠ¨æ¡†æ¶,è™šæ‹Ÿç½‘å¡"
           data-author="" >
            <span class="post-title" title="ç½‘å¡é©±åŠ¨ç¨‹åº">ç½‘å¡é©±åŠ¨ç¨‹åº</span>
            <span class="post-date" title="2019-08-04 21:24:07">2019/08/04</span>
        </a>
        
        <a  class="All ç®—æ³• "
           href="/2019/07/29/å¿«é€Ÿæ’åº/"
           data-tag="å¿«é€Ÿæ’åº"
           data-author="" >
            <span class="post-title" title="å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº</span>
            <span class="post-date" title="2019-07-29 22:27:34">2019/07/29</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/07/25/è¾“å…¥å­ç³»ç»Ÿ/"
           data-tag="æŒ‰é”®é©±åŠ¨,è¾“å…¥å­ç³»ç»Ÿ"
           data-author="" >
            <span class="post-title" title="è¾“å…¥å­ç³»ç»Ÿ">è¾“å…¥å­ç³»ç»Ÿ</span>
            <span class="post-date" title="2019-07-25 00:05:15">2019/07/25</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/07/22/æŒ‰é”®é©±åŠ¨ï¼šå¼‚æ­¥é€šçŸ¥æœºåˆ¶/"
           data-tag="æŒ‰é”®é©±åŠ¨,å¼‚æ­¥é€šçŸ¥æœºåˆ¶"
           data-author="" >
            <span class="post-title" title="æŒ‰é”®é©±åŠ¨ï¼šå¼‚æ­¥é€šçŸ¥æœºåˆ¶">æŒ‰é”®é©±åŠ¨ï¼šå¼‚æ­¥é€šçŸ¥æœºåˆ¶</span>
            <span class="post-date" title="2019-07-22 19:04:24">2019/07/22</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/07/21/æŒ‰é”®é©±åŠ¨â€”â€”pollæœºåˆ¶/"
           data-tag="æŒ‰é”®é©±åŠ¨,pollæœºåˆ¶"
           data-author="" >
            <span class="post-title" title="æŒ‰é”®é©±åŠ¨â€”â€”pollæœºåˆ¶">æŒ‰é”®é©±åŠ¨â€”â€”pollæœºåˆ¶</span>
            <span class="post-date" title="2019-07-21 20:30:38">2019/07/21</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/07/21/linuxç­‰å¾…é˜Ÿåˆ—wait_queue_head_tå’Œwait_queue_t/"
           data-tag="ç­‰å¾…é˜Ÿåˆ—,wait_queue_head_t,wait_queue_t"
           data-author="" >
            <span class="post-title" title="linuxç­‰å¾…é˜Ÿåˆ—wait_queue_head_tå’Œwait_queue_t">linuxç­‰å¾…é˜Ÿåˆ—wait_queue_head_tå’Œwait_queue_t</span>
            <span class="post-date" title="2019-07-21 18:18:54">2019/07/21</span>
        </a>
        
        <a  class="All Linux "
           href="/2019/07/21/Linuxç¼–ç¨‹--æ–‡ä»¶æè¿°ç¬¦fd/"
           data-tag="æ–‡ä»¶æè¿°ç¬¦"
           data-author="" >
            <span class="post-title" title="Linuxç¼–ç¨‹--æ–‡ä»¶æè¿°ç¬¦fd">Linuxç¼–ç¨‹--æ–‡ä»¶æè¿°ç¬¦fd</span>
            <span class="post-date" title="2019-07-21 10:13:47">2019/07/21</span>
        </a>
        
        <a  class="All å·¥å…· "
           href="/2019/07/12/Markdown è¯­æ³•æ•´ç†/"
           data-tag="Markdown"
           data-author="" >
            <span class="post-title" title="Markdown è¯­æ³•æ•´ç†">Markdown è¯­æ³•æ•´ç†</span>
            <span class="post-date" title="2019-07-12 13:57:24">2019/07/12</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-NanoPi_Neo_Coreåº•å±‚å¼€å‘" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">NanoPi_Neo_Coreåº•å±‚å¼€å‘</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="Linux">Linux</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color1">NanoPi Neo Core</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2019-10-25 16:27:49'>2019-10-18 12:25</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:6.7k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#NanoPi-Neo-Coreåº•å±‚å¼€å‘"><span class="toc-text">NanoPi Neo Coreåº•å±‚å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸€ã€ç¼–è¯‘ä¸‹è½½é•œåƒ"><span class="toc-text">ä¸€ã€ç¼–è¯‘ä¸‹è½½é•œåƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ç¼–è¯‘"><span class="toc-text">1. ç¼–è¯‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1ç¼–è¯‘uboot"><span class="toc-text">1.1ç¼–è¯‘uboot</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2ç¼–è¯‘Linuxå†…æ ¸"><span class="toc-text">1.2ç¼–è¯‘Linuxå†…æ ¸</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#å•ç‹¬ç¼–è¯‘è®¾å¤‡æ ‘"><span class="toc-text">å•ç‹¬ç¼–è¯‘è®¾å¤‡æ ‘</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#åç¼–è¯‘è®¾å¤‡æ ‘"><span class="toc-text">åç¼–è¯‘è®¾å¤‡æ ‘</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3ç¼–è¯‘æ ¹æ–‡ä»¶ç³»ç»Ÿ"><span class="toc-text">1.3ç¼–è¯‘æ ¹æ–‡ä»¶ç³»ç»Ÿ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ä¸‹è½½"><span class="toc-text">2. ä¸‹è½½</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1ç”Ÿæˆimgé•œåƒ"><span class="toc-text">2.1ç”Ÿæˆimgé•œåƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ç”ŸæˆSDå¡çš„imgé•œåƒ"><span class="toc-text">ç”ŸæˆSDå¡çš„imgé•œåƒ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#çƒ§å½•imgé•œåƒåˆ°SDå¡"><span class="toc-text">çƒ§å½•imgé•œåƒåˆ°SDå¡</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2ç›´æ¥çƒ§å½•"><span class="toc-text">2.2ç›´æ¥çƒ§å½•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-åˆ†åŒºæƒ…å†µ"><span class="toc-text">3.åˆ†åŒºæƒ…å†µ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1è‡ªå·±åˆ›å»ºimgé•œåƒæ–‡ä»¶"><span class="toc-text">3.1è‡ªå·±åˆ›å»ºimgé•œåƒæ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ddå‘½ä»¤è¯¦è§£"><span class="toc-text">ddå‘½ä»¤è¯¦è§£</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#dev-nullå’Œ-dev-zeroçš„åŒºåˆ«"><span class="toc-text">/dev/nullå’Œ/dev/zeroçš„åŒºåˆ«</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#äºŒã€å¼€å‘ç¯å¢ƒæ­å»º"><span class="toc-text">äºŒã€å¼€å‘ç¯å¢ƒæ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½¿ç”¨å®˜æ–¹æä¾›ubuntucoreæ–‡ä»¶ç³»ç»Ÿ"><span class="toc-text">ä½¿ç”¨å®˜æ–¹æä¾›ubuntucoreæ–‡ä»¶ç³»ç»Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è‡ªå·±åˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ"><span class="toc-text">è‡ªå·±åˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#æ‰“åŒ…æˆimgé•œåƒ"><span class="toc-text">æ‰“åŒ…æˆimgé•œåƒ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸‰ã€é©±åŠ¨ç¼–å†™"><span class="toc-text">ä¸‰ã€é©±åŠ¨ç¼–å†™</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å†™åœ¨å‰é¢"><span class="toc-text">å†™åœ¨å‰é¢</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#å†…æ ¸ç‰ˆæœ¬æŸ¥çœ‹æ–¹æ³•"><span class="toc-text">å†…æ ¸ç‰ˆæœ¬æŸ¥çœ‹æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æŒ‚è½½pcä¸Šæ–‡ä»¶ç³»ç»Ÿ"><span class="toc-text">æŒ‚è½½pcä¸Šæ–‡ä»¶ç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ä¸€é”®æŒ‚è½½è„šæœ¬"><span class="toc-text">ä¸€é”®æŒ‚è½½è„šæœ¬</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#å¸è½½è„šæœ¬"><span class="toc-text">å¸è½½è„šæœ¬</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ›´æ¢æº"><span class="toc-text">æ›´æ¢æº</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-æŒ‰é”®é©±åŠ¨ç¨‹åº"><span class="toc-text">1.æŒ‰é”®é©±åŠ¨ç¨‹åº</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1ä¿®æ”¹è®¾å¤‡æ ‘"><span class="toc-text">1.1ä¿®æ”¹è®¾å¤‡æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ç¼–è¯‘è®¾å¤‡æ ‘"><span class="toc-text">ç¼–è¯‘è®¾å¤‡æ ‘</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹"><span class="toc-text">æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#è®¾å¤‡æ ‘ä¸­çš„GPIOèŠ‚ç‚¹"><span class="toc-text">è®¾å¤‡æ ‘ä¸­çš„GPIOèŠ‚ç‚¹</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2ç¼–å†™é©±åŠ¨"><span class="toc-text">1.2ç¼–å†™é©±åŠ¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-1æ£€æŸ¥æ³¨å†Œçš„é©±åŠ¨"><span class="toc-text">1.2.1æ£€æŸ¥æ³¨å†Œçš„é©±åŠ¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-2gpiolibåŠgpioæ“ä½œ"><span class="toc-text">1.2.2gpiolibåŠgpioæ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#ç»å…¸æ¥å£"><span class="toc-text">ç»å…¸æ¥å£</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#æ–°æ¥å£"><span class="toc-text">æ–°æ¥å£</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#è¯»å†™gpio"><span class="toc-text">è¯»å†™gpio</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#æ§åˆ¶å°ä¸­æŸ¥çœ‹å½“å‰gpioå ç”¨æƒ…å†µçš„æ–¹æ³•"><span class="toc-text">æ§åˆ¶å°ä¸­æŸ¥çœ‹å½“å‰gpioå ç”¨æƒ…å†µçš„æ–¹æ³•</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3è°ƒè¯•"><span class="toc-text">1.3è°ƒè¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#printk"><span class="toc-text">printk</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#åå°è¿è¡Œ"><span class="toc-text">åå°è¿è¡Œ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-å†…æ ¸å®šæ—¶å™¨"><span class="toc-text">2.å†…æ ¸å®šæ—¶å™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-ä¸­æ–­"><span class="toc-text">3.ä¸­æ–­</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ä¸ŠåŠéƒ¨å’Œä¸‹åŠéƒ¨"><span class="toc-text">ä¸ŠåŠéƒ¨å’Œä¸‹åŠéƒ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1ä¿®æ”¹è®¾å¤‡æ ‘"><span class="toc-text">3.1ä¿®æ”¹è®¾å¤‡æ ‘</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ç›¸å…³å‡½æ•°"><span class="toc-text">ç›¸å…³å‡½æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ç¼–è¯‘è®¾å¤‡æ ‘-1"><span class="toc-text">ç¼–è¯‘è®¾å¤‡æ ‘</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹-1"><span class="toc-text">æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#è®¾å¤‡æ ‘ä¸­çš„ä¸­æ–­èŠ‚ç‚¹"><span class="toc-text">è®¾å¤‡æ ‘ä¸­çš„ä¸­æ–­èŠ‚ç‚¹</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2ç¼–å†™é©±åŠ¨"><span class="toc-text">3.2ç¼–å†™é©±åŠ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3è°ƒè¯•"><span class="toc-text">3.3è°ƒè¯•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-inputå­ç³»ç»Ÿ"><span class="toc-text">4.inputå­ç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1ä¿®æ”¹è®¾å¤‡æ ‘"><span class="toc-text">4.1ä¿®æ”¹è®¾å¤‡æ ‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2ç¼–å†™é©±åŠ¨"><span class="toc-text">4.2ç¼–å†™é©±åŠ¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ç›¸å…³å‡½æ•°-1"><span class="toc-text">ç›¸å…³å‡½æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#input-devçš„ç›¸å…³äº‹ä»¶"><span class="toc-text">input_devçš„ç›¸å…³äº‹ä»¶</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3è°ƒè¯•"><span class="toc-text">4.3è°ƒè¯•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-IICæ¡†æ¶é©±åŠ¨"><span class="toc-text">5.IICæ¡†æ¶é©±åŠ¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1è®¾å¤‡æ ‘"><span class="toc-text">5.1è®¾å¤‡æ ‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2é©±åŠ¨"><span class="toc-text">5.2é©±åŠ¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#åŸºæœ¬æ•°æ®ç»“æ„"><span class="toc-text">åŸºæœ¬æ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ç›¸å…³å‡½æ•°-2"><span class="toc-text">ç›¸å…³å‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3è°ƒè¯•"><span class="toc-text">5.3è°ƒè¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#i2c-toolså·¥å…·"><span class="toc-text">i2c-toolså·¥å…·</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-SPIæ¡†æ¶é©±åŠ¨"><span class="toc-text">6.SPIæ¡†æ¶é©±åŠ¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1è®¾å¤‡æ ‘"><span class="toc-text">6.1è®¾å¤‡æ ‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2é©±åŠ¨"><span class="toc-text">6.2é©±åŠ¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#åŸºæœ¬æ•°æ®ç»“æ„-1"><span class="toc-text">åŸºæœ¬æ•°æ®ç»“æ„</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ç›¸å…³å‡½æ•°-3"><span class="toc-text">ç›¸å…³å‡½æ•°</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3è°ƒè¯•"><span class="toc-text">6.3è°ƒè¯•</span></a></li></ol></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-6 i,
    .toc-level-6 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="NanoPi-Neo-Coreåº•å±‚å¼€å‘"><a href="#NanoPi-Neo-Coreåº•å±‚å¼€å‘" class="headerlink" title="NanoPi Neo Coreåº•å±‚å¼€å‘"></a>NanoPi Neo Coreåº•å±‚å¼€å‘</h1><h2 id="ä¸€ã€ç¼–è¯‘ä¸‹è½½é•œåƒ"><a href="#ä¸€ã€ç¼–è¯‘ä¸‹è½½é•œåƒ" class="headerlink" title="ä¸€ã€ç¼–è¯‘ä¸‹è½½é•œåƒ"></a>ä¸€ã€ç¼–è¯‘ä¸‹è½½é•œåƒ</h2><p>å„ä¸ªéƒ¨åˆ†ç¼–è¯‘åçš„æ–‡ä»¶éƒ½åœ¨å¯¹åº”çš„æ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚ç¼–è¯‘friendlycore-xenial_4.14_armhfç³»ç»Ÿï¼Œå¯¹åº”çš„å„ä¸ªé•œåƒå°±éƒ½åœ¨<code>friendlycore-xenial_4.14_armhf</code>æ–‡ä»¶å¤¹ä¸­</p>
<p>æœ€åç”Ÿæˆçš„imgæ–‡ä»¶ä¼šåœ¨<code>out</code>æ–‡ä»¶å¤¹ä¸­</p>
<h3 id="1-ç¼–è¯‘"><a href="#1-ç¼–è¯‘" class="headerlink" title="1. ç¼–è¯‘"></a>1. ç¼–è¯‘</h3><h4 id="1-1ç¼–è¯‘uboot"><a href="#1-1ç¼–è¯‘uboot" class="headerlink" title="1.1ç¼–è¯‘uboot"></a>1.1ç¼–è¯‘uboot</h4><pre><code class="bash">UBOOT_SRC=../UBOOT/u-boot-sunxi-v2017.x ./build-uboot.sh friendlywrt_4.14_armhf</code></pre>
<h4 id="1-2ç¼–è¯‘Linuxå†…æ ¸"><a href="#1-2ç¼–è¯‘Linuxå†…æ ¸" class="headerlink" title="1.2ç¼–è¯‘Linuxå†…æ ¸"></a>1.2ç¼–è¯‘Linuxå†…æ ¸</h4><pre><code class="bash">KERNEL_SRC=../LINUX/linux-sunxi-4.14.y ./build-kernel.sh friendlycore-xenial_4.14_armhf</code></pre>
<p>ç¼–è¯‘å†…æ ¸æ—¶ä¼šè‡ªåŠ¨ç¼–è¯‘è®¾å¤‡æ ‘ï¼Œå¦‚æœæƒ³é‡æ–°å•ç‹¬ç¼–è¯‘è®¾å¤‡æ ‘ï¼Œåˆ™æœ‰ï¼š</p>
<h5 id="å•ç‹¬ç¼–è¯‘è®¾å¤‡æ ‘"><a href="#å•ç‹¬ç¼–è¯‘è®¾å¤‡æ ‘" class="headerlink" title="å•ç‹¬ç¼–è¯‘è®¾å¤‡æ ‘"></a>å•ç‹¬ç¼–è¯‘è®¾å¤‡æ ‘</h5><pre><code class="bash">make distclean
touch .scmversion
make ARCH=arm sunxi_defconfig
make dtbs ARCH=arm CROSS_COMPILE=arm-linux- -j8</code></pre>
<h5 id="åç¼–è¯‘è®¾å¤‡æ ‘"><a href="#åç¼–è¯‘è®¾å¤‡æ ‘" class="headerlink" title="åç¼–è¯‘è®¾å¤‡æ ‘"></a>åç¼–è¯‘è®¾å¤‡æ ‘</h5><pre><code class="bash">./scripts/dtc/dtc -I dtb -O dts -o ../sun8i-h3-nanopi-neo-core.dts ./arch/arm/boot/dts/sun8i-h3-nanopi-neo-core.dtb</code></pre>
<h4 id="1-3ç¼–è¯‘æ ¹æ–‡ä»¶ç³»ç»Ÿ"><a href="#1-3ç¼–è¯‘æ ¹æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="1.3ç¼–è¯‘æ ¹æ–‡ä»¶ç³»ç»Ÿ"></a>1.3ç¼–è¯‘æ ¹æ–‡ä»¶ç³»ç»Ÿ</h4><pre><code class="bash">echo hello &gt; friendlycore-xenial_4.14_armhf/rootfs/root/welcome.txt
./build-rootfs-img.sh friendlycore-xenial_4.14_armhf/rootfs friendlycore-xenial_4.14_armhf</code></pre>
<h3 id="2-ä¸‹è½½"><a href="#2-ä¸‹è½½" class="headerlink" title="2. ä¸‹è½½"></a>2. ä¸‹è½½</h3><h4 id="2-1ç”Ÿæˆimgé•œåƒ"><a href="#2-1ç”Ÿæˆimgé•œåƒ" class="headerlink" title="2.1ç”Ÿæˆimgé•œåƒ"></a>2.1ç”Ÿæˆimgé•œåƒ</h4><h5 id="ç”ŸæˆSDå¡çš„imgé•œåƒ"><a href="#ç”ŸæˆSDå¡çš„imgé•œåƒ" class="headerlink" title="ç”ŸæˆSDå¡çš„imgé•œåƒ"></a>ç”ŸæˆSDå¡çš„imgé•œåƒ</h5><pre><code class="bash">sudo ./mk-sd-image.sh friendlycore-xenial_4.14_armhf [h3-sd-friendlycore.img(é•œåƒåå­—ï¼Œé»˜è®¤æŒ‰ç…§æ—¶é—´å‘½å)]</code></pre>
<h5 id="çƒ§å½•imgé•œåƒåˆ°SDå¡"><a href="#çƒ§å½•imgé•œåƒåˆ°SDå¡" class="headerlink" title="çƒ§å½•imgé•œåƒåˆ°SDå¡"></a>çƒ§å½•imgé•œåƒåˆ°SDå¡</h5><pre><code class="bash">sudo dd if=out/h3-sd-friendlycore.img bs=1M of=/dev/sdX</code></pre>
<h4 id="2-2ç›´æ¥çƒ§å½•"><a href="#2-2ç›´æ¥çƒ§å½•" class="headerlink" title="2.2ç›´æ¥çƒ§å½•"></a>2.2ç›´æ¥çƒ§å½•</h4><pre><code class="bash">sudo ./fusing.sh /dev/sdX friendlycore-xenial_4.14_armhf</code></pre>
<h3 id="3-åˆ†åŒºæƒ…å†µ"><a href="#3-åˆ†åŒºæƒ…å†µ" class="headerlink" title="3.åˆ†åŒºæƒ…å†µ"></a>3.åˆ†åŒºæƒ…å†µ</h3><table>
<thead>
<tr>
<th>åˆ†åŒºåå­—</th>
<th>æ–‡ä»¶ç³»ç»Ÿ</th>
<th>èµ·å§‹åœ°å€</th>
<th>é•¿åº¦</th>
<th>é•œåƒåå­—</th>
<th>å†…å®¹</th>
</tr>
</thead>
<tbody><tr>
<td>boot0</td>
<td>raw</td>
<td>0x2000</td>
<td>0x17FE000(24M-8k)</td>
<td>u-boot-sunxi-with-spl.bin</td>
<td>uboot</td>
</tr>
<tr>
<td>boot</td>
<td>fat</td>
<td>0x1800000</td>
<td>0x2800000(40M)</td>
<td>boot.img</td>
<td>kernel(zImage)+dtb</td>
</tr>
<tr>
<td>rootfs</td>
<td>ext4</td>
<td>0x4000000</td>
<td>0x48400000(1156M)</td>
<td>rootfs.img</td>
<td>æ ¹æ–‡ä»¶ç³»ç»Ÿ</td>
</tr>
<tr>
<td>userdata</td>
<td>ext4</td>
<td>0x4c400000</td>
<td>0x0</td>
<td>userdata.img</td>
<td></td>
</tr>
</tbody></table>
<h4 id="3-1è‡ªå·±åˆ›å»ºimgé•œåƒæ–‡ä»¶"><a href="#3-1è‡ªå·±åˆ›å»ºimgé•œåƒæ–‡ä»¶" class="headerlink" title="3.1è‡ªå·±åˆ›å»ºimgé•œåƒæ–‡ä»¶"></a>3.1è‡ªå·±åˆ›å»ºimgé•œåƒæ–‡ä»¶</h4><pre><code class="bash">dd if=/dev/zero of=é•œåƒæ–‡ä»¶ bs=1024 count=0 seek=é•œåƒå¤§å°#å•ä½ï¼škï¼Œuboot+kernel(zImage)+dtb+rootfs=1220Mï¼Œè„šæœ¬ä¸­é»˜è®¤(7800*1000*1000)/1024

#sfdisk ï¼š æŸ¥çœ‹åˆ†åŒºä¿¡æ¯
#å°†MBRæ‰‡åŒºç­¾åå†™å…¥åˆ°é•œåƒ
sfdisk -u S -L -q é•œåƒæ–‡ä»¶ 2&gt;/dev/null &lt;&lt; EOF
2048,,0x0C,-
EOF

# æ‰¾åˆ°ä¸€ä¸ªloopè®¾å¤‡
losetup -f
# å°†é•œåƒæ–‡ä»¶è™šæ‹Ÿæˆå—è®¾å¤‡
sudo losetup æ‰¾åˆ°çš„loopè®¾å¤‡ é•œåƒæ–‡ä»¶#eg: losetup /dev/loop1 floppy.img

# åˆ©ç”¨å‹å–„ä¹‹è‡‚çš„å·¥å…·sd_updateï¼Œå°†åˆ†åŒºè¡¨åŒç›®å½•ä¸‹çš„uboot.binã€boot.imgã€rootfs.imgã€userdata.imgæ‹·è´åˆ°loopè®¾å¤‡ä¸­å¹¶ç”Ÿæˆimgé•œåƒ
sudo ./tools/sd_update -d æ‰¾åˆ°çš„loopè®¾å¤‡ -p ./friendlycore-xenial_4.14_armhf/partmap.txt(åˆ†åŒºè¡¨)
# è¯»å– æ‰¾åˆ°çš„loopè®¾å¤‡ åˆ†åŒºä¿¡æ¯
sudo partprobe æ‰¾åˆ°çš„loopè®¾å¤‡ -s 2&gt;/dev/null
# è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°ï¼Œè¿™é‡Œæ˜¯p3ï¼Œæ„ä¸ºç¬¬ä¸‰ä¸ªåˆ†åŒºï¼Œå³userdataåˆ†åŒº
sudo resize2fs -f æ‰¾åˆ°çš„loopè®¾å¤‡p3;

# å¸è½½loopè®¾å¤‡
sudo losetup -d æ‰¾åˆ°çš„loopè®¾å¤‡</code></pre>
<p>ä¾‹å­ï¼š</p>
<pre><code class="bash">dd if=/dev/zero of=out/busyboxflash.img bs=1024 count=0 seek=1331200#1331200k -&gt; 1300M ==&gt; ç•™ç»™userdata 80Mï¼Œä¿®æ”¹partmap.txtä¸­userdataå¤§å°ä¸º0x500 0000
# å®æµ‹è²Œä¼¼æœ€å°‘éœ€è¦8Gæ‰èƒ½ç”¨ubuntucoreæ–‡ä»¶ç³»ç»Ÿ


#sfdisk ï¼š æŸ¥çœ‹åˆ†åŒºä¿¡æ¯
#å°†MBRæ‰‡åŒºç­¾åå†™å…¥åˆ°é•œåƒ
sfdisk -u S -L -q out/busyboxflash.img 2&gt;/dev/null &lt;&lt; EOF
2048,,0x0C,-
EOF

# æ‰¾åˆ°ä¸€ä¸ªloopè®¾å¤‡
losetup -f
# å°†é•œåƒæ–‡ä»¶è™šæ‹Ÿæˆå—è®¾å¤‡
sudo losetup /dev/loop17 out/busyboxflash.img
# åˆ©ç”¨å‹å–„ä¹‹è‡‚çš„å·¥å…·sd_updateï¼Œå°†åˆ†åŒºè¡¨åŒç›®å½•ä¸‹çš„uboot.binã€boot.imgã€rootfs.imgã€userdata.imgæ‹·è´åˆ°loopè®¾å¤‡ä¸­å¹¶ç”Ÿæˆimgé•œåƒ
sudo ./tools/sd_update -d /dev/loop17 -p ./friendlycore-xenial_4.14_armhf/partmap.txt(åˆ†åŒºè¡¨)
# è¯»å–/dev/loop17åˆ†åŒºä¿¡æ¯
sudo partprobe /dev/loop17 -s 2&gt;/dev/null
# è°ƒæ•´æ–‡ä»¶ç³»ç»Ÿçš„å¤§å°ï¼Œè¿™é‡Œæ˜¯p3ï¼Œæ„ä¸ºç¬¬ä¸‰ä¸ªåˆ†åŒºï¼Œå³userdataåˆ†åŒº
sudo resize2fs -f /dev/loop17p3;

# å¸è½½loopè®¾å¤‡
sudo losetup -d /dev/loop17</code></pre>
<h5 id="ddå‘½ä»¤è¯¦è§£"><a href="#ddå‘½ä»¤è¯¦è§£" class="headerlink" title="ddå‘½ä»¤è¯¦è§£"></a>ddå‘½ä»¤è¯¦è§£</h5><p> ddï¼šç”¨æŒ‡å®šå¤§å°çš„å—æ‹·è´ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶åœ¨æ‹·è´çš„åŒæ—¶è¿›è¡ŒæŒ‡å®šçš„è½¬æ¢ã€‚ </p>
<ul>
<li><code>if</code>=æ–‡ä»¶åï¼šè¾“å…¥æ–‡ä»¶åï¼Œç¼ºçœä¸ºæ ‡å‡†è¾“å…¥ã€‚å³æŒ‡å®šæºæ–‡ä»¶ã€‚&lt;if=inputfile&gt;</li>
<li><code>of</code>=æ–‡ä»¶åï¼šè¾“å‡ºæ–‡ä»¶åï¼Œç¼ºçœä¸ºæ ‡å‡†è¾“å‡ºã€‚å³æŒ‡å®šç›®çš„æ–‡ä»¶ã€‚&lt; of=output file &gt;</li>
<li>ibs=bytesï¼šä¸€æ¬¡è¯»å…¥bytesä¸ªå­—èŠ‚ï¼Œå³æŒ‡å®šä¸€ä¸ªå—å¤§å°ä¸ºbytesä¸ªå­—èŠ‚ã€‚<br>  obs=bytesï¼šä¸€æ¬¡è¾“å‡ºbytesä¸ªå­—èŠ‚ï¼Œå³æŒ‡å®šä¸€ä¸ªå—å¤§å°ä¸ºbytesä¸ªå­—èŠ‚ã€‚<br>  <code>bs</code>=bytesï¼šåŒæ—¶è®¾ç½®è¯»å…¥/è¾“å‡ºçš„å—å¤§å°ä¸ºbytesä¸ªå­—èŠ‚ã€‚</li>
<li>cbs=bytesï¼šä¸€æ¬¡è½¬æ¢bytesä¸ªå­—èŠ‚ï¼Œå³æŒ‡å®šè½¬æ¢ç¼“å†²åŒºå¤§å°ã€‚</li>
<li>skip=blocksï¼šä»è¾“å…¥æ–‡ä»¶å¼€å¤´è·³è¿‡blocksä¸ªå—åå†å¼€å§‹å¤åˆ¶ã€‚</li>
<li><code>seek</code>=blocksï¼šä»è¾“å‡ºæ–‡ä»¶å¼€å¤´è·³è¿‡blocksä¸ªå—åå†å¼€å§‹å¤åˆ¶ã€‚<br>  ï¼ˆæ³¨æ„ï¼šé€šå¸¸åªç”¨å½“è¾“å‡ºæ–‡ä»¶æ˜¯ç£ç›˜æˆ–ç£å¸¦æ—¶æ‰æœ‰æ•ˆï¼Œå³å¤‡ä»½åˆ°ç£ç›˜æˆ–ç£å¸¦æ—¶æ‰æœ‰æ•ˆã€‚</li>
<li><code>count</code>=blocksï¼šä»…æ‹·è´blocksä¸ªå—ï¼Œå—å¤§å°ç­‰äºibsæŒ‡å®šçš„å­—èŠ‚æ•°ã€‚</li>
<li>conv=conversionï¼šç”¨æŒ‡å®šçš„å‚æ•°è½¬æ¢æ–‡ä»¶ã€‚<ul>
<li>asciiï¼šè½¬æ¢ebcdicä¸ºascii</li>
<li>ebcdicï¼šè½¬æ¢asciiä¸ºebcdic</li>
<li>ibmï¼šè½¬æ¢asciiä¸ºalternateebcdic</li>
<li>blockï¼šæŠŠæ¯ä¸€è¡Œè½¬æ¢ä¸ºé•¿åº¦ä¸ºcbsï¼Œä¸è¶³éƒ¨åˆ†ç”¨ç©ºæ ¼å¡«å……</li>
<li>unblockï¼šä½¿æ¯ä¸€è¡Œçš„é•¿åº¦éƒ½ä¸ºcbsï¼Œä¸è¶³éƒ¨åˆ†ç”¨ç©ºæ ¼å¡«å……</li>
<li>lcaseï¼šæŠŠå¤§å†™å­—ç¬¦è½¬æ¢ä¸ºå°å†™å­—ç¬¦</li>
<li>ucaseï¼šæŠŠå°å†™å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™å­—ç¬¦</li>
<li>swabï¼šäº¤æ¢è¾“å…¥çš„æ¯å¯¹å­—èŠ‚</li>
<li>noerrorï¼šå‡ºé”™æ—¶ä¸åœæ­¢</li>
<li>notruncï¼šä¸æˆªçŸ­è¾“å‡ºæ–‡ä»¶</li>
<li>syncï¼šå°†æ¯ä¸ªè¾“å…¥å—å¡«å……åˆ°ibsä¸ªå­—èŠ‚ï¼Œä¸è¶³éƒ¨åˆ†ç”¨ç©ºï¼ˆNULï¼‰å­—ç¬¦è¡¥é½ã€‚</li>
</ul>
</li>
</ul>
<h5 id="dev-nullå’Œ-dev-zeroçš„åŒºåˆ«"><a href="#dev-nullå’Œ-dev-zeroçš„åŒºåˆ«" class="headerlink" title="/dev/nullå’Œ/dev/zeroçš„åŒºåˆ«"></a>/dev/nullå’Œ/dev/zeroçš„åŒºåˆ«</h5><ul>
<li><code>/dev/null</code>ï¼Œå¤–å·å«æ— åº•æ´ï¼Œä½ å¯ä»¥å‘å®ƒè¾“å‡ºä»»ä½•æ•°æ®ï¼Œå®ƒé€šåƒï¼Œå¹¶ä¸”ä¸ä¼šæ’‘ç€ï¼ </li>
<li><code>/dev/zero</code>ï¼Œæ˜¯ä¸€ä¸ªè¾“å…¥è®¾å¤‡ï¼Œä½ å¯ä½ ç”¨å®ƒæ¥åˆå§‹åŒ–æ–‡ä»¶ã€‚è¯¥è®¾å¤‡æ— ç©·å°½åœ°æä¾›0ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•ä½ éœ€è¦çš„æ•°ç›®â€”â€”è®¾å¤‡æä¾›çš„è¦å¤šçš„å¤šã€‚ä»–å¯ä»¥ç”¨äºå‘è®¾å¤‡æˆ–æ–‡ä»¶å†™å…¥å­—ç¬¦ä¸²0ã€‚ </li>
</ul>
<h2 id="äºŒã€å¼€å‘ç¯å¢ƒæ­å»º"><a href="#äºŒã€å¼€å‘ç¯å¢ƒæ­å»º" class="headerlink" title="äºŒã€å¼€å‘ç¯å¢ƒæ­å»º"></a>äºŒã€å¼€å‘ç¯å¢ƒæ­å»º</h2><h3 id="ä½¿ç”¨å®˜æ–¹æä¾›ubuntucoreæ–‡ä»¶ç³»ç»Ÿ"><a href="#ä½¿ç”¨å®˜æ–¹æä¾›ubuntucoreæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="ä½¿ç”¨å®˜æ–¹æä¾›ubuntucoreæ–‡ä»¶ç³»ç»Ÿ"></a>ä½¿ç”¨å®˜æ–¹æä¾›ubuntucoreæ–‡ä»¶ç³»ç»Ÿ</h3><p>åˆ‡æ¢æˆrootç”¨æˆ·ï¼š</p>
<pre><code class="bash">su root</code></pre>
<p>æ™®é€šç”¨æˆ·ï¼š </p>
<pre><code class="bash">ç”¨æˆ·å: pi
å¯†ç : pi</code></pre>
<p>Rootç”¨æˆ·ï¼š </p>
<pre><code class="bash">ç”¨æˆ·å: root
å¯†ç : fa</code></pre>
<p>å¯èƒ½ä¼šé‡åˆ°æ— æ³•åˆ‡æ¢çš„è¡Œä¸ºï¼Œæ­¤æ—¶å¯ä»¥ä¿®æ”¹é»˜è®¤ç™»å½•è´¦å·ä¸ºrootï¼š</p>
<pre><code class="bash">cd /etc/systemd/system/serial-getty@ttyS0.service.d/
vi autologin.conf
ä¿®æ”¹å‰ï¼š
[Service]
ExecStart=
ExecStart=-/sbin/agetty --autologin pi --keep-baud 115200,38400,9600 %I $TERM
ä¿®æ”¹åï¼š
[Service]
ExecStart=
ExecStart=-/sbin/agetty --autologin root --keep-baud 115200,38400,9600 %I $TERM</code></pre>
<p>æ›´æ–°è½¯ä»¶åŒ…</p>
<pre><code class="bash">apt-get update</code></pre>
<h3 id="è‡ªå·±åˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ"><a href="#è‡ªå·±åˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="è‡ªå·±åˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ"></a>è‡ªå·±åˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿ</h3><p>è¯¦è§å¦ä¸€ç¯‡åšå®¢â€”â€”ã€Šæ„é€ æ ¹æ–‡ä»¶ç³»ç»Ÿã€‹</p>
<pre><code class="bash"># æ‹·è´libåº“
sudo cp ../Toolchain/4.9.3/arm-cortexa9-linux-gnueabihf/lib/*so* ./lib/ -d
sudo cp ../Toolchain/4.9.3/arm-cortexa9-linux-gnueabihf/lib/*.a ./lib/ -d

# æ‹·è´libåº“
sudo cp ../Toolchain/4.9.3/arm-cortexa9-linux-gnueabihf/sys-root/usr/lib/*so* ./usr/lib/ -d
sudo cp ../Toolchain/4.9.3/arm-cortexa9-linux-gnueabihf/sys-root/usr/lib/*.a ./usr/lib/ -d

# æŸ¥çœ‹libæ–‡ä»¶å¤§å°
du ./lib/ ./usr/lib/ -sh</code></pre>
<p>etc/init.d/rcSæ–‡ä»¶ï¼š</p>
<pre><code class="bash">#!/bin/sh

PATH=/sbin:/bin:/usr/sbin:/usr/bin
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/lib:/usr/lib
export PATH LD_LIBRARY_PATH runlevel

mount -a
mkdir /dev/pts
mount -t devpts devpts /dev/pts

echo /sbin/mdev &gt; /proc/sys/kernel/hotplug
mdev -s</code></pre>
<p>chmod 777 rcS</p>
<p>etc/fstabæ–‡ä»¶ï¼š</p>
<pre><code class="bash">#device mount-point     type    options         dump    pass
proc    /proc           proc    defaults        0       0
tmpfs   /tmp            tmpfs   defaults        0       0
sysfs   /sys            sysfs   defaults        0       0
tmpfs   /dev            tmpfs   defaults        0       0</code></pre>
<p>etc/inittabæ–‡ä»¶ï¼š</p>
<pre><code class="bash">#etc/inittab
::sysinit:/etc/init.d/rcS
console::askfirst:-/bin/sh
::restart:/sbin/init
::ctrlaltdel:/sbin/reboot
::shutdown:/bin/umount -a -r
::shutdown:/sbin/swapoff -a</code></pre>
<h4 id="æ‰“åŒ…æˆimgé•œåƒ"><a href="#æ‰“åŒ…æˆimgé•œåƒ" class="headerlink" title="æ‰“åŒ…æˆimgé•œåƒ"></a>æ‰“åŒ…æˆimgé•œåƒ</h4><pre><code class="bash"># è·å¾—å¾…æ‰“åŒ…æˆimgé•œåƒçš„rootfsæ–‡ä»¶å¤¹å¤§å°
du -s -B 1 friendlycore-xenial_4.14_armhf/rootfs | cut -f1
# åˆ©ç”¨å‹å–„ä¹‹è‡‚æä¾›çš„å·¥å…·make_ext4fsåˆ¶ä½œä¸´æ—¶çš„ext4æ ¼å¼æ–‡ä»¶ç³»ç»Ÿ
./tools/make_ext4fs  -s -l æœ€å¤§é•œåƒå¤§å° -a root -L rootfs /dev/null å¾…æ‰“åŒ…æˆimgé•œåƒçš„rootfsæ–‡ä»¶å¤¹ &gt; tempfile
# è·å¾—é•œåƒå¤§å°
cat tempfile | grep &quot;Suggest size:&quot; | cut -f2 -d &#39;:&#39; | awk &#39;{gsub(/^\s+|\s+$/, &quot;&quot;);print}&#39;
# æ³¨æ„ï¼šè·å¾—å¾…æ‰“åŒ…æˆimgé•œåƒçš„rootfsæ–‡ä»¶å¤¹å¤§å° &lt; è·å¾—é•œåƒå¤§å°

# çœŸæ­£åˆ¶ä½œext4æ ¼å¼æ–‡ä»¶ç³»ç»Ÿ
./tools/make_ext4fs  -s -l åˆšåˆšè·å¾—çš„é•œåƒå¤§å° -a root -L rootfs é•œåƒæ–‡ä»¶.img å¾…æ‰“åŒ…æˆimgé•œåƒçš„rootfsæ–‡ä»¶å¤¹</code></pre>
<p>ä¸Šè¿°è¿™ä¸€ç³»åˆ—æ“ä½œå·²ç»è¢«å‹å–„ä¹‹è‡‚å†™å…¥è„šæœ¬<code>build-rootfs-img.sh</code>ä¸­ï¼Œå…·ä½“è°ƒç”¨æ–¹é¢ä¸ºï¼š</p>
<pre><code class="bash">./build-rootfs-img rootfsæ–‡ä»¶å¤¹æ‰€åœ¨ç›®å½• ç”Ÿæˆimgçš„é•œåƒæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</code></pre>
<pre><code class="bash">egï¼š
./build-rootfs-img.sh friendlycore-xenial_4.14_armhf/rootfs friendlycore-xenial_4.14_armhf
æˆ–
./build-rootfs-img.sh ~/nfs_root ~/nfs_root</code></pre>
<p><strong>æ³¨ï¼š</strong>é‡æ–°é…ç½®æ–‡ä»¶ç³»ç»Ÿååï¼Œéœ€è¦é‡æ–°è¿è¡Œå‹å–„ä¹‹è‡‚çš„è„šæœ¬<code>build-kernel.sh</code>ç¼–è¯‘ä¸€æ¬¡å†…æ ¸ï¼Œè¯¥è„šæœ¬ä¼šå°†å†…æ ¸ä¸­çš„æ¨¡å—å®‰è£…è‡³è¯¥æ–‡ä»¶ç³»ç»Ÿé•œåƒä¸­</p>
<p>è‡ªå·±åšçš„rootfså¹³å°ï¼Œbuild-kernel.shä¸­éœ€è¦æ³¨é‡Šä¸€ä¸ªå¹³å°æ£€æµ‹çš„ä»£ç å—ï¼ŒåŒæ—¶åœ¨./tools/update_kernel_bin_to_img.shè„šæœ¬ä¸­ç¬¬122è¡Œéœ€è¦å°†<code>echo &quot;IMG_SIZE=${IMG_SIZE}&quot; &gt; ${OUT}/${TARGET_OS}_rootfs-img.info</code>æ”¹ä¸º<code>echo &quot;IMG_SIZE=${IMG_SIZE}&quot;</code></p>
<pre><code class="bash">KERNEL_SRC=../LINUX/linux-sunxi-4.14.y ./build-kernel-others.sh æ”¾rootfs.imgå’Œæ”¾ç”Ÿæˆçš„boot.imgçš„æ–‡ä»¶å¤¹</code></pre>
<p>å‚è€ƒå‰æ–‡ï¼Œä¸‹è½½imgé•œåƒæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="bash">dd if=/dev/zero of=out/busyboxflash.img bs=1024 count=0 seek=133120#133120k -&gt; 130M åˆ é™¤partmap.txtä¸­userdataåˆ†åŒº

#sfdisk ï¼š æŸ¥çœ‹åˆ†åŒºä¿¡æ¯
#å°†MBRæ‰‡åŒºç­¾åå†™å…¥åˆ°é•œåƒ
sfdisk -u S -L -q out/busyboxflash.img 2&gt;/dev/null &lt;&lt; EOF
2048,,0x0C,-
EOF

# æ‰¾åˆ°ä¸€ä¸ªloopè®¾å¤‡
losetup -f
# å°†é•œåƒæ–‡ä»¶è™šæ‹Ÿæˆå—è®¾å¤‡
sudo losetup /dev/loop17 out/busyboxflash.img
# åˆ©ç”¨å‹å–„ä¹‹è‡‚çš„å·¥å…·sd_updateï¼Œå°†åˆ†åŒºè¡¨åŒç›®å½•ä¸‹çš„uboot.binã€boot.imgã€rootfs.imgã€userdata.imgæ‹·è´åˆ°loopè®¾å¤‡ä¸­å¹¶ç”Ÿæˆimgé•œåƒ
sudo ./tools/sd_update -d /dev/loop17 -p ./busybox_rootfs/partmap_no_userdata.txt
# è¯»å–/dev/loop17åˆ†åŒºä¿¡æ¯
sudo partprobe /dev/loop17 -s 2&gt;/dev/null

# å¸è½½loopè®¾å¤‡
sudo losetup -d /dev/loop17</code></pre>
<p>ç»æµ‹è¯•ï¼Œæ²¡æœ‰é‡æ–°ç¼–è¯‘å†…æ ¸ä¼šå¯¼è‡´å†…æ ¸å¯åŠ¨å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ï¼š</p>
<pre><code class="bash">U-Boot SPL 2017.11 (Oct 12 2019 - 17:03:15)
DRAM: 512 MiB(408MHz)
CPU Freq: 408MHz
memory test: 1
Pattern 55aa  Writing...Reading...OK
Trying to boot from MMC1
Boot device: sd


U-Boot 2017.11 (Oct 12 2019 - 17:03:15 +0800) Allwinner Technology

CPU:   Allwinner H3 (SUN8I 1680)
Model: FriendlyElec NanoPi H3
DRAM:  512 MiB
CPU Freq: 1008MHz
MMC:   SUNXI SD/MMC: 0, SUNXI SD/MMC: 1
*** Warning - bad CRC, using default environment

In:    serial
Out:   serial
Err:   serial
Net:   No ethernet found.
BOARD: nanopi-neo-core
starting USB...
No controllers found
Hit any key to stop autoboot:  0 
** Unrecognized filesystem type **
## Executing script at 43100000
Wrong image format for &quot;source&quot; command
=&gt;</code></pre>
<p>æ ¹æ®æ—¥å¿—åˆ†æè²Œä¼¼æ˜¯åœ¨43100000åœ°å€å¤„æ‰¾ä¸åˆ°è„šæœ¬ï¼Œä½†æ˜¯è¿™ä¸ªåœ°å€æ˜¯åœ¨rootfsä¸­çš„ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p>
<p>ä¸ä¼šæäº†ï¼Œç•™ä¸ªå‘ä»¥åæ¥å¡«ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p>
<h2 id="ä¸‰ã€é©±åŠ¨ç¼–å†™"><a href="#ä¸‰ã€é©±åŠ¨ç¼–å†™" class="headerlink" title="ä¸‰ã€é©±åŠ¨ç¼–å†™"></a>ä¸‰ã€é©±åŠ¨ç¼–å†™</h2><p>æš‚æ—¶é‡‡ç”¨å®˜æ–¹é•œåƒï¼Œé•œåƒåå­—ä¸º<code>nanopi-neo-core_sd_friendlycore-xenial_4.14_armhf_20190823.img</code>ï¼Œè¯¥é•œåƒä¸­é‡‡ç”¨çš„rootfsä¸º<code>UbuntuCore 18.04</code></p>
<h3 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h3><h4 id="å†…æ ¸ç‰ˆæœ¬æŸ¥çœ‹æ–¹æ³•"><a href="#å†…æ ¸ç‰ˆæœ¬æŸ¥çœ‹æ–¹æ³•" class="headerlink" title="å†…æ ¸ç‰ˆæœ¬æŸ¥çœ‹æ–¹æ³•"></a>å†…æ ¸ç‰ˆæœ¬æŸ¥çœ‹æ–¹æ³•</h4><pre><code class="bash">cat /proc/version
uname -a</code></pre>
<h4 id="æŒ‚è½½pcä¸Šæ–‡ä»¶ç³»ç»Ÿ"><a href="#æŒ‚è½½pcä¸Šæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æŒ‚è½½pcä¸Šæ–‡ä»¶ç³»ç»Ÿ"></a>æŒ‚è½½pcä¸Šæ–‡ä»¶ç³»ç»Ÿ</h4><pre><code class="bash">mount -t nfs -o nolock 192.168.2.101:/home/null/Code/NanoPi_NEO_Core/nfs /mnt

mount -t nfs -o nolock 192.168.2.101:/home/null/nfs_root /mnt</code></pre>
<p>æŒ‚è½½æŠ¥é”™å°è¯•å®‰è£…<code>nfs-common</code></p>
<blockquote>
<p>æŠ¥é”™ï¼š</p>
<pre><code class="bash">mount: wrong fs type, bad option, bad superblock on 192.168.2.101:/home/null/nfs_root,
       missing codepage or helper program, or other error
       (for several filesystems (e.g. nfs, cifs) you might
       need a /sbin/mount.&lt;type&gt; helper program)

       In some cases useful info is found in syslog - try
       dmesg | tail or so.</code></pre>
<p>å®‰è£…nfs-commonï¼š</p>
<pre><code class="bash">sudo apt-get install nfs-common</code></pre>
</blockquote>
<p>pcç«¯æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸï¼ˆè‡ªå·±æŒ‚æ¥è‡ªå·±ï¼‰ï¼ˆç»å¯¹è·¯å¾„ï¼‰</p>
<pre><code class="bash">sudo mount -t nfs -o nolock localhost://home/null/Code/NanoPi_NEO_Core/nfs /mnt/nfs#æŒ‚æ¥
sudo mount -t nfs -o nolock localhost://home/null/nfs_root /mnt/nfs_root#æŒ‚æ¥
ls -l /mnt/nfs#æ£€æŸ¥
ls -l /mnt/nfs_root#æ£€æŸ¥
sudo umount /mnt/nfs#å¸è½½
sudo umount /mnt/nfs_root#å¸è½½</code></pre>
<h5 id="ä¸€é”®æŒ‚è½½è„šæœ¬"><a href="#ä¸€é”®æŒ‚è½½è„šæœ¬" class="headerlink" title="ä¸€é”®æŒ‚è½½è„šæœ¬"></a>ä¸€é”®æŒ‚è½½è„šæœ¬</h5><pre><code class="bash">#!/bin/bash
if [ $(id -u) -ne 0 ]; then
    echo &quot;Re-running script under sudo...&quot;
    sudo &quot;$0&quot; &quot;$@&quot;
    exit
fi
mount -t nfs -o nolock 192.168.2.101:/home/null/Code/NanoPi_NEO_Core/nfs /mnt
echo &quot;mount -&gt; /mnt&quot;</code></pre>
<p>è®°å¾—chmod +x </p>
<h5 id="å¸è½½è„šæœ¬"><a href="#å¸è½½è„šæœ¬" class="headerlink" title="å¸è½½è„šæœ¬"></a>å¸è½½è„šæœ¬</h5><pre><code class="bash">#!/bin/bash
if [ $(id -u) -ne 0 ]; then
    echo &quot;Re-running script under sudo...&quot;
    sudo &quot;$0&quot; &quot;$@&quot;
    exit
fi
umount /mnt
echo &quot;umount /mnt OK&quot;</code></pre>
<p>è®°å¾—chmod +x </p>
<h4 id="æ›´æ¢æº"><a href="#æ›´æ¢æº" class="headerlink" title="æ›´æ¢æº"></a>æ›´æ¢æº</h4><p>å‚è€ƒï¼š <a href="http://mirrors.ustc.edu.cn/help/ubuntu-ports.html" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/help/ubuntu-ports.html</a></p>
<p>ä¿®æ”¹ <code>/etc/apt/sources.list</code> æ–‡ä»¶ä¸­é•œåƒæºæœåŠ¡å™¨åœ°å€ <a href="http://ports.ubuntu.com/" target="_blank" rel="noopener">http://ports.ubuntu.com/</a> ä¸º <a href="http://mirrors.ustc.edu.cn/ubuntu-ports/" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/ubuntu-ports/</a></p>
<pre><code class="bash">deb http://mirrors.ustc.edu.cn/ubuntu-ports/ bionic main restricted universe multiverse
#deb http://ports.ubuntu.com/ bionic main restricted universe multiverse
# deb-src http://ports.ubuntu.com/ xenial main restricted universe multiverse

deb http://mirrors.ustc.edu.cn/ubuntu-ports/ bionic-security main restricted universe multiverse
#deb http://ports.ubuntu.com/ bionic-security main restricted universe multiverse
# deb-src http://ports.ubuntu.com/ xenial-security main restricted universe multiverse

deb http://mirrors.ustc.edu.cn/ubuntu-ports/ bionic-updates main restricted universe multiverse
#deb http://ports.ubuntu.com/ bionic-updates main restricted universe multiverse
# deb-src http://ports.ubuntu.com/ xenial-updates main restricted universe multiverse

deb http://mirrors.ustc.edu.cn/ubuntu-ports/ bionic-backports main restricted universe multiverse
#deb http://ports.ubuntu.com/ bionic-backports main restricted universe multiverse
# deb-src http://ports.ubuntu.com/ xenial-backports main restricted universe multiverse</code></pre>
<p>æ›´æ–°æºï¼š</p>
<pre><code class="bash">sudo apt update</code></pre>
<h3 id="1-æŒ‰é”®é©±åŠ¨ç¨‹åº"><a href="#1-æŒ‰é”®é©±åŠ¨ç¨‹åº" class="headerlink" title="1.æŒ‰é”®é©±åŠ¨ç¨‹åº"></a>1.æŒ‰é”®é©±åŠ¨ç¨‹åº</h3><h4 id="1-1ä¿®æ”¹è®¾å¤‡æ ‘"><a href="#1-1ä¿®æ”¹è®¾å¤‡æ ‘" class="headerlink" title="1.1ä¿®æ”¹è®¾å¤‡æ ‘"></a>1.1ä¿®æ”¹è®¾å¤‡æ ‘</h4><h5 id="ç¼–è¯‘è®¾å¤‡æ ‘"><a href="#ç¼–è¯‘è®¾å¤‡æ ‘" class="headerlink" title="ç¼–è¯‘è®¾å¤‡æ ‘"></a>ç¼–è¯‘è®¾å¤‡æ ‘</h5><pre><code class="bash">make dtbs ARCH=arm CROSS_COMPILE=arm-linux- -j8</code></pre>
<h5 id="æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹"><a href="#æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹" class="headerlink" title="æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹"></a>æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹</h5><pre><code class="bash">ls /proc/device-tree/

cat /proc/device-tree/key/compatible

# æ³¨æ„ï¼šhexdumpæŸ¥çœ‹çš„æ˜¯dtbæ–‡ä»¶åŸå§‹æ•°æ®ï¼Œå…¶ä¸­çš„æ•°æ®æ˜¯æŒ‰ç…§å¤§å­—èŠ‚åºæ’æ”¾çš„ï¼ˆä½åœ°å€æ”¾é«˜ä½ï¼‰
hexdump /proc/device-tree/key/key-gpio
busybox hexdump /proc/device-tree/key/key-gpio</code></pre>
<h5 id="è®¾å¤‡æ ‘ä¸­çš„GPIOèŠ‚ç‚¹"><a href="#è®¾å¤‡æ ‘ä¸­çš„GPIOèŠ‚ç‚¹" class="headerlink" title="è®¾å¤‡æ ‘ä¸­çš„GPIOèŠ‚ç‚¹"></a>è®¾å¤‡æ ‘ä¸­çš„GPIOèŠ‚ç‚¹</h5><p>å‡è®¾PA6å’ŒPA7ä¸Šæ¥å…¥ä¸¤ä¸ªLEDï¼Œé€šè¿‡ç¼–å†™ä¸€ä¸ªGPIOçš„é©±åŠ¨ç¨‹åºæ¥æ§åˆ¶LEDçš„äº®ç­ï¼Œåœ¨è®¾å¤‡æ ‘æ–‡ä»¶sun8i-h3-nanopi-m1.dtsçš„æ ¹èŠ‚ç‚¹å¢åŠ ä¸€ä¸ªmyledså­èŠ‚ç‚¹  ï¼š</p>
<pre><code>myleds {       
    compatible = &quot;usr,myleds&quot;;         
    led-gpios = &lt;&amp;pio 0  7  GPIO_ACTIVE_HIGH&gt;,&lt;&amp;pio 0  6  GPIO_ACTIVE_HIGH&gt;;/* 0è¡¨ç¤ºPAç»„çš„ioå£, å› h3é‡Œç¬¬0ç»„çš„ioå£å°±æ˜¯ä»¥PAå¼€å§‹å‘½åçš„ */          
};</code></pre><p> èŠ‚ç‚¹ä¸­çš„led-gpioså±æ€§ï¼Œå¼•ç”¨äº†pinctrlä¿¡æ¯ï¼Œsunxi-h3-h5.dtsiä¸­æœ‰å…³äºè¯¥æ§åˆ¶å™¨çš„æè¿°ï¼Œ </p>
<pre><code>pio: pinctrl@01c20800 {
    /* compatible is in per SoC .dtsi file */
    reg = &lt;0x01c20800 0x400&gt;;
    interrupts = &lt;GIC_SPI 11 IRQ_TYPE_LEVEL_HIGH&gt;,
    &lt;GIC_SPI 17 IRQ_TYPE_LEVEL_HIGH&gt;;
    clocks = &lt;&amp;ccu CLK_BUS_PIO&gt;, &lt;&amp;osc24M&gt;, &lt;&amp;osc32k&gt;;
    clock-names = &quot;apb&quot;, &quot;hosc&quot;, &quot;losc&quot;;
    gpio-controller;
    #gpio-cells = &lt;3&gt;;
    interrupt-controller;
    #interrupt-cells = &lt;3&gt;;
    ......
};</code></pre><p>myledså­èŠ‚ç‚¹æè¿°äº†ä¸¤ä¸ªGPIOä¿¡æ¯ï¼Œå…·æœ‰å¤šä¸ªgpioå£ä¿¡æ¯çš„å±æ€§å€¼: <code>&lt;&amp;gpioæ§åˆ¶å™¨èŠ‚ç‚¹å å…·ä½“gpioå£çš„æ ‡è¯†ç¬¦&gt;,&lt;&amp;gpioæ§åˆ¶å™¨èŠ‚ç‚¹å å…·ä½“gpioå£çš„æ ‡è¯†ç¬¦&gt; â€¦;</code>å…·ä½“gpioå£çš„æ ‡è¯†ç¬¦æ˜¯ç”±å¤šä¸ªæ•°å­—ç»„æˆ, æ•°å­—çš„ä¸ªæ•°ç”±æ‰€ç”¨çš„gpioæ§åˆ¶å™¨èŠ‚ç‚¹é‡Œçš„#gpio-cellså±æ€§å€¼æŒ‡å®š.ã€‚å…¨å¿—H3 å…±æœ‰ä¸ƒç»„GPIO ï¼Œä¹Ÿå³ä¸ƒä¸ªbankï¼Œåˆ†åˆ«ä¸ºPA (PA0-21),PC(PC0-16) PD (PD0-17), PE(PE0-15),PF(PF0-6) PG(PG0-13) ,PL(PL0-PL11),åœ¨å†…æ ¸ä¸­PA-PGæ˜¯ä¸€ä¸ªpinctrlæ§åˆ¶å™¨ï¼Œè€ŒPLæ˜¯å¦ä¸€ä¸ªpinctrlæ§åˆ¶å™¨ ã€‚</p>
<p>ç”±#gpio-cells = &lt;3&gt;å¯ä»¥æ¨å‡ºGPIOå±æ€§éœ€è¦ç”¨3ä¸ªu32çš„æ•°æ®æè¿°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨è¯¥GPIOä½äºå“ªä¸ªbankï¼Œç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨è¯¥bankä¸‹çš„åºå·ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä»£è¡¨é»˜è®¤ç”µå¹³ï¼ŒmyledsèŠ‚ç‚¹ä¸‹çš„GPIO_ACTIVE_HIGHè¿™ä¸ªå®å°±å®šä¹‰äºinclude/dt-bindings/gpio/gpio.h</p>
<h4 id="1-2ç¼–å†™é©±åŠ¨"><a href="#1-2ç¼–å†™é©±åŠ¨" class="headerlink" title="1.2ç¼–å†™é©±åŠ¨"></a>1.2ç¼–å†™é©±åŠ¨</h4><h5 id="1-2-1æ£€æŸ¥æ³¨å†Œçš„é©±åŠ¨"><a href="#1-2-1æ£€æŸ¥æ³¨å†Œçš„é©±åŠ¨" class="headerlink" title="1.2.1æ£€æŸ¥æ³¨å†Œçš„é©±åŠ¨"></a>1.2.1æ£€æŸ¥æ³¨å†Œçš„é©±åŠ¨</h5><ul>
<li><p>é©±åŠ¨å®‰è£…å¥½åï¼Œä¼šåœ¨<code>/dev/</code>ç›®å½•ä¸‹åˆ›å»ºåŒåç›®å½•</p>
</li>
<li><p>æˆ–è€…é€šè¿‡<code>cat /proc/devices</code>å‘½ä»¤æŸ¥çœ‹å¤šå‡ºæ¥çš„é©±åŠ¨</p>
</li>
</ul>
<h5 id="1-2-2gpiolibåŠgpioæ“ä½œ"><a href="#1-2-2gpiolibåŠgpioæ“ä½œ" class="headerlink" title="1.2.2gpiolibåŠgpioæ“ä½œ"></a>1.2.2gpiolibåŠgpioæ“ä½œ</h5><h6 id="ç»å…¸æ¥å£"><a href="#ç»å…¸æ¥å£" class="headerlink" title="ç»å…¸æ¥å£"></a>ç»å…¸æ¥å£</h6><ul>
<li><code>gpio_request</code>:é©±åŠ¨ä¸­è¦æƒ³ä½¿ç”¨æŸä¸€ä¸ªgpioï¼Œå°±å¿…é¡»å…ˆè°ƒç”¨gpio_requestæ¥å£æ¥å‘å†…æ ¸ç”³è¯·ï¼Œå¾—åˆ°å…è®¸åæ‰å¯ä»¥å»ä½¿ç”¨è¿™ä¸ªgpio</li>
<li><code>gpio_free</code>: å¯¹åº”gpio_requestï¼Œç”¨æ¥é‡Šæ”¾ç”³è¯·åç”¨å®Œäº†çš„gpio</li>
<li><code>gpiochip_is_requested</code>: æ¥å£ç”¨æ¥åˆ¤æ–­æŸä¸€ä¸ªgpioæ˜¯å¦å·²ç»è¢«ç”³è¯·äº†</li>
<li><code>gpio_direction_input</code>/<code>gpio_direction_output</code>: æ¥å£ç”¨æ¥è®¾ç½®GPIOä¸ºè¾“å…¥/è¾“å‡ºæ¨¡å¼ï¼ˆä¸æ¨èç›´æ¥è®¾ç½®å¯„å­˜å™¨ï¼‰</li>
</ul>
<blockquote>
<ul>
<li>ä¸€èˆ¬æ¥è¯´ï¼Œgpioçš„èµ„æºç”³è¯·å’Œé‡Šæ”¾æ“ä½œåº”è¯¥æ”¾åœ¨é©±åŠ¨æ¨¡å—çš„åŠ è½½ä¸å¸è½½å‡½æ•°å†…</li>
<li>gpio_requestçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦ç”³è¯·çš„gpioå·ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬ç»™è¯¥gpioèµ·ä¸ªåå­—</li>
<li>ç”³è¯·å®Œäº†ä¹‹åå¯¹è¿™ä¸ªgpioè¿›è¡Œæ¨¡å¼è®¾ç½®ï¼Œæˆ‘ä»¬è¿™é‡Œç”¨gpio_direction_output è®¾ç½®æˆè¾“å‡ºæ¨¡å¼ï¼Œå¹¶ä¸”é»˜è®¤è¾“å‡º1è®©ledç­ </li>
</ul>
</blockquote>
<h6 id="æ–°æ¥å£"><a href="#æ–°æ¥å£" class="headerlink" title="æ–°æ¥å£"></a>æ–°æ¥å£</h6><ul>
<li><code>devm_gpio_request_one</code>ï¼š è‡ªå¸¦åˆå§‹åŒ–ç”µå¹³åŠŸèƒ½ï¼Œå¹¶ä¸”ä¼šåœ¨æ¨¡å—å¸è½½æ—¶è‡ªåŠ¨é‡Šæ”¾gpioï¼Œååˆ†ç®€ä¾¿ </li>
</ul>
<h6 id="è¯»å†™gpio"><a href="#è¯»å†™gpio" class="headerlink" title="è¯»å†™gpio"></a>è¯»å†™gpio</h6><ul>
<li><code>gpio_get_value</code>ï¼šè¯»gpio</li>
<li><code>gpio_set_value</code>ï¼šå†™gpio</li>
</ul>
<h6 id="æ§åˆ¶å°ä¸­æŸ¥çœ‹å½“å‰gpioå ç”¨æƒ…å†µçš„æ–¹æ³•"><a href="#æ§åˆ¶å°ä¸­æŸ¥çœ‹å½“å‰gpioå ç”¨æƒ…å†µçš„æ–¹æ³•" class="headerlink" title="æ§åˆ¶å°ä¸­æŸ¥çœ‹å½“å‰gpioå ç”¨æƒ…å†µçš„æ–¹æ³•"></a>æ§åˆ¶å°ä¸­æŸ¥çœ‹å½“å‰gpioå ç”¨æƒ…å†µçš„æ–¹æ³•</h6><p>å†…æ ¸ä¸­æä¾›äº†è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿdebugfsï¼Œé‡Œé¢æœ‰ä¸€ä¸ªgpioæ–‡ä»¶ï¼Œæä¾›äº†gpioçš„ä½¿ç”¨ä¿¡æ¯</p>
<ul>
<li>ä½¿ç”¨ <code>mount -t debugfs debugfs /tmp</code> æŠŠdebugfsæŒ‚æ¥åˆ°/tmpä¸‹ï¼Œå†é‡æ–°è¿›å…¥/tmpåå°±èƒ½çœ‹åˆ°ä¸€ä¸ªåä¸ºgpioçš„æ–‡ä»¶</li>
<li><code>cat /tmp/gpio</code>å³å¯å¾—åˆ°gpioçš„æ‰€æœ‰ä¿¡æ¯ï¼Œä½¿ç”¨å®Œå<code>umount /tmp</code>å¸è½½æ‰debugfs</li>
</ul>
<h4 id="1-3è°ƒè¯•"><a href="#1-3è°ƒè¯•" class="headerlink" title="1.3è°ƒè¯•"></a>1.3è°ƒè¯•</h4><h5 id="printk"><a href="#printk" class="headerlink" title="printk"></a>printk</h5><ul>
<li><p>æŸ¥çœ‹<code>printk</code>è¾“å‡ºçš„æ—¥å¿—ï¼š</p>
<p>  é€šè¿‡<code>dmesg</code>å’Œ <code>more</code>ã€<code>tail</code>ã€<code>less</code>ã€<code>grep</code>çš„ç»“åˆæŸ¥çœ‹æ—¥å¿—</p>
<pre><code class="bash">#è¾“å‡ºå…¨éƒ¨ä¿¡æ¯
dmesg
#è¾“å‡ºå‰20è¡Œ
dmesg | head -20
#è¾“å‡ºå20è¡Œ
dmesg | tail -20
#è¾“å‡ºåŒ…å«usbçš„ä¿¡æ¯ï¼ˆ-iï¼šå¿½ç•¥å¤§å°å†™ï¼‰
dmesg | grep -i usb
#æ¸…ç©ºdmesgç¯å½¢ç¼“å†²åŒºä¸­çš„æ—¥å¿—
dmesg -c
    ```</code></pre>
</li>
<li><p>æˆ–è€…ç›´æ¥è®¾ç½®æ—¥å¿—çš„è¾“å‡ºçš„ç­‰çº§ï¼š</p>
<pre><code class="bash">  echo $level &gt; /proc/sys/kernel/printk#é»˜è®¤ä¸º4 4 1 7
  #å¦‚ï¼š
  echo 8 4 1 7 &gt; /proc/sys/kernel/printk#æ‰€æœ‰çº§åˆ«æ—¥å¿—å‡å¯æ‰“å°è¾“å‡º</code></pre>
<blockquote>
<p>/proc/sys/kernel/printkä¸­å¯¹åº”çš„å››ä¸ªæ•°åˆ†åˆ«å¯¹åº”äºï¼š</p>
<ul>
<li><p>â‘ æ§åˆ¶å°æ—¥å¿—çº§åˆ«ï¼šä¼˜å…ˆçº§é«˜äºè¯¥å€¼çš„æ¶ˆæ¯å°†è¢«æ‰“å°è‡³æ§åˆ¶å°ã€‚</p>
</li>
<li><p>â‘¡ç¼ºçœçš„æ¶ˆæ¯æ—¥å¿—çº§åˆ«ï¼šå°†ç”¨è¯¥å€¼æ¥æ‰“å°æ²¡æœ‰ä¼˜å…ˆçº§çš„æ¶ˆæ¯ã€‚</p>
</li>
<li><p>â‘¢æœ€ä½çš„æ§åˆ¶å°æ—¥å¿—çº§åˆ«ï¼šæ§åˆ¶å°æ—¥å¿—çº§åˆ«å¯èƒ½è¢«è®¾ç½®çš„æœ€å°å€¼ã€‚</p>
</li>
<li><p>â‘£ç¼ºçœçš„æ§åˆ¶å°ï¼šæ§åˆ¶å°æ—¥å¿—çº§åˆ«çš„ç¼ºçœå€¼ã€‚</p>
<p>æ—¥å¿—ç¼“å†²åŒºçš„æ¯ä¸€è¡Œæ–‡æœ¬å¼€å¤´å…·æœ‰çº§åˆ«æ ‡è®°, çº§åˆ«å€¼<strong>è¶Šå°</strong>åˆ™ä¼˜å…ˆçº§<strong>è¶Šé«˜</strong>.  </p>
<p>ç³»ç»Ÿå®šä¹‰äº†8ä¸ªæ¶ˆæ¯çº§åˆ«, çº§åˆ«å·ä»0åˆ°7åˆ†åˆ«ä¸ºï¼š</p>
</li>
<li><p>è‡´å‘½çº§(KERN_EMESG), </p>
</li>
<li><p>è­¦æˆ’çº§(KERN_ALERT), </p>
</li>
<li><p>ä¸´ç•Œçº§(KERN_CRIT),</p>
</li>
<li><p>é”™è¯¯çº§(KERN_ERR), </p>
</li>
<li><p>å‘Šè­¦çº§(KERN_WARN), </p>
</li>
<li><p>æ³¨æ„çº§(KERN_NOTICE), </p>
</li>
<li><p>é€šçŸ¥çº§(KERN_INFO),</p>
</li>
<li><p>è°ƒè¯•çº§(KERN_DEBUG).</p>
</li>
</ul>
</blockquote>
</li>
</ul>
<h5 id="åå°è¿è¡Œ"><a href="#åå°è¿è¡Œ" class="headerlink" title="åå°è¿è¡Œ"></a>åå°è¿è¡Œ</h5><ul>
<li><p>&amp;</p>
<p>   å½“åœ¨å‰å°è¿è¡ŒæŸä¸ªä½œä¸šæ—¶ï¼Œç»ˆç«¯è¢«è¯¥ä½œä¸šå æ®ï¼›å¯ä»¥åœ¨å‘½ä»¤åé¢åŠ ä¸Š&amp; å®ç°åå°è¿è¡Œã€‚ä¾‹å¦‚ï¼šsh test.sh &amp;</p>
<p>  å½“æˆåŠŸåœ°æäº¤è¿›ç¨‹ä»¥åï¼Œå°±ä¼šæ˜¾ç¤ºå‡ºä¸€ä¸ªè¿›ç¨‹å·ï¼Œå¯ä»¥ç”¨å®ƒæ¥ç›‘æ§è¯¥è¿›ç¨‹ï¼Œæˆ–æ€æ­»å®ƒã€‚(<code>ps -ef | grep è¿›ç¨‹å·</code> æˆ–è€… <code>kill -9 è¿›ç¨‹å·</code>ï¼‰</p>
</li>
<li><p>nohup  </p>
<p> ä½¿ç”¨&amp;å‘½ä»¤åï¼Œä½œä¸šè¢«æäº¤åˆ°åå°è¿è¡Œï¼Œå½“å‰æ§åˆ¶å°æ²¡æœ‰è¢«å ç”¨ï¼Œä½†æ˜¯ä¸€ä½†æŠŠå½“å‰æ§åˆ¶å°å…³æ‰(é€€å‡ºå¸æˆ·æ—¶)ï¼Œä½œä¸šå°±ä¼šåœæ­¢è¿è¡Œã€‚nohupå‘½ä»¤å¯ä»¥åœ¨ä½ é€€å‡ºå¸æˆ·ä¹‹åç»§ç»­è¿è¡Œç›¸åº”çš„è¿›ç¨‹ã€‚nohupå°±æ˜¯ä¸æŒ‚èµ·çš„æ„æ€( no hang up)ã€‚è¯¥å‘½ä»¤çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼š</p>
<pre><code class="bash"> nohup command &amp;</code></pre>
<p> å¦‚æœä½¿ç”¨nohupå‘½ä»¤æäº¤ä½œä¸šï¼Œé‚£ä¹ˆåœ¨ç¼ºçœæƒ…å†µä¸‹è¯¥ä½œä¸šçš„æ‰€æœ‰è¾“å‡ºéƒ½è¢«é‡å®šå‘åˆ°ä¸€ä¸ªåä¸ºnohup.outçš„æ–‡ä»¶ä¸­ï¼Œé™¤éå¦å¤–æŒ‡å®šäº†è¾“å‡ºæ–‡ä»¶ï¼š</p>
<pre><code class="bash"> nohup command &gt; myout.file 2&gt;&amp;1 &amp;</code></pre>
<p> ä½¿ç”¨äº†nohupä¹‹åï¼Œå¾ˆå¤šäººå°±è¿™æ ·ä¸ç®¡äº†ï¼Œå…¶å®è¿™æ ·æœ‰å¯èƒ½åœ¨å½“å‰è´¦æˆ·éæ­£å¸¸é€€å‡ºæˆ–è€…ç»“æŸçš„æ—¶å€™ï¼Œå‘½ä»¤è¿˜æ˜¯è‡ªå·±ç»“æŸäº†ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨nohupå‘½ä»¤åå°è¿è¡Œå‘½ä»¤ä¹‹åï¼Œéœ€è¦ä½¿ç”¨exitæ­£å¸¸é€€å‡ºå½“å‰è´¦æˆ·ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯å‘½ä»¤ä¸€ç›´åœ¨åå°è¿è¡Œã€‚</p>
</li>
<li><p>ctrl + z </p>
<p> å¯ä»¥å°†ä¸€ä¸ªæ­£åœ¨å‰å°æ‰§è¡Œçš„å‘½ä»¤æ”¾åˆ°åå°ï¼Œå¹¶ä¸”å¤„äºæš‚åœçŠ¶æ€ã€‚ </p>
</li>
<li><p>jobs<br>  æŸ¥çœ‹å½“å‰æœ‰å¤šå°‘åœ¨åå°è¿è¡Œçš„å‘½ä»¤ã€‚<br>  <code>jobs -l</code>é€‰é¡¹å¯æ˜¾ç¤ºæ‰€æœ‰ä»»åŠ¡çš„PIDï¼Œjobsçš„çŠ¶æ€å¯ä»¥æ˜¯running, stopped, Terminatedã€‚ä½†æ˜¯å¦‚æœä»»åŠ¡è¢«ç»ˆæ­¢äº†ï¼ˆkillï¼‰ï¼Œshell ä»å½“å‰çš„shellç¯å¢ƒå·²çŸ¥çš„åˆ—è¡¨ä¸­åˆ é™¤ä»»åŠ¡çš„è¿›ç¨‹æ ‡è¯†ã€‚ </p>
</li>
</ul>
<h3 id="2-å†…æ ¸å®šæ—¶å™¨"><a href="#2-å†…æ ¸å®šæ—¶å™¨" class="headerlink" title="2.å†…æ ¸å®šæ—¶å™¨"></a>2.å†…æ ¸å®šæ—¶å™¨</h3><h3 id="3-ä¸­æ–­"><a href="#3-ä¸­æ–­" class="headerlink" title="3.ä¸­æ–­"></a>3.ä¸­æ–­</h3><h4 id="ä¸ŠåŠéƒ¨å’Œä¸‹åŠéƒ¨"><a href="#ä¸ŠåŠéƒ¨å’Œä¸‹åŠéƒ¨" class="headerlink" title="ä¸ŠåŠéƒ¨å’Œä¸‹åŠéƒ¨"></a>ä¸ŠåŠéƒ¨å’Œä¸‹åŠéƒ¨</h4><ul>
<li><p>è½¯ä¸­æ–­</p>
<p>  è½¯ä¸­æ–­å¿…é¡»åœ¨ç¼–è¯‘çš„æ—¶å€™é™æ€æ³¨å†Œ</p>
<ul>
<li>open_sotfirqï¼šæ‰“å¼€è½¯ä¸­æ–­</li>
<li>raise_sotfirqï¼šè§¦å‘è½¯ä¸­æ–­</li>
</ul>
</li>
<li><p>taskletï¼šåˆ©ç”¨è½¯ä¸­æ–­æ¥å®ç°çš„å¦ä¸€ç§ä¸‹åŠéƒ¨æœºåˆ¶ï¼Œåœ¨è½¯ä¸­æ–­å’Œtaskletä¹‹é—´å»ºè®®é€‰tasklet</p>
<ul>
<li>tasklet_initï¼šåˆå§‹åŒ–tasklet_structç»“æ„ä½“ï¼Œæˆ–ç›´æ¥ä½¿ç”¨å®DECLARE_TASKLETå®šä¹‰ï¼‹åˆå§‹åŒ–</li>
<li>tasklet_scheduleï¼šä¸€èˆ¬åœ¨ä¸ŠåŠéƒ¨ä¸­è°ƒç”¨ï¼Œä½¿è¦è°ƒåº¦çš„taskletåœ¨åˆé€‚çš„æ—¶å€™è¿è¡Œ</li>
</ul>
</li>
<li><p>å·¥ä½œé˜Ÿåˆ—ï¼šåœ¨<strong>è¿›ç¨‹</strong>ä¸Šä¸‹æ–‡æ‰§è¡Œï¼Œå…è®¸ç¡çœ æˆ–é‡æ–°è°ƒåº¦ï¼ˆä¸‹åŠéƒ¨å¯ä»¥ç¡çœ å°±å¯ä»¥äº¤ç»™å·¥ä½œé˜Ÿåˆ—ï¼‰ï¼Œè¦æ‰§è¡Œçš„å·¥ä½œä¼šäº¤ç»™ä¸€ä¸ªå†…æ ¸å·¥ä½œè€…çº¿ç¨‹å»æ‰§è¡Œ</p>
<ul>
<li>å®INIT_WORKï¼šåˆå§‹åŒ–å·¥ä½œ</li>
<li>å®DECLARE_WORKï¼šå®šä¹‰+åˆå§‹åŒ–å·¥ä½œ</li>
<li>schedule_workï¼šç±»ä¼¼tasklet_scheduleï¼Œè°ƒåº¦ä¼ å…¥çš„å·¥ä½œ</li>
</ul>
</li>
</ul>
<h4 id="3-1ä¿®æ”¹è®¾å¤‡æ ‘"><a href="#3-1ä¿®æ”¹è®¾å¤‡æ ‘" class="headerlink" title="3.1ä¿®æ”¹è®¾å¤‡æ ‘"></a>3.1ä¿®æ”¹è®¾å¤‡æ ‘</h4><p>å‚è€ƒå†…æ ¸ç»‘å®šä¿¡æ¯ï¼šDocumentation/devicetree/bindings/arm/gic.txt</p>
<p>å¯¹äºä¸€èˆ¬çš„ARMå¤„ç†å™¨æ¥è¯´ï¼Œ<code>#interrupt-cells=&lt;3&gt;</code>å¯¹åº”çš„ä¸‰ä¸ªcellåˆ†åˆ«ä¸ºï¼š</p>
<ol>
<li>ä¸­æ–­ç±»å‹<ul>
<li>0ï¼šSPIä¸­æ–­</li>
<li>1ï¼šPPIä¸­æ–­</li>
</ul>
</li>
<li>ä¸­æ–­å·<ul>
<li>SPIï¼š0~987</li>
<li>PPIï¼š0~15</li>
</ul>
</li>
<li>æ ‡å¿—<ul>
<li>bit[3:0]ï¼šä¸­æ–­è§¦å‘ç±»å‹<ul>
<li>1ï¼šä¸Šå‡æ²¿</li>
<li>2ï¼šä¸‹é™æ²¿</li>
<li>4ï¼šé«˜ç”µå¹³</li>
<li>8ï¼šä½ç”µå¹³</li>
</ul>
</li>
<li>bit[15:8]ï¼šPPIä¸­æ–­çš„CPUæ©ç </li>
</ul>
</li>
</ol>
<h5 id="ç›¸å…³å‡½æ•°"><a href="#ç›¸å…³å‡½æ•°" class="headerlink" title="ç›¸å…³å‡½æ•°"></a>ç›¸å…³å‡½æ•°</h5><ul>
<li>irq_of_parse_and_mapï¼šä»è®¾å¤‡æ ‘ä¸­ä¸­æ–­èŠ‚ç‚¹ä¸­çš„interruptså±æ€§æå–å¯¹åº”çš„ä¸­æ–­å·</li>
<li>gpio_to_irqï¼šè·å–gpioå¯¹åº”çš„ä¸­æ–­å·</li>
</ul>
<h5 id="ç¼–è¯‘è®¾å¤‡æ ‘-1"><a href="#ç¼–è¯‘è®¾å¤‡æ ‘-1" class="headerlink" title="ç¼–è¯‘è®¾å¤‡æ ‘"></a>ç¼–è¯‘è®¾å¤‡æ ‘</h5><pre><code class="bash">make dtbs ARCH=arm CROSS_COMPILE=arm-linux- -j8</code></pre>
<h5 id="æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹-1"><a href="#æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹-1" class="headerlink" title="æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹"></a>æŸ¥çœ‹ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨å¯¹åº”èŠ‚ç‚¹</h5><pre><code class="bash">ls /proc/device-tree/

cat /proc/device-tree/key/compatible

# æ³¨æ„ï¼šhexdumpæŸ¥çœ‹çš„æ˜¯dtbæ–‡ä»¶åŸå§‹æ•°æ®ï¼Œå…¶ä¸­çš„æ•°æ®æ˜¯æŒ‰ç…§å¤§å­—èŠ‚åºæ’æ”¾çš„ï¼ˆä½åœ°å€æ”¾é«˜ä½ï¼‰
hexdump /proc/device-tree/key/interrupts
busybox hexdump /proc/device-tree/key/interrupts</code></pre>
<h5 id="è®¾å¤‡æ ‘ä¸­çš„ä¸­æ–­èŠ‚ç‚¹"><a href="#è®¾å¤‡æ ‘ä¸­çš„ä¸­æ–­èŠ‚ç‚¹" class="headerlink" title="è®¾å¤‡æ ‘ä¸­çš„ä¸­æ–­èŠ‚ç‚¹"></a>è®¾å¤‡æ ‘ä¸­çš„ä¸­æ–­èŠ‚ç‚¹</h5><ul>
<li>interrupt-parent = &lt;&amp;pio&gt;;//å±äºpioä¸­æ–­æ§åˆ¶å™¨</li>
<li>interrupts = &lt;0 7 IRQ_TYPE_EDGE_BOTH&gt;;<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç¬¬å‡ ä¸ªGPIOï¼ˆè¿™é‡Œæ˜¯GPIOAï¼‰</li>
<li>ç¬¬äºŒä¸ªå‚æ•°ï¼šç¬¬å‡ ä¸ªå¤–éƒ¨ä¸­æ–­</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šè§¦å‘æ²¿</li>
</ul>
</li>
</ul>
<h4 id="3-2ç¼–å†™é©±åŠ¨"><a href="#3-2ç¼–å†™é©±åŠ¨" class="headerlink" title="3.2ç¼–å†™é©±åŠ¨"></a>3.2ç¼–å†™é©±åŠ¨</h4><h4 id="3-3è°ƒè¯•"><a href="#3-3è°ƒè¯•" class="headerlink" title="3.3è°ƒè¯•"></a>3.3è°ƒè¯•</h4><p>ä¸­æ–­æ³¨å†ŒæˆåŠŸåå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ï¼š</p>
<pre><code class="bash">cat /proc/interrupts</code></pre>
<h3 id="4-inputå­ç³»ç»Ÿ"><a href="#4-inputå­ç³»ç»Ÿ" class="headerlink" title="4.inputå­ç³»ç»Ÿ"></a>4.inputå­ç³»ç»Ÿ</h3><h4 id="4-1ä¿®æ”¹è®¾å¤‡æ ‘"><a href="#4-1ä¿®æ”¹è®¾å¤‡æ ‘" class="headerlink" title="4.1ä¿®æ”¹è®¾å¤‡æ ‘"></a>4.1ä¿®æ”¹è®¾å¤‡æ ‘</h4><p>å¦‚æœéœ€è¦ä½¿ç”¨å†…æ ¸è‡ªå¸¦çš„<code>gpio_keys.c</code>é©±åŠ¨ï¼Œå¯ä»¥å‚è€ƒå†…æ ¸ä¸­<code>Documentation/devicetree/bindings/input/gpio-keys.txt</code>ï¼Œéœ€è¦è®¾å¤‡æ ‘ä¸­çš„èŠ‚ç‚¹æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<ul>
<li><p>èŠ‚ç‚¹åå­—ä¸º<code>â€œgpio-keysâ€</code></p>
</li>
<li><p>gpio-keysèŠ‚ç‚¹çš„compatibleå±æ€§å¿…é¡»ä¸º<code>â€œgpio-keysâ€</code></p>
</li>
<li><p>æ‰€æœ‰çš„æŒ‰é”®éƒ½æ˜¯gpio-keysçš„å­èŠ‚ç‚¹ï¼Œå¹¶å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å±æ€§æè¿°è‡ªå·±ï¼š</p>
<ul>
<li>gpiosï¼šæŒ‰é”®è¿æ¥çš„gpioä¿¡æ¯</li>
<li>interruptsï¼šæŒ‰é”®ä½¿ç”¨çš„ä¸­æ–­ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰</li>
<li>lableï¼šæŒ‰é”®åå­—</li>
<li>linux,codeï¼šè¦æ¨¡æ‹Ÿçš„æŒ‰é”®å€¼</li>
</ul>
</li>
<li><p>å¦‚æœè¦æ”¯æŒè¿æŒ‰çš„è¯éœ€è¦åŠ å…¥<code>autorepeat</code>å±æ€§</p>
<p>  ä¾‹å­ï¼š</p>
<pre><code>  gpio_keys {
      compatible = &quot;gpio-keys&quot;;
      autorepeat;//æ”¯æŒè¿æŒ‰
      k1 {
          label = &quot;k1&quot;;//æŒ‰é”®åç§°
          linux,code = &lt;KEY_POWER&gt;;//è¦æ¨¡æ‹Ÿçš„æŒ‰é”®å€¼
          gpios = &lt;&amp;pio 0 7 GPIO_ACTIVE_LOW&gt;;//æŒ‰é”®è¿æ¥çš„gpioä¿¡æ¯
          interrupts = &lt;0 7 IRQ_TYPE_EDGE_BOTH&gt;;//ä¸­æ–­ä¿¡æ¯ PA7 --&gt; EINT7
      };
  };</code></pre></li>
</ul>
<h4 id="4-2ç¼–å†™é©±åŠ¨"><a href="#4-2ç¼–å†™é©±åŠ¨" class="headerlink" title="4.2ç¼–å†™é©±åŠ¨"></a>4.2ç¼–å†™é©±åŠ¨</h4><p>Linuxä¸­å·²ç»å®ç°äº†inputè¾“å…¥å­ç³»ç»Ÿæ¡†æ¶ï¼Œå› æ­¤æ— éœ€å†æ¬¡æ³¨å†Œè®¾å¤‡ï¼Œç³»ç»Ÿä¸­inputæ¡†æ¶ä¸­çš„æ‰€æœ‰è®¾å¤‡çš„ä¸»è®¾å¤‡å·å‡ä¸º13</p>
<ul>
<li>inputè®¾å¤‡ç»“æ„ä½“<code>input_dev</code><ul>
<li>evbitæˆå‘˜ï¼šè¾“å…¥äº‹ä»¶ç±»å‹ï¼Œå¯é€‰äº‹ä»¶è§ä¸‹æ–‡</li>
<li>keybitæˆå‘˜ï¼šæŒ‰é”®å€¼</li>
<li>relbitæˆå‘˜ï¼šç›¸å¯¹åæ ‡</li>
<li>absbitæˆå‘˜ï¼šç»å¯¹åæ ‡</li>
<li>â€¦</li>
</ul>
</li>
</ul>
<p>è®¾ç½®input_devç»“æ„ä½“ä¸­æˆå‘˜çš„æ–¹æ³•ï¼š</p>
<ul>
<li>__set_bit</li>
<li>BIT_MASKå®</li>
<li>input_set_capabilityï¼šä»…ä»…è®¾ç½®keybitæˆå‘˜</li>
</ul>
<h5 id="ç›¸å…³å‡½æ•°-1"><a href="#ç›¸å…³å‡½æ•°-1" class="headerlink" title="ç›¸å…³å‡½æ•°"></a>ç›¸å…³å‡½æ•°</h5><ul>
<li>input_allocate_deviceï¼šç”³è¯·ä¸€ä¸ªinput_devç»“æ„ä½“</li>
<li>input_free_deviceï¼šé‡Šæ”¾ç”³è¯·åˆ°çš„input_devç»“æ„ä½“</li>
<li>input_register_deviceï¼šå‘å†…æ ¸æ³¨å†Œinput_devç»“æ„ä½“</li>
<li>input_unregister_deviceï¼šæ³¨é”€input_devç»“æ„ä½“</li>
<li>input_eventï¼šä¸ŠæŠ¥æŒ‡å®šäº‹ä»¶åŠå¯¹åº”çš„å€¼<ul>
<li>input_report_keyï¼šå°è£…ä¸€å±‚ï¼Œä¸“é—¨ä¸ŠæŠ¥æŒ‰é”®äº‹ä»¶</li>
<li>input_report_rel</li>
<li>input_report_abs</li>
<li>input_report_ff_status</li>
<li>input_report_switch</li>
<li>input_mt_sync</li>
</ul>
</li>
<li>input_syncï¼šåŒæ­¥äº‹ä»¶</li>
</ul>
<h5 id="input-devçš„ç›¸å…³äº‹ä»¶"><a href="#input-devçš„ç›¸å…³äº‹ä»¶" class="headerlink" title="input_devçš„ç›¸å…³äº‹ä»¶"></a>input_devçš„ç›¸å…³äº‹ä»¶</h5><ul>
<li>EV_SYNï¼šåŒæ­¥</li>
<li>EV_KEYï¼šæŒ‰é”®</li>
<li>EV_RELï¼šç›¸å¯¹åæ ‡</li>
<li>EV_ABSï¼šç»å¯¹åæ ‡</li>
<li>EV_MSCï¼šæ‚é¡¹ï¼ˆå…¶ä»–ï¼‰</li>
<li>EV_SWï¼šå¼€å…³</li>
<li>EV_LEDï¼šLED</li>
<li>EV_SNDï¼šå£°éŸ³ï¼ˆsoundï¼‰</li>
<li>EV_REPï¼šé‡å¤äº‹ä»¶</li>
<li>EV_FFï¼šå‹åŠ›</li>
<li>EV_PWRï¼šç”µæº</li>
<li>EV_FF_STATUSï¼šå‹åŠ›çŠ¶æ€</li>
</ul>
<h4 id="4-3è°ƒè¯•"><a href="#4-3è°ƒè¯•" class="headerlink" title="4.3è°ƒè¯•"></a>4.3è°ƒè¯•</h4><p>inputè®¾å¤‡æ³¨å†ŒæˆåŠŸåå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ï¼š</p>
<pre><code class="bash">ls /dev/input/ -l</code></pre>
<p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æœ‰æ•ˆï¼š</p>
<pre><code>busybox hexdump /dev/input/event1</code></pre><h3 id="5-IICæ¡†æ¶é©±åŠ¨"><a href="#5-IICæ¡†æ¶é©±åŠ¨" class="headerlink" title="5.IICæ¡†æ¶é©±åŠ¨"></a>5.IICæ¡†æ¶é©±åŠ¨</h3><h4 id="5-1è®¾å¤‡æ ‘"><a href="#5-1è®¾å¤‡æ ‘" class="headerlink" title="5.1è®¾å¤‡æ ‘"></a>5.1è®¾å¤‡æ ‘</h4><ul>
<li><code>clock-frequency</code>å±æ€§ï¼šiicæ€»çº¿çš„é€Ÿåº¦ï¼ˆé»˜è®¤100000ï¼Œå³100kï¼‰</li>
<li>statusï¼šæ˜¯å¦ä½¿èƒ½è¯¥æ€»çº¿<ul>
<li>okay</li>
<li>disabled</li>
</ul>
</li>
<li>iicè®¾å¤‡èŠ‚ç‚¹éœ€è¦å†™åˆ°iicæ€»çº¿èŠ‚ç‚¹ä¸­ï¼Œä½œä¸ºæ€»çº¿èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</li>
<li>æ€»çº¿èŠ‚ç‚¹éœ€è¦åˆ©ç”¨<code>pinctrl-names = &quot;default&quot;;</code>å’Œ<code>pinctrl-0</code>æŒ‡å®šiicå¼•è„šï¼ˆå·²ç»è®¾ç½®å¥½ï¼‰</li>
<li>iicæ§åˆ¶å™¨èŠ‚ç‚¹<code>compatible</code>å±æ€§å¿…é¡»ä¸ºallwinner,sun6i-a31-i2cæˆ–allwinner,sun4i-a10-i2cï¼Œè¿™é‡Œåœ¨sunxi-h3-h5.dtsiä¸­å·²ç»è®¾ç½®å¥½ï¼Œæ— éœ€å†æ¬¡è®¾ç½®</li>
</ul>
<p>è®¾å¤‡æ ‘ä¿®æ”¹æˆåŠŸåå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ï¼š</p>
<pre><code class="bash">#æŸ¥çœ‹è®¾å¤‡èŠ‚ç‚¹ï¼Œè¯¥ç›®å½•ä¸‹æ”¾ç€æ‰€æœ‰çš„i2cè®¾å¤‡
#èŠ‚ç‚¹æ˜¯ä»¥i2cåœ°å€ç»“å°¾çš„æ–‡ä»¶å¤¹
ls /sys/bus/i2c/devices/</code></pre>
<h4 id="5-2é©±åŠ¨"><a href="#5-2é©±åŠ¨" class="headerlink" title="5.2é©±åŠ¨"></a>5.2é©±åŠ¨</h4><h5 id="åŸºæœ¬æ•°æ®ç»“æ„"><a href="#åŸºæœ¬æ•°æ®ç»“æ„" class="headerlink" title="åŸºæœ¬æ•°æ®ç»“æ„"></a>åŸºæœ¬æ•°æ®ç»“æ„</h5><ul>
<li>IICæ€»çº¿ç»“æ„ä½“<code>i2c_bus_type</code><ul>
<li>matchå‡½æ•°ï¼šé©±åŠ¨å’Œè®¾å¤‡åŒ¹é…æ˜¯è°ƒç”¨è¯¥å‡½æ•°æ¥å†³å®šæ˜¯å¦åŒ¹é…</li>
</ul>
</li>
<li>IICé€‚é…å™¨ï¼ˆæ§åˆ¶å™¨ï¼‰é©±åŠ¨ç»“æ„ä½“<code>i2c_adapter</code><ul>
<li>algoï¼šæ€»çº¿è®¿é—®ç®—æ³•æˆå‘˜<ul>
<li>master_xferï¼šIICé€‚é…å™¨çš„ä¼ è¾“å‡½æ•°</li>
<li>smbus_xferï¼šSMBUSæ€»çº¿ä¼ è¾“å‡½æ•°</li>
</ul>
</li>
</ul>
</li>
<li>IICè®¾å¤‡ç»“æ„ä½“<code>i2c_client</code><ul>
<li>addrï¼šèŠ¯ç‰‡åœ°å€ï¼Œå­˜åœ¨ä½7ä½</li>
<li>nameï¼šåå­—</li>
<li>adapterï¼šå¯¹åº”çš„IICé€‚é…å™¨</li>
<li>devï¼šè®¾å¤‡ç»“æ„ä½“</li>
<li>irqï¼šä¸­æ–­</li>
</ul>
</li>
<li>IICè®¾å¤‡é©±åŠ¨ç»“æ„ä½“<code>i2c_driver</code><ul>
<li>probeå‡½æ•°ï¼šIICè®¾å¤‡å’Œé©±åŠ¨åŒ¹é…åè°ƒç”¨ï¼Œåˆå§‹åŒ–ç”¨</li>
<li>removeå‡½æ•°ï¼šåŒç†ï¼Œå¸è½½ç”¨</li>
<li>id_tableï¼šä¼ ç»Ÿæ–¹å¼åŒ¹é…IDåˆ—è¡¨</li>
<li>driverï¼š<ul>
<li>ownerï¼šæ‰€æœ‰è€…ï¼Œä¸€èˆ¬ä¸ºå®THIS_MODULE</li>
<li>nameï¼šåå­—</li>
<li>of_match_tableï¼šè®¾å¤‡æ ‘åŒ¹é…åˆ—è¡¨</li>
</ul>
</li>
</ul>
</li>
<li>IICå‘é€æ•°æ®ç»“æ„ä½“<code>i2c_msg</code><ul>
<li>addrï¼šä»æœºåœ°å€</li>
<li>flagsï¼šæ ‡å¿—</li>
<li>lenï¼šæ¶ˆæ¯é•¿åº¦</li>
<li>bufï¼šæ¶ˆæ¯æ•°æ®</li>
</ul>
</li>
</ul>
<h5 id="ç›¸å…³å‡½æ•°-2"><a href="#ç›¸å…³å‡½æ•°-2" class="headerlink" title="ç›¸å…³å‡½æ•°"></a>ç›¸å…³å‡½æ•°</h5><ul>
<li>IICé€‚é…å™¨ï¼ˆæ§åˆ¶å™¨ï¼‰<ul>
<li>i2c_add_adapterï¼šå‘ç³»ç»Ÿæ³¨å†Œi2c_adapteræˆå‘˜ï¼Œä½¿ç”¨åŠ¨æ€æ€»çº¿å·</li>
<li>i2c_add_numbered_adapterï¼šå‘ç³»ç»Ÿæ³¨å†Œi2c_adapteræˆå‘˜ï¼Œä½¿ç”¨é™æ€æ€»çº¿å·</li>
<li>i2c_del_adapterï¼šåˆ é™¤IICé€‚é…å™¨</li>
</ul>
</li>
<li>SPIè®¾å¤‡<ul>
<li>i2c_register_driver / i2c_add_driverï¼šæ³¨å†Œi2c_driver</li>
<li>i2c_del_driverï¼šå¸è½½i2c_driver</li>
</ul>
</li>
<li>ä¼ è¾“æ•°æ®<ul>
<li>i2c_transferï¼šä¼ è¾“i2c_msgç±»å‹æ•°æ®</li>
<li>i2c_master_sendï¼šIICå‘é€ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œæœ€åä¼šè°ƒç”¨i2c_transfer</li>
<li>i2c_master_recvï¼šIICæ¥æ”¶æ•°æ®åˆ°ç¼“å­˜ä¸­ï¼Œæœ€åä¼šè°ƒç”¨i2c_transfer</li>
</ul>
</li>
</ul>
<h4 id="5-3è°ƒè¯•"><a href="#5-3è°ƒè¯•" class="headerlink" title="5.3è°ƒè¯•"></a>5.3è°ƒè¯•</h4><h5 id="i2c-toolså·¥å…·"><a href="#i2c-toolså·¥å…·" class="headerlink" title="i2c-toolså·¥å…·"></a>i2c-toolså·¥å…·</h5><p>å¾—ç›Šäºubuntucoreï¼Œç›´æ¥è¿è¡Œ<code>sudo apt install i2c-tools</code>å®‰è£…i2c-toolså·¥å…·</p>
<ul>
<li>æŸ¥è¯¢i2cæ€»çº¿<code>sudo i2cdetect -l</code></li>
<li>æ£€æµ‹i2cåœ°å€<code>sudo i2cdetect -r -y 0</code>ï¼ˆæœ€åçš„0ä¸ºi2c-0æ€»çº¿ï¼‰</li>
</ul>
<h3 id="6-SPIæ¡†æ¶é©±åŠ¨"><a href="#6-SPIæ¡†æ¶é©±åŠ¨" class="headerlink" title="6.SPIæ¡†æ¶é©±åŠ¨"></a>6.SPIæ¡†æ¶é©±åŠ¨</h3><h4 id="6-1è®¾å¤‡æ ‘"><a href="#6-1è®¾å¤‡æ ‘" class="headerlink" title="6.1è®¾å¤‡æ ‘"></a>6.1è®¾å¤‡æ ‘</h4><ul>
<li><code>spi-max-frequency</code>å±æ€§ï¼šspiæ€»çº¿çš„æœ€å¤§é€Ÿåº¦ï¼ˆé»˜è®¤100000ï¼Œå³100kï¼‰</li>
<li>statusï¼šæ˜¯å¦ä½¿èƒ½è¯¥æ€»çº¿<ul>
<li>okay</li>
<li>disabled</li>
</ul>
</li>
<li>spiè®¾å¤‡èŠ‚ç‚¹éœ€è¦å†™åˆ°spiæ€»çº¿èŠ‚ç‚¹ä¸­ï¼Œä½œä¸ºæ€»çº¿èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</li>
<li>é€šè¿‡<code>cs-gpios</code>å±æ€§æŒ‡å®šCSå¼•è„š</li>
<li>spiè®¾å¤‡èŠ‚ç‚¹ä¸­<code>reg</code>å’ŒèŠ‚ç‚¹<code>@</code>åçš„æ•°å­—å‡ä¸ºè¯¥è®¾å¤‡æ‰€ä½¿ç”¨çš„spié€šé“ï¼ˆä¸€èˆ¬0å³å¯ï¼‰</li>
<li>æ€»çº¿èŠ‚ç‚¹éœ€è¦åˆ©ç”¨<code>pinctrl-names = &quot;default&quot;;</code>å’Œ<code>pinctrl-0</code>æŒ‡å®šspiå¼•è„šï¼ˆå·²ç»è®¾ç½®å¥½ï¼‰</li>
<li>spiæ§åˆ¶å™¨èŠ‚ç‚¹<code>compatible</code>å±æ€§å¿…é¡»ä¸ºallwinner,sun8i-h3-spiæˆ–allwinner,sun6i-a31-spiï¼Œè¿™é‡Œåœ¨sunxi-h3-h5.dtsiä¸­å·²ç»è®¾ç½®å¥½ï¼Œæ— éœ€å†æ¬¡è®¾ç½®</li>
</ul>
<p>è®¾å¤‡æ ‘ä¿®æ”¹æˆåŠŸåå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ï¼š</p>
<pre><code class="bash">#æŸ¥çœ‹è®¾å¤‡èŠ‚ç‚¹ï¼Œè¯¥ç›®å½•ä¸‹æ”¾ç€æ‰€æœ‰çš„i2cè®¾å¤‡
#èŠ‚ç‚¹æ˜¯ä»¥i2cåœ°å€ç»“å°¾çš„æ–‡ä»¶å¤¹
ls /sys/bus/spi/devices/</code></pre>
<h4 id="6-2é©±åŠ¨"><a href="#6-2é©±åŠ¨" class="headerlink" title="6.2é©±åŠ¨"></a>6.2é©±åŠ¨</h4><h5 id="åŸºæœ¬æ•°æ®ç»“æ„-1"><a href="#åŸºæœ¬æ•°æ®ç»“æ„-1" class="headerlink" title="åŸºæœ¬æ•°æ®ç»“æ„"></a>åŸºæœ¬æ•°æ®ç»“æ„</h5><ul>
<li>SPIæ€»çº¿ç»“æ„ä½“<code>spi_bus_type</code><ul>
<li>matchå‡½æ•°ï¼šé©±åŠ¨å’Œè®¾å¤‡åŒ¹é…æ˜¯è°ƒç”¨è¯¥å‡½æ•°æ¥å†³å®šæ˜¯å¦åŒ¹é…</li>
</ul>
</li>
<li>SPIä¸»æœºé©±åŠ¨ç»“æ„ä½“<code>spi_master</code><ul>
<li>transferå‡½æ•°ï¼šæ§åˆ¶å™¨æ•°æ®ä¼ è¾“å‡½æ•°</li>
<li>transfer_one_messageå‡½æ•°ï¼šæ§åˆ¶å™¨æ•°æ®ä¼ è¾“å‡½æ•°ï¼Œä¸€æ¬¡å‘ä¸€ä¸ªspi_messageåŒ…</li>
</ul>
</li>
<li>SPIè®¾å¤‡é©±åŠ¨ç»“æ„ä½“<code>spi_driver</code><ul>
<li>probeå‡½æ•°ï¼šSPIè®¾å¤‡å’Œé©±åŠ¨åŒ¹é…åè°ƒç”¨ï¼Œåˆå§‹åŒ–ç”¨</li>
<li>removeå‡½æ•°ï¼šåŒç†ï¼Œå¸è½½ç”¨</li>
<li>id_tableï¼šä¼ ç»Ÿæ–¹å¼åŒ¹é…IDåˆ—è¡¨</li>
<li>driverï¼š<ul>
<li>ownerï¼šæ‰€æœ‰è€…ï¼Œä¸€èˆ¬ä¸ºå®THIS_MODULE</li>
<li>nameï¼šåå­—</li>
<li>of_match_tableï¼šè®¾å¤‡æ ‘åŒ¹é…åˆ—è¡¨</li>
</ul>
</li>
</ul>
</li>
<li>SPIä¼ è¾“ä¿¡æ¯ç»“æ„ä½“<code>spi_transfer</code><ul>
<li>tx_bufï¼šå‘é€æ•°æ®</li>
<li>rx_bufï¼šæ¥æ”¶æ•°æ®</li>
<li>lenï¼šæ•°æ®é•¿åº¦</li>
</ul>
</li>
<li>SPIæ¶ˆæ¯ç»“æ„ä½“<code>spi_message</code>ï¼Œç”±<code>spi_transfer</code>ç»„æˆ<ul>
<li>completeå‡½æ•°ï¼šå¼‚æ­¥ä¼ è¾“å®Œæˆæ—¶è°ƒç”¨</li>
</ul>
</li>
</ul>
<h5 id="ç›¸å…³å‡½æ•°-3"><a href="#ç›¸å…³å‡½æ•°-3" class="headerlink" title="ç›¸å…³å‡½æ•°"></a>ç›¸å…³å‡½æ•°</h5><ul>
<li>SPIä¸»æœº<ul>
<li>spi_alloc_masterï¼šç”³è¯·spi_masterç»“æ„ä½“</li>
<li>spi_master_putï¼šé‡Šæ”¾spi_masterç»“æ„ä½“</li>
<li>spi_register_masterï¼šæ³¨å†Œ</li>
<li>spi_unregister_masterï¼šæ³¨é”€</li>
</ul>
</li>
<li>SPIè®¾å¤‡<ul>
<li>spi_register_driverï¼šæ³¨å†Œ</li>
<li>spi_unregister_driverï¼šå¸è½½</li>
</ul>
</li>
<li>æ•°æ®ä¼ è¾“<ul>
<li>spi_message_initï¼šåˆå§‹åŒ–spi_messageç»“æ„ä½“</li>
<li>spi_message_add_tailï¼šå°†spi_transferæ·»åŠ åˆ°spi_messageé˜Ÿåˆ—ä¸­</li>
<li>spi_syncï¼šåŒæ­¥ä¼ è¾“ï¼ˆä¼šé˜»å¡å¹¶ç­‰å¾…SPIæ•°æ®ä¼ è¾“å®Œæˆï¼‰</li>
<li>spi_asyncï¼šå¼‚æ­¥ä¼ è¾“ï¼ˆä¼ è¾“å®Œæˆåä¼šè°ƒç”¨spi_message.completeå‡½æ•°ï¼‰</li>
</ul>
</li>
</ul>
<h4 id="6-3è°ƒè¯•"><a href="#6-3è°ƒè¯•" class="headerlink" title="6.3è°ƒè¯•"></a>6.3è°ƒè¯•</h4>
      
       <hr><span style="font-style: italic;color: gray;"> æ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚é‚®ä»¶ï¼š1125934312@qq.com </span>
    </div>
</article>



<div class="article_copyright">
    <p><span class="copy-title">Title:</span>NanoPi_Neo_Coreåº•å±‚å¼€å‘</p>
    <p><span class="copy-title">Count:</span><span class="post-count">6.7k</span></p>
    <p><span class="copy-title">Author:</span><a  title="NU-LL">NU-LL</a></p>
    <p><span class="copy-title">Created At:</span>2019-10-18, 12:25:42</p>
    <p><span class="copy-title">Updated At:</span>2019-10-25, 16:27:49</p>
    <span class="copy-title">Url:</span><a class="post-url" href="/2019/10/18/NanoPi_Neo_Coreåº•å±‚å¼€å‘/" title="NanoPi_Neo_Coreåº•å±‚å¼€å‘">http://NU-LL.github.io/2019/10/18/NanoPi_Neo_Coreåº•å±‚å¼€å‘/</a>
    <p>
        <span class="copy-title">Copyright:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">&#39;Attribution-non-commercial-shared in the same way 4.0&#39;</a> Reprint please keep the original link and author.
    </p>
</div>





    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    Â©2016-2020 NU-LL
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="åˆ‡æ¢å…¨å± å¿«æ·é”® s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: #fafafa;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*åˆ—è¡¨æ ·å¼*/
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
